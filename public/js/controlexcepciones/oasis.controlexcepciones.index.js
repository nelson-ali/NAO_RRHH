function definirGrillaParaListaRelaboralesParaControlExcepciones(c){var a={datatype:"json",datafields:[{name:"nro_row",type:"integer"},{name:"fecha_nac",type:"string"},{name:"edad",type:"integer"},{name:"lugar_nac",type:"integer"},{name:"genero",type:"integer"},{name:"e_civil",type:"integer"},{name:"id_relaboral",type:"integer"},{name:"id_persona",type:"integer"},{name:"tiene_contrato_vigente",type:"integer"},{name:"id_fin_partida",type:"integer"},{name:"finpartida",type:"string"},{name:"ubicacion",type:"string"},{name:"id_condicion",type:"integer"},{name:"condicion",type:"string"},{name:"item",type:"integer"},{name:"tiene_item",type:"integer"},{name:"id_cargo",type:"integer"},{name:"cargo_codigo",type:"string"},{name:"cargo_resolucion_ministerial_id",type:"integer"},{name:"cargo_resolucion_ministerial",type:"string"},{name:"estado",type:"integer"},{name:"estado_descripcion",type:"string"},{name:"nombres",type:"string"},{name:"ci",type:"string"},{name:"expd",type:"string"},{name:"num_complemento",type:"string"},{name:"id_organigrama",type:"integer"},{name:"gerencia_administrativa",type:"string"},{name:"departamento_administrativo",type:"string"},{name:"id_area",type:"integer"},{name:"area",type:"string"},{name:"id_ubicacion",type:"integer"},{name:"ubicacion",type:"string"},{name:"num_contrato",type:"string"},{name:"fin_partida",type:"string"},{name:"partida",type:"integer"},{name:"id_procesocontratacion",type:"integer"},{name:"proceso_codigo",type:"string"},{name:"nivelsalarial",type:"string"},{name:"nivelsalarial_resolucion",type:"string"},{name:"cargo",type:"string"},{name:"sueldo",type:"numeric"},{name:"fecha_ini",type:"date"},{name:"fecha_incor",type:"date"},{name:"fecha_fin",type:"date"},{name:"fecha_baja",type:"date"},{name:"motivo_baja",type:"string"},{name:"relaboral_previo_id",type:"integer"},{name:"observacion",type:"string"},{name:"fecha_ing",type:"date"}],url:"/relaborales/listpaged?opcion=0&gestion="+c,cache:!1,root:"Rows",beforeprocessing:function(e){a.totalrecords=e[0].TotalRows},filter:function(){$("#divGridRelaborales").jqxGrid("updatebounddata","filter")},sort:function(){$("#divGridRelaborales").jqxGrid("updatebounddata","sort")}},l=new $.jqx.dataAdapter(a);!function(){var e=obtenerFiltrables(c),a=e.expds,t=e.gerencias,i=e.condiciones,n=e.departamentos,o=e.ubicaciones,r=e.sueldos;prepareSimulator("grid");$("#divGridRelaborales").jqxGrid({width:"100%",height:"590px",source:l,sortable:!0,altRows:!0,groupable:!0,columnsresize:!0,pageable:!0,pagerMode:"advanced",pagesize:10,virtualmode:!0,rendergridrows:function(e){return e.data},showfilterrow:!0,filterable:!0,showtoolbar:!0,autorowheight:!0,enablebrowserselection:!0,rendertoolbar:function(e){var a=$("<div></div>");e.append(a),a.append("<button id='listrowbutton' class='btn btn-sm btn-primary' type='button'  title='Listado de Excepciones por Relaci&oacute;n Laboral.'><i class='fa fa-list-alt fa-2x text-info' title='Listado de Excepciones por Relaci&oacute;n Laboral.'/></i></button>"),a.append("<button id='listcountbutton' class='btn btn-sm btn-primary' type='button'  title='Contabilizador de Excepciones.'><i class='fa fa-tasks fa-2x text-warning' title='Contabilizador de Excepciones.'/></i></button>"),a.append("<button title='Ver calendario de turnos y permisos de manera global para la persona.' id='turnrowbutton' class='btn btn-sm btn-primary' type='button'><i class='fa fa-calendar fa-2x text-success' title='Vista Turnos Laborales por relaci&oacute;n laboral.'/></i></button>"),a.append("<button title='Exportar a Excel.' id='exportexcelrowbutton' class='btn btn-sm btn-primary' type='button'><i class='fi fi-xls fa-2x text-success' title='Exportar a Excel.'/></i></button>"),a.append("<button title='Exportar a PDF.' id='exportpdfrowbutton' class='btn btn-sm btn-primary' type='button'><i class='fi fi-pdf fa-2x text-danger' title='Exportar a PDF.'/></i></button>"),a.append("<button title='Refrescar Grilla' id='refreshbutton' class='btn btn-sm btn-primary' type='button'><i class='fa fa-repeat fa-2x text-default' title='Refrescar grilla.'/></i></button>"),a.append("<button title='Desagrupar.' id='cleargroupsrowbutton' class='btn btn-sm btn-primary' type='button'><i class='fa fa-chain-broken fa-2x text-default' title='Desagrupar.'/></i></button>"),a.append("<button title='Desfiltrar.' id='clearfiltersrowbutton' class='btn btn-sm btn-primary' type='button'><i class='gi gi-sorting fa-2x text-default' title='Desfiltrar.'/></i></button>"),$("#listrowbutton").jqxButton(),$("#listcountbutton").jqxButton(),$("#turnrowbutton").jqxButton(),$("#refreshbutton").jqxButton(),$("#cleargroupsrowbutton").jqxButton(),$("#clearfiltersrowbutton").jqxButton(),$("#exportexcelrowbutton").jqxButton(),$("#exportpdfrowbutton").jqxButton(),$("#refreshbutton").on("click",function(){$("#divGridRelaborales").jqxGrid("updatebounddata")}),$("#cleargroupsrowbutton").off(),$("#cleargroupsrowbutton").on("click",function(){$("#divGridRelaborales").jqxGrid("cleargroups")}),$("#clearfiltersrowbutton").off(),$("#clearfiltersrowbutton").on("click",function(){$("#divGridRelaborales").jqxGrid("clearfilters")}),$("#exportexcelrowbutton").off(),$("#exportexcelrowbutton").on("click",function(){var e=$("#jqxlistbox").jqxListBox("getCheckedItems"),t=0;$.each(e,function(e,a){t++}),0<t?exportarReporte(1):(alert("Debe seleccionar al menos una columna para la obtención del reporte solicitado."),$("#jqxlistbox").focus())}),$("#exportpdfrowbutton").off(),$("#exportpdfrowbutton").on("click",function(){var e=$("#jqxlistbox").jqxListBox("getCheckedItems"),t=0;$.each(e,function(e,a){t++}),0<t?exportarReporte(2):(alert("Debe seleccionar al menos una columna para la obtención del reporte solicitado."),$("#jqxlistbox").focus())}),$("#listrowbutton").off(),$("#listrowbutton").on("click",function(){var e=$("#divGridRelaborales").jqxGrid("getselectedrowindex");if(0<=e){var a=$("#divGridRelaborales").jqxGrid("getrowdata",e);if(null!=a){var t=a.id_relaboral;if($(".msjs-alert").hide(),$("#hdnIdPersonaHistorial").val(a.id_persona),0<=a.tiene_contrato_vigente){$("#divTabControlExcepciones").jqxTabs("enableAt",0),$("#divTabControlExcepciones").jqxTabs("disableAt",2),$("#divTabControlExcepciones").jqxTabs("disableAt",3),$("#divTabControlExcepciones").jqxTabs("disableAt",4),$("#divTabControlExcepciones").jqxTabs("disableAt",5),$("#divTabControlExcepciones").jqxTabs("enableAt",1),$("#divTabControlExcepciones").jqxTabs({selectedItem:1}),$("#tabFichaPersonal").jqxTabs({theme:"oasis",width:"100%",height:"100%",position:"top"}),$("#tabFichaPersonal").jqxTabs({selectedItem:0}),$("#ddNombres").html(a.nombres);var i=obtenerRutaFoto(a.ci,a.num_complemento);$("#imgFotoPerfilContactoPer").attr("src",i),$("#imgFotoPerfilContactoInst").attr("src",i),$("#imgFotoPerfil").attr("src",i),cargarPersonasContactosControlExcepciones(1,a.id_persona),$("#hdnIdRelaboralVista").val(t),$("#hdnSwPrimeraVistaHistorial").val(0),$("#divContent_"+a.id_relaboral).focus().select(),definirGrillaParaListaControlExcepcionesPorIdRelaboral(a)}else{var n="Para acceder a la vista del registro, la persona debe haber tenido al menos un registro de relaci&oacute,n laboral que implica un estado ACTIVO o PASIVO.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(n),$("#divMsjeNotificacionError").jqxNotification("open")}}}else{var n="Debe seleccionar un registro necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(n),$("#divMsjeNotificacionError").jqxNotification("open")}}),$("#listcountbutton").off(),$("#listcountbutton").on("click",function(){$("#divTabControlExcepciones").jqxTabs("enableAt",0),$("#divTabControlExcepciones").jqxTabs("disableAt",1),$("#divTabControlExcepciones").jqxTabs("disableAt",2),$("#divTabControlExcepciones").jqxTabs("disableAt",3),$("#divTabControlExcepciones").jqxTabs("enableAt",4),$("#divTabControlExcepciones").jqxTabs({selectedItem:4}),$("#divTabControlExcepciones").jqxTabs("disableAt",5);var e=new Date,a=e.getDate(),t=e.getMonth()+1,i=e.getFullYear(),n=a+"-"+t+"-"+i;$("#txtFechaIniCount").datepicker("update",n),$("#txtFechaFinCount").datepicker("update",n),definirGrillaParaListaCuantificadoraControlExcepcionesGeneralPorRango("",""),$("#divControlExcepcionCount").jqxGrid("clear")}),$("#turnrowbutton").off(),$("#turnrowbutton").on("click",function(){var e=$("#divGridRelaborales").jqxGrid("getselectedrowindex");if(0<=e){var a=$("#divGridRelaborales").jqxGrid("getrowdata",e);if(null!=a){a.id_relaboral;$("#divTabControlExcepciones").jqxTabs("enableAt",0),$("#divTabControlExcepciones").jqxTabs("disableAt",1),$("#divTabControlExcepciones").jqxTabs("disableAt",2),$("#divTabControlExcepciones").jqxTabs("disableAt",3),$("#divTabControlExcepciones").jqxTabs("disableAt",4),$("#divTabControlExcepciones").jqxTabs("enableAt",5),$("#divTabControlExcepciones").jqxTabs({selectedItem:5});$("#spanPrefijoCalendarioLaboral").html(""),$("#spanSufijoCalendarioLaboral").html(" Vrs. Calendario de Excepciones (Individual)");var t=new Date,i=t.getDate(),n=t.getMonth(),o=t.getFullYear();$("#calendar").html("");var r=iniciarCalendarioLaboralPorRelaboralTurnosAndExcepcionesParaVerAsignaciones(a,a.id_relaboral,5,0,3,[],o,n,i);sumarTotalHorasPorSemana(r)}else{var c="Para acceder a la vista del registro, la persona debe haber tenido al menos un registro de relaci&oacute,n laboral que implica un estado ACTIVO o PASIVO.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(c),$("#divMsjeNotificacionError").jqxNotification("open")}switch($("#tabFichaPersonalTurnAndExcept").jqxTabs({theme:"oasis",width:"100%",height:"100%",position:"top"}),$("#tabFichaPersonalTurnAndExcept").jqxTabs({selectedItem:0}),$(".ddNombresTurnAndExcept").html(a.nombres+"&nbsp;"),$(".ddCIAndNumComplementoExpdTurnAndExcept").html(a.ci+a.num_complemento+" "+a.expd+"&nbsp;"),$("#ddCargoTurnAndExcept").html(a.cargo+"&nbsp;"),$("#ddProcesoTurnAndExcept").html(a.proceso_codigo+"&nbsp;"),$("#ddFinanciamientoTurnAndExcept").html(a.condicion+" (Partida "+a.partida+")"),$("#ddGerenciaTurnAndExcept").html(a.gerencia_administrativa+"&nbsp;"),""!=a.departamento_administrativo&&null!=a.departamento_administrativo?($("#ddDepartamentoTurnAndExcept").show(),$("#dtDepartamentoTurnAndExcept").show(),$("#ddDepartamentoTurnAndExcept").html(a.departamento_administrativo+"&nbsp;")):($("#dtDepartamentoTurnAndExcept").hide(),$("#ddDepartamentoTurnAndExcept").hide()),$("#ddUbicacionTurnAndExcept").html(a.ubicacion+"&nbsp;"),a.tiene_item){case 1:$("#dtItemTurnAndExcept").show(),$("#ddItemTurnAndExcept").show(),$("#ddItemTurnAndExcept").html(a.item+"&nbsp;");break;case 0:$("#dtItemTurnAndExcept").hide(),$("#ddItemTurnAndExcept").hide()}if($("#ddNivelSalarialTurnAndExcept").html(a.nivelsalarial+"&nbsp;"),$("#ddHaberTurnAndExcept").html(a.sueldo+"&nbsp;"),$("#ddFechaIngTurnAndExcept").html(fechaConvertirAFormato(a.fecha_ing,"-")+"&nbsp;"),null!=a.fecha_incor){var l=fechaConvertirAFormato(a.fecha_incor,"-");$("#dtFechaIncorTurnAndExcept").show(),$("#ddFechaIncorTurnAndExcept").show(),$("#ddFechaIncorTurnAndExcept").html(l+"&nbsp;")}else $("#dtFechaIncorTurnAndExcept").hide(),$("#ddFechaIncorTurnAndExcept").hide();switch($("#ddFechaIniTurnAndExcept").html(fechaConvertirAFormato(a.fecha_ini,"-")+"&nbsp;"),a.tiene_item){case 1:$("#dtFechaFinTurnAndExcept").hide(),$("#ddFechaFinTurnAndExcept").hide();break;case 0:$("#dtFechaFinTurnAndExcept").show(),$("#ddFechaFinTurnAndExcept").show(),$("#ddFechaFinTurnAndExcept").html(fechaConvertirAFormato(a.fecha_fin,"-")+"&nbsp;")}$("#ddEstadoDescripcionTurnAndExcept").html(a.estado_descripcion+"&nbsp;"),0==a.estado?($("#dtFechaBajaTurnAndExcept").show(),$("#ddFechaBajaTurnAndExcept").show(),$("#ddFechaBajaTurnAndExcept").html(fechaConvertirAFormato(a.fecha_baja,"-")+"&nbsp;"),$("#dtMotivoBajaTurnAndExcept").show(),$("#ddMotivoBajaTurnAndExcept").show(),$("#ddMotivoBajaTurnAndExcept").html(fechaConvertirAFormato(a.motivo_baja,"-")+"&nbsp;")):($("#dtFechaBajaTurnAndExcept").hide(),$("#ddFechaBajaTurnAndExcept").hide(),$("#dtMotivoBajaTurnAndExcept").hide(),$("#ddMotivoBajaTurnAndExcept").hide()),$("#ddNombresTurnAndExcept").html(a.nombres);var s=obtenerRutaFoto(a.ci,a.num_complemento);$("#imgFotoPerfilTurnAndExceptRelaboral").attr("src",s),$("#imgFotoPerfilContactoPerTurnAndExcept").attr("src",s),$("#imgFotoPerfilContactoInstTurnAndExcept").attr("src",s),$("#imgFotoPerfilTurnAndExcept").attr("src",s),cargarPersonasContactosControlExcepciones(2,a.id_persona)}else{var c="Debe seleccionar un registro necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(c),$("#divMsjeNotificacionError").jqxNotification("open")}})},columns:[{text:"Nro.",sortable:!1,filterable:!1,editable:!1,groupable:!1,draggable:!1,resizable:!1,columntype:"number",width:50,cellsalign:"center",align:"center",pinned:!0,cellsrenderer:rownumberrenderer},{text:"Nombres y Apellidos",columntype:"textbox",filtertype:"input",datafield:"nombres",width:215,align:"center",pinned:!0,hidden:!1},{text:"CI",columntype:"textbox",filtertype:"input",datafield:"ci",width:90,cellsalign:"center",align:"center",pinned:!0,hidden:!1},{text:"Exp",filtertype:"checkedlist",datafield:"expd",filteritems:a,pinned:!0,width:40,cellsalign:"center",align:"center",pinned:!0,hidden:!1},{text:"Estado",filtertype:"checkedlist",datafield:"estado_descripcion",filteritems:["ACTIVO","PASIVO"],width:100,cellsalign:"center",align:"center",hidden:!1,cellclassname:cellclass},{text:"Ubicaci&oacute;n",filtertype:"checkedlist",filteritems:o,datafield:"ubicacion",width:150,cellsalign:"center",align:"center",hidden:!1},{text:"Condici&oacute;n",columntype:"textbox",filtertype:"checkedlist",datafield:"condicion",filteritems:i,width:150,cellsalign:"center",align:"center",hidden:!1},{text:"Gerencia",filtertype:"checkedlist",datafield:"gerencia_administrativa",filteritems:t,width:220,align:"center",hidden:!1},{text:"Departamento",filtertype:"checkedlist",datafield:"departamento_administrativo",filteritems:n,width:220,align:"center",hidden:!1},{text:"&Aacute;rea",columntype:"textbox",filtertype:"input",datafield:"area",width:220,align:"center",hidden:!1},{text:"Proceso",columntype:"textbox",filtertype:"input",datafield:"proceso_codigo",width:220,cellsalign:"center",align:"center",hidden:!1},{text:"Fuente",columntype:"textbox",filtertype:"input",datafield:"fin_partida",width:220,cellsalign:"center",align:"center",hidden:!1},{text:"Nivel Salarial",columntype:"textbox",filtertype:"input",datafield:"nivelsalarial",width:220,align:"center",hidden:!1},{text:"Cargo",columntype:"textbox",filtertype:"input",datafield:"cargo",width:215,align:"center",hidden:!1},{text:"Haber",filtertype:"checkedlist",filteritems:r,datafield:"sueldo",width:100,cellsalign:"right",align:"center",columngroup:"datosContrato",hidden:!1},{text:"Fecha Ingreso",datafield:"fecha_ing",filtertype:"range",width:100,cellsalign:"center",cellsformat:"dd-MM-yyyy",align:"center",hidden:!1},{text:"Fecha Inicio",datafield:"fecha_ini",filtertype:"range",width:100,cellsalign:"center",cellsformat:"dd-MM-yyyy",align:"center",hidden:!1},{text:"Fecha Incor.",datafield:"fecha_incor",filtertype:"range",width:100,cellsalign:"center",cellsformat:"dd-MM-yyyy",align:"center",hidden:!1},{text:"Fecha Fin",datafield:"fecha_fin",filtertype:"range",width:100,cellsalign:"center",cellsformat:"dd-MM-yyyy",align:"center",hidden:!1},{text:"Fecha Baja",datafield:"fecha_baja",filtertype:"range",width:100,cellsalign:"center",cellsformat:"dd-MM-yyyy",align:"center",hidden:!1},{text:"Motivo Baja",datafield:"motivo_baja",width:100,hidden:!1},{text:"Observacion",datafield:"observacion",width:100,hidden:!1}]});$("#jqxlistbox").jqxListBox({source:[{label:"Nombres y Apellidos",value:"nombres",checked:!0},{label:"CI",value:"ci",checked:!0},{label:"Exp",value:"expd",checked:!0},{label:"Ubicaci&oacute;n",value:"ubicacion",checked:!0},{label:"Condici&oacute;n",value:"condicion",checked:!0},{label:"Estado",value:"estado_descripcion",checked:!0},{label:"Gerencia",value:"gerencia_administrativa",checked:!0},{label:"Departamento",value:"departamento_administrativo",checked:!0},{label:"&Aacute;rea",value:"area",checked:!0},{label:"proceso",value:"proceso_codigo",checked:!0},{label:"Fuente",value:"fin_partida",checked:!0},{label:"Nivel Salarial",value:"nivelsalarial",checked:!0},{label:"Cargo",value:"cargo",checked:!0},{label:"Haber",value:"sueldo",checked:!0},{label:"Fecha Ingreso",value:"fecha_ing",checked:!0},{label:"Fecha Inicio",value:"fecha_ini",checked:!0},{label:"Fecha Incor.",value:"fecha_incor",checked:!0},{label:"Fecha Fin",value:"fecha_fin",checked:!0},{label:"Fecha Baja",value:"fecha_baja",checked:!0},{label:"Motivo Baja",value:"motivo_baja",checked:!0},{label:"Observacion",value:"observacion",checked:!0}],width:"100%",height:590,checkboxes:!0}),$("#jqxlistbox").on("checkChange",function(e){$("#divGridRelaborales").jqxGrid("beginupdate"),e.args.checked?$("#divGridRelaborales").jqxGrid("showcolumn",e.args.value):$("#divGridRelaborales").jqxGrid("hidecolumn",e.args.value),$("#divGridRelaborales").jqxGrid("endupdate")})}()}$().ready(function(){$("#divTabControlExcepciones").jqxTabs("theme","oasis"),$("#divTabControlExcepciones").jqxTabs("enableAt",1),$("#divTabControlExcepciones").jqxTabs("disableAt",1),$("#divTabControlExcepciones").jqxTabs("disableAt",2),$("#divTabControlExcepciones").jqxTabs("disableAt",3),$("#divTabControlExcepciones").jqxTabs("disableAt",4),$("#divTabControlExcepciones").jqxTabs("disableAt",5),cargarGestionesRelaborales((new Date).getFullYear()),definirGrillaParaListaRelaboralesParaControlExcepciones($("#lstGestion").val()),$("#lstGestion").on("change",function(){definirGrillaParaListaRelaboralesParaControlExcepciones($("#lstGestion").val())}),$("#btnGuardarControlExcepcionNew").on("click",function(){if(validaFormularioControlExcepciones(1)&&""!=$("#txtFechaIniNew").val()&&""!=$("#txtFechaFinNew").val()){var e=cantidadDias($("#txtFechaIniNew").val(),$("#txtFechaFinNew").val());if(30<e)bootbox.confirm("Ha solicitado "+e+" d&iacute;as. ¿Est&aacute; seguro de estos datos?",function(e){e&&(guardaControlExcepciones(1)&&($("#divTabControlExcepciones").jqxTabs("enableAt",0),$("#divTabControlExcepciones").jqxTabs("enableAt",1),$("#divTabControlExcepciones").jqxTabs("disableAt",2),$("#divTabControlExcepciones").jqxTabs("disableAt",3),$("#divTabControlExcepciones").jqxTabs("disableAt",4),$("#divTabControlExcepciones").jqxTabs({selectedItem:1}),$("#msjs-alert").hide()))});else guardaControlExcepciones(1)&&($("#divTabControlExcepciones").jqxTabs("enableAt",0),$("#divTabControlExcepciones").jqxTabs("enableAt",1),$("#divTabControlExcepciones").jqxTabs("disableAt",2),$("#divTabControlExcepciones").jqxTabs("disableAt",3),$("#divTabControlExcepciones").jqxTabs("disableAt",4),$("#divTabControlExcepciones").jqxTabs({selectedItem:1}),$("#msjs-alert").hide())}}),$("#btnGuardarControlExcepcionEdit").on("click",function(){if(validaFormularioControlExcepciones(2)&&""!=$("#txtFechaIniEdit").val()&&""!=$("#txtFechaFinEdit").val()){var e=cantidadDias($("#txtFechaIniEdit").val(),$("#txtFechaFinEdit").val());if(30<e)bootbox.confirm("Ha solicitado "+e+" d&iacute;as. ¿Est&aacute; seguro de estos datos?",function(e){e&&(guardaControlExcepciones(2)&&($("#divTabControlExcepciones").jqxTabs("enableAt",0),$("#divTabControlExcepciones").jqxTabs("enableAt",1),$("#divTabControlExcepciones").jqxTabs("disableAt",2),$("#divTabControlExcepciones").jqxTabs("disableAt",3),$("#divTabControlExcepciones").jqxTabs("disableAt",4),$("#divTabControlExcepciones").jqxTabs({selectedItem:1}),$("#msjs-alert").hide()))});else guardaControlExcepciones(2)&&($("#divTabControlExcepciones").jqxTabs("enableAt",0),$("#divTabControlExcepciones").jqxTabs("enableAt",1),$("#divTabControlExcepciones").jqxTabs("disableAt",2),$("#divTabControlExcepciones").jqxTabs("disableAt",3),$("#divTabControlExcepciones").jqxTabs("disableAt",4),$("#divTabControlExcepciones").jqxTabs({selectedItem:1}),$("#msjs-alert").hide())}}),$("#btnBuscarControlExcepcionesPorRagno").on("click",function(){if(""!=$("#txtFechaIniCount").val()&&""!=$("#txtFechaFinCount").val()){var e=$("#txtFechaIniCount").val(),a=$("#txtFechaFinCount").val();$("#divControlExcepcionCount").jqxGrid("clear"),definirGrillaParaListaCuantificadoraControlExcepcionesGeneralPorRango(e,a)}else $("#divMsjePorWarning").html(""),$("#divMsjePorWarning").append("Debe definir la fecha de inicio y finalizaci&oacute;n de la consulta necesariamente."),$("#divMsjeNotificacionWarning").jqxNotification("open")}),$(".iExcepcion").on("click",function(){0<("iExcepcionNew"==this.id?$("#lstExcepcionNew").val():$("#lstExcepcionEdit").val())?$("#divModalDetalleExcepcion").modal("show"):alert("Debe seleccionar un tipo de Excepción o Salida inicialmente")}),$("#btnCancelarNew").click(function(){$("#divTabControlExcepciones").jqxTabs("enableAt",0),$("#divTabControlExcepciones").jqxTabs("disableAt",1),$("#divTabControlExcepciones").jqxTabs("disableAt",2),$("#divTabControlExcepciones").jqxTabs("disableAt",3),$("#divTabControlExcepciones").jqxTabs("disableAt",4),$("#msjs-alert").hide()}),$("#btnCancelarEdit").click(function(){$("#divTabControlExcepciones").jqxTabs("enableAt",0),$("#divTabControlExcepciones").jqxTabs("disableAt",1),$("#divTabControlExcepciones").jqxTabs("disableAt",2),$("#divTabControlExcepciones").jqxTabs("disableAt",3),$("#divTabControlExcepciones").jqxTabs("disableAt",4),$("#msjs-alert").hide()}),$("#btnCancelarBaja").click(function(){$("#divTabControlExcepciones").jqxTabs("enableAt",0),$("#divTabControlExcepciones").jqxTabs("disableAt",1),$("#divTabControlExcepciones").jqxTabs("disableAt",2),$("#divTabControlExcepciones").jqxTabs("disableAt",3),$("#divTabControlExcepciones").jqxTabs("disableAt",4),$("#msjs-alert").hide(),deshabilitarCamposParaBajaRegistroDeRelacionLaboral()}),$("#btnCancelarControlExcepcionNew,#btnCancelarControlExcepcionEdit").click(function(){$("#divTabControlExcepciones").jqxTabs("enableAt",0),$("#divTabControlExcepciones").jqxTabs("enableAt",1),$("#divTabControlExcepciones").jqxTabs("disableAt",2),$("#divTabControlExcepciones").jqxTabs("disableAt",3),$("#divTabControlExcepciones").jqxTabs("disableAt",4),$("#divTabControlExcepciones").jqxTabs({selectedItem:1}),$("#msjs-alert").hide()}),$("#btnVolverDesdeExcept").click(function(){$("#divTabControlExcepciones").jqxTabs("enableAt",0),$("#divTabControlExcepciones").jqxTabs("disableAt",1),$("#divTabControlExcepciones").jqxTabs("disableAt",2),$("#divTabControlExcepciones").jqxTabs("disableAt",3),$("#divTabControlExcepciones").jqxTabs("disableAt",4),$("#msjs-alert").hide()}),$("#btnExportarExcel").click(function(){var e=$("#jqxlistbox").jqxListBox("getCheckedItems"),t=0;$.each(e,function(e,a){t++}),0<t?exportarReporte(1):(alert("Debe seleccionar al menos una columna para la obtención del reporte solicitado."),$("#jqxlistbox").focus())}),$("#btnExportarExcelCount").click(function(){var e=$("#divControlExceptionListBox").jqxListBox("getCheckedItems"),t=0;$.each(e,function(e,a){t++});var a=$("#lstGestionCount").val(),i=$("#lstMesCount").val();0<t?exportarReporteExcepcionesCount(1,a,i):(alert("Debe seleccionar al menos una columna para la obtención del reporte solicitado."),$("#divControlExceptionListBox").focus())}),$("#btnExportarPDF").click(function(){var e=$("#jqxlistbox").jqxListBox("getCheckedItems"),t=0;$.each(e,function(e,a){t++}),0<t?exportarReporte(2):(alert("Debe seleccionar al menos una columna para la obtención del reporte solicitado."),$("#jqxlistbox").focus())}),$("#btnExportarPDFCount").click(function(){var e=$("#divControlExceptionListBox").jqxListBox("getCheckedItems"),t=0;$.each(e,function(e,a){t++});var a=$("#lstGestionCount").val(),i=$("#lstMesCount").val();0<t?exportarReporteExcepcionesCount(2,a,i):(alert("Debe seleccionar al menos una columna para la obtención del reporte solicitado."),$("#divControlExceptionListBox").focus())}),$("#chkAllCols").click(function(){1==this.checked?$("#jqxlistbox").jqxListBox("checkAll"):$("#jqxlistbox").jqxListBox("uncheckAll")}),$("#btnImprimirCalendarioLaboralAndExcept").on("click",function(){$("#page-content").printArea({mode:"popup",popClose:!1})}),$("#btnImprimirCalendarioDetalle").on("click",function(){$("#divCalendarioDetalles").printArea({mode:"popup",popClose:!1})}),$("#lstMotivosBajas").change(function(){var e=this.value.split("_");$("#hdnFechaRenBaja").val(e[0]),$("#hdnFechaAceptaRenBaja").val(e[1]),$("#hdnFechaAgraServBaja").val(e[2]),0<e[0]?defineFechasBajas(e[1],e[2],e[3]):$("#divFechasBaja").hide()}),$("#chkAi").on("click",function(){var e=$("#txtCargoMovilidad").val();("object"==jQuery.type(e)&&(e=String(e.label)),null!=(e+="")&&""!=e)&&(1==this.checked?e.indexOf("a.i.")<0&&(e+=" a.i.",$("#txtCargoMovilidad").val(e)):0<e.indexOf("a.i.")&&(e=e.replace("a.i.","").trim(),$("#txtCargoMovilidad").val(e)))}),$("#liList,#btnVolverAlListadoPrincipalDesdeNew,#btnVolverAlListadoPrincipalDesdeEdit").click(function(){$("#divTabControlExcepciones").jqxTabs("enableAt",0),$("#divTabControlExcepciones").jqxTabs({selectedItem:0}),$("#divTabControlExcepciones").jqxTabs("disableAt",1),$("#divTabControlExcepciones").jqxTabs("disableAt",2),$("#divTabControlExcepciones").jqxTabs("disableAt",3),$("#divTabControlExcepciones").jqxTabs("disableAt",4),$("#divTabControlExcepciones").jqxTabs("disableAt",5),$("#msjs-alert").hide()}),$("#liExcept").click(function(){$("#divTabControlExcepciones").jqxTabs("enableAt",0),$("#divTabControlExcepciones").jqxTabs("enableAt",1),$("#divTabControlExcepciones").jqxTabs({selectedItem:1}),$("#divTabControlExcepciones").jqxTabs("disableAt",2),$("#divTabControlExcepciones").jqxTabs("disableAt",3),$("#divTabControlExcepciones").jqxTabs("disableAt",4),$("#divTabControlExcepciones").jqxTabs("disableAt",5),$("#msjs-alert").hide()}),$(".numeral").keyup(function(e){""!=$(this).val()&&$(this).val($(this).val().replace(/[^0-9]/g,""))}),$(".literal").keyup(function(e){""!=$(this).val()&&$(this).val($(this).val().replace(/[^A-Z,a-z,ñ,Ñ, ]/g,""))}),$("#divMsjeNotificacionError").jqxNotification({width:"100%",position:"bottom-right",opacity:.9,autoOpen:!1,animationOpenDelay:800,autoClose:!0,autoCloseDelay:7e3,template:"error"}),$("#divMsjeNotificacionWarning").jqxNotification({width:"100%",position:"bottom-right",opacity:.9,autoOpen:!1,animationOpenDelay:800,autoClose:!0,autoCloseDelay:7e3,template:"warning"}),$("#divMsjeNotificacionSuccess").jqxNotification({width:"100%",position:"bottom-right",opacity:.9,autoOpen:!1,animationOpenDelay:800,autoClose:!0,autoCloseDelay:7e3,template:"success"}),$(document).keypress(OperaEvento),$(document).keyup(OperaEvento)});var rownumberrenderer=function(e,a,t,i,n,o){return"<div align='center'>"+(e+1)+"</div>"};function OperaEvento(e){"keyup"!=e.type&&"keydown"!=e.type||"27"!=e.which||($("#tabControlExcepciones").jqxTabs("enableAt",0),$("#tabControlExcepciones").jqxTabs("disableAt",1),$("#tabControlExcepciones").jqxTabs("disableAt",2),$("#tabControlExcepciones").jqxTabs("disableAt",3),$("#tabControlExcepciones").jqxTabs("disableAt",4),$("#tabControlExcepciones").jqxTabs("disableAt",5),$("#tabControlExcepciones").jqxTabs({selectedItem:0}),$("#popupWindowCargo").jqxWindow("close"),$("#popupWindowNuevaMovilidad").jqxWindow("close"),$("#lstTipoMemorandum").off(),$("#divGridRelaborales").jqxGrid("focus"))}function procesaTextoAFecha(e,a){var t=e.split(a);return(e=new Date(t[1]+"/"+t[0]+"/"+t[2])).getTime()}function obtenerRutaFoto(e,a){var t="/images/perfil-profesional.jpg";return""!=e&&$.ajax({url:"/relaborales/obtenerrutafoto/",type:"POST",datatype:"json",async:!1,cache:!1,data:{ci:e,num_complemento:a},success:function(e){var a=jQuery.parseJSON(e);1==a.result&&(t=a.ruta)},error:function(){alert("Se ha producido un error Inesperado")}}),t}function fechaHoy(e,a){""==e&&(e="-");var t=new Date,i=t.getDate().toString(),n=(t.getMonth()+1).toString(),o=1===i.length?"0"+i:i,r=1===n.length?"0"+n:n;if("dd-mm-yyyy"==a)var c=o+e+r+e+t.getFullYear();else if("mm-dd-yyyy"==a)c=r+e+o+e+t.getFullYear();else c=t;return c}var cellclass=function(e,a,t){return"ACTIVO"==t?"verde":"EN PROCESO"==t?"amarillo":"PASIVO"==t?"rojo":""};function obtenerTodosHorariosRegistradosEnCalendarioRelaboralParaVerAsignaciones(e,a,t,E,i,n,o){var j=[],r=new Date,C=(r.getDate(),r.getMonth(),r.getFullYear(),!0);switch(t){case 1:case 2:C=!0}return $.ajax({url:"/calendariolaboral/listallregisteredbyrelaboralmixto",type:"POST",datatype:"json",async:!1,cache:!1,data:{id:e,id_perfillaboral:a,fecha_ini:i,fecha_fin:n},success:function(e){var a=jQuery.parseJSON(e);0<a.length&&$.each(a,function(e,a){var t=0,i="00:00:00",n="24:00:00",o="#000000",r="DESCANSO",c=(a.perfil_laboral,a.perfil_laboral_grupo);null!=a.id_horariolaboral?(t=a.id_horariolaboral,r=a.horario_nombre,i=a.hora_entrada.split(":"),n=a.hora_salida.split(":"),o=a.color):(i=i.split(":"),n=n.split(":"));var l=a.calendario_fecha_ini.split("-"),s=l[0],d=l[1]-1,p=l[2],b=i[0],u=i[1],h=(i[2],a.calendario_fecha_fin.split("-")),m=h[0],x=h[1]-1,f=h[2],$=n[0],v=n[1],g=(n[2],"r_");0==t&&(g="d_");var T=o;E||(T="#000000",g="b_"),j.push({id:a.id_calendariolaboral,className:g+t,title:r,start:new Date(s,d,p,b,u),end:new Date(m,x,f,$,v),allDay:C,color:o,editable:E,borderColor:T,horas_laborales:a.horas_laborales,dias_laborales:a.dias_laborales,hora_entrada:a.hora_entrada,hora_salida:a.hora_salida})})}}),j}function ImageExist(e){var a=new Image;return a.src=e,0!=a.height}function fechaConvertirAFormato(e,a){""!=a&&null!=a||(a="-");var t=e,i=t.getDate(),n=t.getMonth(),o="",r="";return i<10&&(o="0"),(n+=1)<10&&(r="0"),o+i+a+r+n+a+t.getFullYear()}function iniciarCalendarioLaboralPorRelaboralTurnosAndExcepcionesParaVerAsignaciones(b,u,e,h,m,a,t,i,n){m=parseInt(m);var x=[],f=7,o=($(".calendar-events"),"prev,next"),r="year,month,agendaWeek,agendaDay",c=!0,l=!0,s=!0,d=!0;switch(e){case 1:case 2:case 3:switch(m){case 1:case 2:break;case 3:o="",r="year"}break;case 4:break;case 5:s=l=c=!1}switch(m){case 1:case 2:d=!1,!(f=5)}return $("#calendar").fullCalendar({header:{left:o,center:"title",right:r},year:t,month:i,date:n,firstDay:1,weekends:d,editable:c,droppable:l,selectable:s,weekNumbers:!0,weekNumberTitle:"#S",timeFormat:"H(:mm)",drop:function(e,a){var t=$(this).data("eventObject"),i=$.extend({},t);i.start=e,$("#calendar").fullCalendar("renderEvent",i,!0),sumarTotalHorasPorSemana(x)},eventDrop:function(e,a,t,i,n){sumarTotalHorasPorSemana(x)},events:a,eventClick:function(n,e,a){var o=n.className+"",t=o.split("_"),i=t[1];o=t[0];var r=0;null!=n.id&&(r=n.id);var c=fechaConvertirAFormato(n.start,"-"),l=c,s=n.start;null!=n.end&&""!=n.end&&(l=fechaConvertirAFormato(n.end,"-"),s=n.end);var d=n.start,p=s,b=s;($("#txtHorarioFechaIni").datepicker("setDate",n.start),$("#txtHorarioFechaFin").datepicker("setDate",s),$("#txtHorarioFechaIni").datepicker({format:"dd-mm-yyyy",default:n.start,weekStart:1,startDate:d,endDate:p,autoclose:!0}).on("changeDate",function(e){(d=new Date(e.date.valueOf())).setDate(d.getDate(new Date(e.date.valueOf()))),$("#txtHorarioFechaFin").datepicker("setStartDate",d)}),$("#txtHorarioFechaFin").datepicker({default:s,weekStart:1,startDate:d,endDate:b,autoclose:!0}).on("changeDate",function(e){(p=new Date(e.date.valueOf())).setDate(p.getDate(new Date(e.date.valueOf()))),$("#txtHorarioFechaIni").datepicker("setEndDate",p)}),0<i)?cargarModalHorario(i)?("b"==o?($("#btnDescartarHorario").hide(),$("#btnGuardarModificacionHorario").hide(),$("#txtHorarioFechaIni").prop("disabled","disabled"),$("#txtHorarioFechaFin").prop("disabled","disabled")):($("#btnDescartarHorario").show(),$("#txtHorarioFechaIni").prop("disabled",!1),$("#txtHorarioFechaFin").prop("disabled",!1)),$("#popupDescripcionHorario").modal("show"),$("#btnDescartarHorario").off(),$("#btnDescartarHorario").on("click",function(){switch(o){case"r":case"d":bajaTurnoEnCalendario(r)&&($("#calendar").fullCalendar("removeEvents",n._id),$("#popupDescripcionHorario").modal("hide"));break;case"n":$("#calendar").fullCalendar("removeEvents",n._id),$("#popupDescripcionHorario").modal("hide")}sumarTotalHorasPorSemana(x)}),$("#btnGuardarModificacionHorario").off(),$("#btnGuardarModificacionHorario").on("click",function(){switch(o){case"r":case"n":if(c!=$("#txtHorarioFechaIni").val()||l!=$("#txtHorarioFechaFin").val()){$("#calendar").fullCalendar("removeEvents",n._id),$("#popupDescripcionHorario").modal("hide");var e=$("#txtHorarioFechaIni").val(),a=$("#txtHorarioFechaFin").val(),t=e.split("-"),i=a.split("-");e=t[2]+"-"+t[1]+"-"+t[0],a=i[2]+"-"+i[1]+"-"+i[0],addEvent={id:n.id,title:n.title,className:n.className,start:e,end:a,color:n.color,editable:!0,hora_entrada:n.hora_entrada,hora_salida:n.hora_salida},$("#calendar").fullCalendar("renderEvent",addEvent,!0)}$("#popupDescripcionHorario").modal("hide")}sumarTotalHorasPorSemana(x)})):alert("Error al determinar los datos del horario."):alert("El registro corresponde a un periodo de salida o excepción.")},eventResize:function(e,a,t){sumarTotalHorasPorSemana(x)},viewRender:function(e){switch(e.name){case"month":removerColumnaSumaTotales(),agregarColumnaSumaTotales(f);var o="",r="";x=[];var c=0,l=0,a=["mon","tue","wed","thu","fri","sat","sun"];$.each(a,function(e,a){l=0,$("td.fc-"+a).map(function(e,a){l++;var t=$(this).data("date"),i=$(this).data("date");if(null!=t){var n=t.split("-");switch(t=n[2]+"-"+n[1]+"-"+n[0],c=n[0],l){case 1:""==o&&(o=t),x.push({semana:1,fecha:t});break;case 2:x.push({semana:2,fecha:t});break;case 3:x.push({semana:3,fecha:t});break;case 4:x.push({semana:4,fecha:t});break;case 5:x.push({semana:5,fecha:t});break;case 6:r=t,x.push({semana:6,fecha:t})}i<$.fullCalendar.formatDate(new Date,"yyyy-MM-dd")&&$(this).css("background-color","#efefef")}})});var t="",i="",n=(t=fechaConvertirAFormato($("#calendar").fullCalendar("getDate"),"-")).split("-");i=obtenerUltimoDiaMes(t="01-"+n[1]+"-"+n[2]),$("#hdnFechaInicialCalendario").val(t),$("#hdnFechaFinalCalendario").val(i),cargarGrillaAsignacionIndividualFechasUbicacionEstacion(h,u,o,r);var s=obtenerListadoExcepcionesParaCalendario(b,e.name,f,o,r);$("#calendar").fullCalendar("removeEvents");var d=obtenerTodosHorariosRegistradosEnCalendarioRelaboralParaVerAsignaciones(u,0,m,!1,o,r,0);$("#calendar").fullCalendar("addEventSource",d),$("#calendar").fullCalendar("addEventSource",s);var p=obtenerFeriadosRangoFechas(0,0,c,o,r);$.each(a,function(e,a){l=0,$("td.fc-"+a).map(function(e,a){l++;$(this).data("date");var t=$(this).data("date"),i="",n="",o=$(this);$.each(p,function(e,a){i=a.fecha_ini,n=a.fecha_fin;if(t<=n&&i<=t){$(".fc-day-content");o.append("<h6><b>(f) "+a.feriado+"</b></h6>"),o.css("background-color","orange")}})})}),sumarTotalHorasPorSemana(x);break;case"agendaWeek":i=obtenerFechaMasDias(t=fechaConvertirAFormato(t=$("#calendar").fullCalendar("getView").start,"-"),f-1),$("#hdnFechaInicialCalendario").val(t),$("#hdnFechaFinalCalendario").val(i),cargarGrillaAsignacionIndividualFechasUbicacionEstacion(h,u,t,i);break;case"agendaDay":i=t=fechaConvertirAFormato($("#calendar").fullCalendar("getDate"),"-"),$("#hdnFechaInicialCalendario").val(t),$("#hdnFechaFinalCalendario").val(i),cargarGrillaAsignacionIndividualFechasUbicacionEstacion(h,u,t,i)}}}),x}function sumarTotalHorasPorSemana(a){var e=$("#calendar").fullCalendar("clientEvents"),r=0,c=0,l=0,s=0,d=0,p=0;$("#spSumaSemana1").html(0),$("#spSumaSemana2").html(0),$("#spSumaSemana3").html(0),$("#spSumaSemana4").html(0),$("#spSumaSemana5").html(0),$("#spSumaSemana6").html(0),$("#tdSumaSemana1").css("background-color","white"),$("#tdSumaSemana2").css("background-color","white"),$("#tdSumaSemana3").css("background-color","white"),$("#tdSumaSemana4").css("background-color","white"),$("#tdSumaSemana5").css("background-color","white"),$("#tdSumaSemana6").css("background-color","white"),$.each(e,function(e,t){var i=$.fullCalendar.formatDate(t.start,"dd-MM-yyyy"),n=$.fullCalendar.formatDate(t.end,"dd-MM-yyyy");""==n&&(n=i);var o="-";$.each(a,function(e,a){1==a.semana&&procesaTextoAFecha(i,o)<=procesaTextoAFecha(a.fecha,o)&&procesaTextoAFecha(a.fecha,o)<=procesaTextoAFecha(n,o)&&(r+=parseFloat(t.horas_laborales)),2==a.semana&&procesaTextoAFecha(i,o)<=procesaTextoAFecha(a.fecha,o)&&procesaTextoAFecha(a.fecha,o)<=procesaTextoAFecha(n,o)&&(c+=parseFloat(t.horas_laborales)),3==a.semana&&procesaTextoAFecha(i,o)<=procesaTextoAFecha(a.fecha,o)&&procesaTextoAFecha(a.fecha,o)<=procesaTextoAFecha(n,o)&&(l+=parseFloat(t.horas_laborales)),4==a.semana&&procesaTextoAFecha(i,o)<=procesaTextoAFecha(a.fecha,o)&&procesaTextoAFecha(a.fecha,o)<=procesaTextoAFecha(n,o)&&(s+=parseFloat(t.horas_laborales)),5==a.semana&&procesaTextoAFecha(i,o)<=procesaTextoAFecha(a.fecha,o)&&procesaTextoAFecha(a.fecha,o)<=procesaTextoAFecha(n,o)&&(d+=parseFloat(t.horas_laborales)),6==a.semana&&procesaTextoAFecha(i,o)<=procesaTextoAFecha(a.fecha,o)&&procesaTextoAFecha(a.fecha,o)<=procesaTextoAFecha(n,o)&&(p+=parseFloat(t.horas_laborales))})}),$("#spSumaSemana1").html(r.toFixed(2)),$("#spSumaSemana2").html(c.toFixed(2)),$("#spSumaSemana3").html(l.toFixed(2)),$("#spSumaSemana4").html(s.toFixed(2)),$("#spSumaSemana5").html(d.toFixed(2)),$("#spSumaSemana6").html(p.toFixed(2));var t=(c+l+s)/3;$("#spSumaPromedioTresSemanas").html(t.toFixed(2));48<r?$("#tdSumaSemana1").css("background-color","#FF4000"):$("#tdSumaSemana1").css("background-color","white"),48<c?$("#tdSumaSemana2").css("background-color","#FF4000"):$("#tdSumaSemana2").css("background-color","#efefef"),48<l?$("#tdSumaSemana3").css("background-color","#FF4000"):$("#tdSumaSemana3").css("background-color","#efefef"),48<s?$("#tdSumaSemana4").css("background-color","#FF4000"):$("#tdSumaSemana4").css("background-color","#efefef"),48<d?$("#tdSumaSemana5").css("background-color","#FF4000"):$("#tdSumaSemana5").css("background-color","white"),48<p?$("#tdSumaSemana6").css("background-color","#FF4000"):$("#tdSumaSemana6").css("background-color","white"),48<t?$("#tdSumaPromedioTresSemanas").css("background-color","red"):$("#tdSumaPromedioTresSemanas").css("background-color","white")}function agregarColumnaSumaTotales(e){$(".fc-border-separate tr:first").append("<th style='width: 87px;' id='thColumnaTotales' class='thColumnaTotales'> Hrs Semana </th>");var t=0;$(".fc-border-separate tr.fc-week").each(function(e,a){t++,$(this).append("<td id='tdSumaSemana"+t+"' class='tdSumaSemana fc-last'><div style='min-height: 67px;align-content: center;'><div id='divSumaSemana"+t+"' class='fc-day-suma-horas-semana'><span id='spSumaSemana"+t+"' class='spSumaSemana'>100</span></div></div></td>")});var a=e+1;$(".fc-border-separate tr:last").after("<tr id=''><td style='text-align: right;' colspan='"+a+"' class=''><b>Promedio semanal de horas (3 Semanas marcadas):</b></td><td id='tdSumaPromedioTresSemanas' class='tdSumaPromedioTresSemanas fc-first fc-day fc-last'><div style='min-height: 67px;align-content: center;'><div id='divSumaPromedioTresSemanas' class='fc-suma-promedio-horas-3-semanas'><span id='spSumaPromedioTresSemanas'>0</span></div></div></td></tr>")}function removerColumnaSumaTotales(){$("#thColumnaTotales").remove(),$("#tdSumaSemana1").remove(),$("#tdSumaSemana2").remove(),$("#tdSumaSemana3").remove(),$("#tdSumaSemana4").remove(),$("#tdSumaSemana5").remove(),$("#tdSumaSemana6").remove(),$("#trSumaPromedioTresSemanas").remove()}function numeroHoras(e){if(""==e)return 0;var a=e.split(":"),t=parseFloat(a[0]),i=parseFloat(a[1]),n=parseFloat(a[2]),o=0,r=0;return 0<n&&(o=n/60),0<(i+=o)&&(r=i/60),t+=r}function cargarGrillaAsignacionIndividualFechasUbicacionEstacion(e,a,t,i){var n,o={datatype:"json",datafields:[{name:"nro_row",type:"integer"},{name:"perfil_laboral",type:"string"},{name:"perfil_laboral_grupo",type:"string"},{name:"calendario_fecha_ini",type:"date"},{name:"calendario_fecha_fin",type:"date"},{name:"horario_nombre",type:"string"},{name:"relaboralperfilmaquina_ubicacion_entrada",type:"string"},{name:"relaboralperfilmaquina_estacion_entrada",type:"string"},{name:"relaboralperfilmaquina_ubicacion_salida",type:"string"},{name:"relaboralperfilmaquina_estacion_salida",type:"string"},{name:"relaboralperfilmaquina_tipo_marcacion_entrada_descripcion",type:"string"},{name:"relaboralperfilmaquina_tipo_marcacion_salida_descripcion",type:"string"},{name:"relaboralperfil_observacion",type:"string"}],url:"/calendariolaboral/getlistallregisteredbyrelaboral?id="+a+"&fecha_ini="+t+"&fecha_fin="+i,cache:!1},r=new $.jqx.dataAdapter(o);n=prepareSimulator("grid"),$("#divGridCalendario").jqxGrid({theme:n,width:"100%",height:"530px",source:r,sortable:!0,altRows:!0,columnsresize:!0,pageable:!0,pagerMode:"advanced",showfilterrow:!0,filterable:!0,autorowheight:!0,columns:[{text:"Nro.",filterable:!1,columntype:"number",width:40,cellsalign:"center",align:"center",cellsrenderer:rownumberrenderer},{text:"Perfil",filtertype:"checkedlist",datafield:"perfil_laboral",width:100,align:"center",hidden:!1},{text:"Grupo",filtertype:"checkedlist",datafield:"perfil_laboral_grupo",width:100,align:"center",hidden:!1},{text:"Fecha Inicio",datafield:"calendario_fecha_ini",filtertype:"range",width:80,cellsalign:"center",cellsformat:"dd-MM-yyyy",align:"center",hidden:!1},{text:"Fecha Fin",datafield:"calendario_fecha_fin",filtertype:"range",width:80,cellsalign:"center",cellsformat:"dd-MM-yyyy",align:"center",hidden:!1},{text:"Horario",filtertype:"checkedlist",datafield:"horario_nombre",width:100,align:"center",hidden:!1},{text:"Ubicaci&oacute;n Entrada",filtertype:"checkedlist",datafield:"relaboralperfilmaquina_ubicacion_entrada",width:130,align:"center",hidden:!1},{text:"Estaci&oacute;n Entrada",filtertype:"checkedlist",datafield:"relaboralperfilmaquina_estacion_entrada",width:100,align:"center",hidden:!1},{text:"Tipo Entrada",filtertype:"checkedlist",datafield:"relaboralperfilmaquina_tipo_marcacion_entrada_descripcion",width:190,align:"center",hidden:!1},{text:"Ubicaci&oacute;n Salida",filtertype:"checkedlist",datafield:"relaboralperfilmaquina_ubicacion_salida",width:100,align:"center",hidden:!1},{text:"Estaci&oacute;n Salida",filtertype:"checkedlist",datafield:"relaboralperfilmaquina_estacion_salida",width:100,align:"center",hidden:!1},{text:"Tipo Salida",filtertype:"checkedlist",datafield:"relaboralperfilmaquina_tipo_marcacion_salida_descripcion",width:190,align:"center",hidden:!1},{text:"Observaci&oacute;n",filtertype:"checkedlist",datafield:"relaboralperfil_observacion",width:130,align:"center",hidden:!1}]})}function obtenerUltimoDiaMes(e){return e=$.ajax({url:"/perfileslaborales/getultimafechames/",type:"POST",datatype:"json",async:!1,cache:!1,data:{fecha:e},success:function(e){}}).responseText}function obtenerFechaMasDias(e,a){return e=$.ajax({url:"/perfileslaborales/getfechamasdias/",type:"POST",datatype:"json",async:!1,cache:!1,data:{fecha:e,dias:a},success:function(e){}}).responseText}function obtenerFeriadosRangoFechas(e,a,t,i,n){var o=[];return 0<t&&""!=i&&""!=n&&$.ajax({url:"/feriados/listrange",type:"POST",datatype:"json",async:!1,cache:!1,data:{dia:e,mes:a,gestion:t,fecha_ini:i,fecha_fin:n},success:function(e){var a=jQuery.parseJSON(e);0<a.length&&$.each(a,function(e,a){o.push({id:a.id,feriado:a.feriado,descripcion:a.descripcion,cantidad_dias:a.cantidad_dias,repetitivo:a.repetitivo,dia:a.dia,mes:a.mes,gestion:a.gestion,fecha_ini:a.fecha_ini,fecha_fin:a.fecha_fin,observacion:a.observacion})})}}),o}function cargarGestionesRelaborales(t){var i="";$("#lstGestion").html(""),$("#lstGestion").append("<option value='0'>TODAS</option>"),$.ajax({url:"/relaborales/getgestionesrelaborales/",type:"POST",datatype:"json",async:!1,cache:!1,success:function(e){var a=jQuery.parseJSON(e);$.each(a,function(e,a){i=t==a?"selected":"",$("#lstGestion").append("<option value='"+a+"' "+i+">"+a+"</option>")})},error:function(){alert("Se ha producido un error Inesperado")}})}function cantidadDias(e,a){var t=e.split("-"),i=a.split("-"),n=Date.UTC(t[2],t[1]-1,t[0]),o=Date.UTC(i[2],i[1]-1,i[0])-n;return Math.floor(o/864e5)+1}function obtenerFiltrables(e){var a=null;return $.ajax({url:"/relaborales/getfilters/",type:"POST",datatype:"json",async:!1,cache:!1,data:{gestion:e},success:function(e){a=jQuery.parseJSON(e)},error:function(){alert("Se ha producido un error Inesperado")}}),a}