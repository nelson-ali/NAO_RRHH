function definirGrillaParaListaExcepciones(){var i=new $.jqx.dataAdapter({datatype:"json",datafields:[{name:"nro_row",type:"integer"},{name:"id",type:"integer"},{name:"excepcion",type:"string"},{name:"tipoexcepcion_id",type:"integer"},{name:"tipo_excepcion",type:"string"},{name:"genero_id",type:"integer"},{name:"genero",type:"string"},{name:"cantidad",type:"numeric"},{name:"unidad",type:"string"},{name:"fraccionamiento",type:"string"},{name:"frecuencia_descripcion",type:"string"},{name:"descuento",type:"integer"},{name:"descuento_descripcion",type:"string"},{name:"compensatoria",type:"integer"},{name:"compensatoria_descripcion",type:"string"},{name:"redondeo",type:"integer"},{name:"redondeo_descripcion",type:"string"},{name:"horario",type:"integer"},{name:"horario_descripcion",type:"string"},{name:"refrigerio",type:"integer"},{name:"refrigerio_descripcion",type:"string"},{name:"lugar",type:"integer"},{name:"lugar_descripcion",type:"string"},{name:"codigo",type:"string"},{name:"color",type:"string"},{name:"observacion",type:"string"},{name:"estado",type:"string"},{name:"estado_descripcion",type:"string"},{name:"boleta",type:"integer"},{name:"boleta_descripcion",type:"string"}],url:"/excepciones/list",cache:!1});!function(){var e=prepareSimulator("grid");$("#divGridExcepciones").jqxGrid({theme:e,width:"100%",height:620,source:i,sortable:!0,altRows:!0,groupable:!0,columnsresize:!0,pageable:!0,pagerMode:"advanced",showfilterrow:!0,filterable:!0,showtoolbar:!0,autorowheight:!0,enablebrowserselection:!0,rendertoolbar:function(e){var i=$("<div></div>");e.append(i),i.append("<button id='addexceprowbutton' class='btn btn-sm btn-primary' type='button'><i class='fa fa-plus-square fa-2x text-primary' title='Nuevo Registro.'/></i></button>"),i.append("<button id='updateexceprowbutton'  class='btn btn-sm btn-primary' type='button' ><i class='fa fa-pencil-square fa-2x text-success' title='Modificar registro.'/></button>"),i.append("<button id='deleteexceprowbutton' class='btn btn-sm btn-primary' type='button'><i class='fa fa-minus-square fa-2x text-danger' title='Dar de baja al registro.'/></i></button>"),i.append("<button title='Refrescar Grilla' id='refreshrowhbutton' class='btn btn-sm btn-primary' type='button'><i class='fa fa-repeat fa-2x text-default' title='Refrescar grilla.'/></i></button>"),i.append("<button title='Desagrupar.' id='cleargroupsrowbutton' class='btn btn-sm btn-primary' type='button'><i class='fa fa-chain-broken fa-2x text-default' title='Desagrupar.'/></i></button>"),i.append("<button title='Desfiltrar.' id='clearfiltersrowbutton' class='btn btn-sm btn-primary' type='button'><i class='gi gi-sorting fa-2x text-default' title='Desfiltrar.'/></i></button>"),$("#addexceprowbutton").jqxButton(),$("#updateexceprowbutton").jqxButton(),$("#deleteexceprowbutton").jqxButton(),$("#refreshrowhbutton").jqxButton(),$("#cleargroupsrowbutton").jqxButton(),$("#clearfiltersrowbutton").jqxButton(),$("#refreshrowhbutton").on("click",function(){$("#divGridExcepciones").jqxGrid("updatebounddata")}),$("#cleargroupsrowbutton").off(),$("#cleargroupsrowbutton").on("click",function(){$("#divGridExcepciones").jqxGrid("cleargroups")}),$("#clearfiltersrowbutton").off(),$("#clearfiltersrowbutton").on("click",function(){$("#divGridExcepciones").jqxGrid("clearfilters")}),$("#hdnIdExcepcionEdit").val(0),$("#addexceprowbutton").off(),$("#addexceprowbutton").on("click",function(){$("#divTabExcepciones").jqxTabs("enableAt",1),$("#divTabExcepciones").jqxTabs("disableAt",2),$("#divTabExcepciones").jqxTabs({selectedItem:1}),limpiarMensajesErrorPorValidacionExcepcion(1),inicializaFormularioExcepcionesNuevoEditar(1,"",0,"","#FFFFFF",0,0,0,0,0,-1,0,0),inicializarDatosDuracion(1,"","",""),inicializarCamposParaNuevoRegistroExcepcion(),$("#txtExcepcionNew").focus()}),$("#updateexceprowbutton").off(),$("#updateexceprowbutton").on("click",function(){var e=$("#divGridExcepciones").jqxGrid("getselectedrowindex");if(0<=e){var i=$("#divGridExcepciones").jqxGrid("getrowdata",e);if(null!=i)if($("#hdnIdExcepcionEdit").val(i.id),1<=i.estado)$("#divTabExcepciones").jqxTabs("enableAt",0),$("#divTabExcepciones").jqxTabs("disableAt",1),$("#divTabExcepciones").jqxTabs("enableAt",2),$("#divTabExcepciones").jqxTabs({selectedItem:2}),$("#hdnIdExcepcionEdit").val(i.id),limpiarMensajesErrorPorValidacionExcepcion(2),inicializaFormularioExcepcionesNuevoEditar(2,i.excepcion,i.tipoexcepcion_id,i.codigo,i.color,i.descuento,i.compensatoria,i.horario,i.refrigerio,i.lugar,i.genero_id,i.boleta,i.redondeo),inicializarDatosRespaldoRip(2,i.id),inicializarDatosDuracion(2,i.cantidad,i.unidad,i.fraccionamiento),$("#txtExcepcionEdit").val(i.excepcion),$("#txtObservacionEdit").val(i.observacion),$("#txtExcepcionEdit").focus();else{var t="Debe seleccionar un registro en estado EN PROCESO o ACTIVO necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(t),$("#divMsjeNotificacionError").jqxNotification("open")}}else{var t="Debe seleccionar un registro necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(t),$("#divMsjeNotificacionError").jqxNotification("open")}}),$("#deleteexceprowbutton").on("click",function(){var e=$("#divGridExcepciones").jqxGrid("getselectedrowindex");if(0<=e){var i=$("#divGridExcepciones").jqxGrid("getrowdata",e);if(null!=i)if(1<=i.estado)confirm("Esta seguro de dar de baja registro de tolerancia?")&&darDeBajaExcepcion(i.id);else{var t="Para dar de baja un registro, este debe estar en estado ACTIVO o EN PROCESO inicialmente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(t),$("#divMsjeNotificacionError").jqxNotification("open")}}else{var t="Debe seleccionar un registro necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(t),$("#divMsjeNotificacionError").jqxNotification("open")}})},columns:[{text:"Nro.",filterable:!1,columntype:"number",width:40,cellsalign:"center",align:"center",pinned:!0,cellsrenderer:rownumberrenderer},{text:"Tipo Excepci&oacute;n",filtertype:"checkedlist",datafield:"tipo_excepcion",width:100,cellsalign:"center",align:"center",pinned:!0,hidden:!1},{text:"Excepci&oacute;n",datafield:"excepcion",width:200,cellsalign:"justify",align:"center",pinned:!0,hidden:!1},{text:"C&oacute;digo",datafield:"codigo",width:120,align:"center",cellsalign:"center",pinned:!0,hidden:!1},{text:"Color",datafield:"color",width:80,cellsalign:"center",align:"center",hidden:!1,cellsrenderer:cellsrenderer},{text:"G&eacute;nero",filtertype:"checkedlist",datafield:"genero",width:100,align:"center",cellsalign:"center",hidden:!1},{text:"Frecuencia",filtertype:"checkedlist",datafield:"frecuencia_descripcion",width:80,align:"center",cellsalign:"center",hidden:!1},{text:"Disgregado",filtertype:"checkedlist",datafield:"redondeo_descripcion",width:80,align:"center",cellsalign:"center",hidden:!1},{text:"Desc. Horas",filtertype:"checkedlist",datafield:"descuento_descripcion",width:100,align:"center",cellsalign:"center",hidden:!1},{text:"Comp. Horas",filtertype:"checkedlist",datafield:"compensatoria_descripcion",width:100,align:"center",cellsalign:"center",hidden:!1},{text:"Contr. Horario",filtertype:"checkedlist",datafield:"horario_descripcion",width:100,align:"center",cellsalign:"center",hidden:!1},{text:"Refrigerio",filtertype:"checkedlist",datafield:"refrigerio_descripcion",width:80,align:"center",cellsalign:"center",hidden:!1},{text:"Lugar",filtertype:"checkedlist",datafield:"lugar_descripcion",width:80,align:"center",cellsalign:"center",hidden:!1},{text:"Boleta",filtertype:"checkedlist",datafield:"boleta_descripcion",width:80,align:"center",cellsalign:"center",hidden:!1},{text:"Observaci&oacute;n",filtertype:"checkedlist",datafield:"observacion",width:100,align:"center",hidden:!1}]});$("#listBoxExcepciones").jqxListBox({source:[{label:"Tipo Excepci&oacute;n",value:"tipo_excepcion",checked:!0},{label:"Excepci&oacute;n",value:"excepcion",checked:!0},{label:"C&oacute;digo",value:"codigo",checked:!0},{label:"Color",value:"color",checked:!0},{label:"G&eacute;nero",value:"genero",checked:!0},{label:"Frecuencia",value:"frecuencia_descripcion",checked:!0},{label:"Disgregado",value:"redondeo_descripcion",checked:!0},{label:"Descontar Horas",value:"descuento_descripcion",checked:!0},{label:"Compensar Horas",value:"compensatoria_descripcion",checked:!0},{label:"Cotrolar Horario",value:"horario_descripcion",checked:!0},{label:"Refrigerio",value:"refrigerio_descripcion",checked:!0},{label:"Lugar",value:"lugar_descripcion",checked:!0},{label:"Boleta",value:"boleta_descripcion",checked:!0},{label:"Observaci&oacute;n",value:"observacion",checked:!0}],width:"100%",height:550,checkboxes:!0}),$("#listBoxExcepciones").on("checkChange",function(e){$("#divGridExcepciones").jqxGrid("beginupdate"),e.args.checked?$("#divGridExcepciones").jqxGrid("showcolumn",e.args.value):$("#divGridExcepciones").jqxGrid("hidecolumn",e.args.value),$("#divGridExcepciones").jqxGrid("endupdate")})}()}$().ready(function(){$("#divTabExcepciones").jqxTabs("theme","oasis"),$("#divTabExcepciones").jqxTabs("enableAt",0),$("#divTabExcepciones").jqxTabs("disableAt",1),$("#divTabExcepciones").jqxTabs("disableAt",2),definirGrillaParaListaExcepciones(),$("#btnGuardarExcepcionNew").on("click",function(){validaFormularioExcepcion(1)&&(guardaExcepcion(1)&&($("#divTabExcepciones").jqxTabs("enableAt",0),$("#divTabExcepciones").jqxTabs("disableAt",1),$("#divTabExcepciones").jqxTabs("disableAt",2),$("#msjs-alert").hide()))}),$("#btnGuardarExcepcionEdit").on("click",function(){validaFormularioExcepcion(2)&&(guardaExcepcion(2)&&($("#divTabExcepciones").jqxTabs("enableAt",0),$("#divTabExcepciones").jqxTabs("disableAt",1),$("#divTabExcepciones").jqxTabs("disableAt",2),$("#msjs-alert").hide()))}),$("#btnCancelarExcepcionNew").click(function(){$("#divTabExcepciones").jqxTabs("enableAt",0),$("#divTabExcepciones").jqxTabs("disableAt",1),$("#divTabExcepciones").jqxTabs("disableAt",2),$("#msjs-alert").hide()}),$("#btnCancelarExcepcionEdit").click(function(){$("#divTabExcepciones").jqxTabs("enableAt",0),$("#divTabExcepciones").jqxTabs("disableAt",1),$("#divTabExcepciones").jqxTabs("disableAt",2),$("#msjs-alert").hide()}),$("#btnExportarExcel").click(function(){var e=$("#listBoxExcepciones").jqxListBox("getCheckedItems"),t=0;$.each(e,function(e,i){t++}),0<t?exportarReporte(1):(alert("Debe seleccionar al menos una columna para la obtención del reporte solicitado."),$("#listBoxExcepciones").focus())}),$("#btnExportarPDF").click(function(){var e=$("#listBoxExcepciones").jqxListBox("getCheckedItems"),t=0;$.each(e,function(e,i){t++}),0<t?exportarReporte(2):(alert("Debe seleccionar al menos una columna para la obtención del reporte solicitado."),$("#listBoxExcepciones").focus())}),$("#chkAllCols").click(function(){1==this.checked?$("#listBoxExcepciones").jqxListBox("checkAll"):$("#listBoxExcepciones").jqxListBox("uncheckAll")}),$("#liList").click(function(){$("#btnCancelarExcepcionNew").click(),$("#btnCancelarExcepcionEdit").click()}),$(".numeral").keyup(function(e){""!=$(this).val()&&$(this).val($(this).val().replace(/[^0-9]/g,""))}),$(".literal").keyup(function(e){""!=$(this).val()&&$(this).val($(this).val().replace(/[^A-Z,a-z,ñ,Ñ, ]/g,""))}),$("#divMsjeNotificacionError").jqxNotification({width:"100%",position:"bottom-right",opacity:.9,autoOpen:!1,animationOpenDelay:800,autoClose:!0,autoCloseDelay:7e3,template:"error"}),$("#divMsjeNotificacionWarning").jqxNotification({width:"100%",position:"bottom-right",opacity:.9,autoOpen:!1,animationOpenDelay:800,autoClose:!0,autoCloseDelay:7e3,template:"warning"}),$("#divMsjeNotificacionSuccess").jqxNotification({width:"100%",position:"bottom-right",opacity:.9,autoOpen:!1,animationOpenDelay:800,autoClose:!0,autoCloseDelay:7e3,template:"success"}),$(document).keypress(OperaEvento),$(document).keyup(OperaEvento)});var rownumberrenderer=function(e,i,t,a,n,c){return"<div align='center'>"+(e+1)+"</div>"};function OperaEvento(e){"keyup"!=e.type&&"keydown"!=e.type||"27"!=e.which||($("#divTabExcepciones").jqxTabs("enableAt",0),$("#divTabExcepciones").jqxTabs("disableAt",1),$("#divTabExcepciones").jqxTabs("disableAt",2),$("#divTabExcepciones").jqxTabs({selectedItem:0}))}var cellclass=function(e,i,t){return"ACTIVO"==t?"verde":"EN PROCESO"==t?"amarillo":"PASIVO"==t?"rojo":""},cellsrenderer=function(e,i,t,a){var n=$(a);return n.css({"background-color":t}),n[0].outerHTML};