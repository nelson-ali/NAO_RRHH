function inicializaFormularioExcepcionesNuevoEditar(o,e,a,r,i,t,n,c,s,l,d,p,h){var u="New";2==o&&(u="Edit"),$("#txtColor"+u).colorpicker().on("change.color",function(o,e){$(this).css("background",e),$(this).css("color",e),$(".evo-pointer").hide()}),$(".evo-pointer").hide(),$("#chkDescuento"+u).bootstrapSwitch(),$("#chkCompensatoria"+u).bootstrapSwitch(),$("#chkHorario"+u).bootstrapSwitch(),$("#chkRefrigerio"+u).bootstrapSwitch(),$("#chkBoleta"+u).bootstrapSwitch(),$("#chkLugar"+u).bootstrapSwitch(),$("#chkDisgregado"+u).bootstrapSwitch(),$("#txtCantidad"+u).numeric(),$("#txtExcepcion"+u).val(e),cargarTiposExcepciones(o,a),$("#txtCodigo"+u).val(r),$("#txtColor"+u).css({"background-color":i,color:i}),1==t?$("#chkDescuento"+u).bootstrapSwitch("state",!0):$("#chkDescuento"+u).bootstrapSwitch("state",!1),1==n?$("#chkCompensatoria"+u).bootstrapSwitch("state",!0):$("#chkCompensatoria"+u).bootstrapSwitch("state",!1),1==c?$("#chkHorario"+u).bootstrapSwitch("state",!0):$("#chkHorario"+u).bootstrapSwitch("state",!1),1==s?$("#chkRefrigerio"+u).bootstrapSwitch("state",!0):$("#chkRefrigerio"+u).bootstrapSwitch("state",!1),1==l?$("#chkLugar"+u).bootstrapSwitch("state",!0):$("#chkLugar"+u).bootstrapSwitch("state",!1),1==p?$("#chkBoleta"+u).bootstrapSwitch("state",!0):$("#chkBoleta"+u).bootstrapSwitch("state",!1),1==h?$("#chkDisgregado"+u).bootstrapSwitch("state",!0):$("#chkDisgregado"+u).bootstrapSwitch("state",!1),cargarTiposGeneros(o,d)}function cargarTiposExcepciones(o,a){var r="New";2==o&&(r="Edit");var i="";$("#lstTipoExcepcion"+r).html(""),$("#lstTipoExcepcion"+r).append("<option value='0'>Seleccionar..</option>"),$.ajax({url:"/excepciones/listtiposexcepciones/",type:"POST",datatype:"json",async:!1,success:function(o){var e=jQuery.parseJSON(o);0<e.length&&$.each(e,function(o,e){i=a==e.id_tipo_excepcion?"selected":"",$("#lstTipoExcepcion"+r).append("<option value='"+e.id_tipo_excepcion+"' "+i+">"+e.tipo_excepcion+"</option>")})},error:function(){alert("Se ha producido un error Inesperado")}})}function cargarTiposGeneros(o,a){var r="New";2==o&&(r="Edit");var i="";$("#lstGenero"+r).html(""),$("#lstGenero"+r).append("<option value='-1'>Seleccionar..</option>"),$.ajax({url:"/excepciones/listgeneros/",type:"POST",datatype:"json",async:!1,success:function(o){var e=jQuery.parseJSON(o);0<e.length&&$.each(e,function(o,e){i=a==e.id_genero?"selected":"",$("#lstGenero"+r).append("<option value='"+e.id_genero+"' "+i+">"+e.genero+"</option>")})},error:function(){alert("Se ha producido un error Inesperado")}})}function cargarTiposUnidades(o,a){var r="New";2==o&&(r="Edit");var i="";$("#lstUnidad"+r).html(""),$("#lstUnidad"+r).append("<option value='' data-id-unidad='0'>Seleccionar..</option>"),$("#lstUnidad"+r).prop("disabled",!0),$.ajax({url:"/excepciones/listunidades/",type:"POST",datatype:"json",async:!1,success:function(o){var e=jQuery.parseJSON(o);0<e.length&&($("#lstUnidad"+r).prop("disabled",!1),$.each(e,function(o,e){i=a==e.unidad&&""!=a?"selected":"",$("#lstUnidad"+r).append("<option value='"+e.unidad+"' data-id-unidad='"+e.id_unidad+"' "+i+">"+e.unidad+"</option>")}))},error:function(){alert("Se ha producido un error Inesperado")}})}function cargarTiposFraccionamientos(o,e,a){var r="New";2==o&&(r="Edit");var i="";$("#lstFraccionamiento"+r).html(""),$("#lstFraccionamiento"+r).append("<option value=''>Seleccionar..</option>"),0<e?($("#lstFraccionamiento"+r).prop("disabled",!0),$.ajax({url:"/excepciones/listfraccionamientos/",type:"POST",datatype:"json",async:!1,data:{id_minima:e},success:function(o){$("#lstFraccionamiento"+r).prop("disabled",!1);var e=jQuery.parseJSON(o);0<e.length&&$.each(e,function(o,e){i=a==e.fraccionamiento&&""!=a?"selected":"",$("#lstFraccionamiento"+r).append("<option value='"+e.fraccionamiento+"' "+i+">"+e.fraccionamiento+"</option>")})},error:function(){alert("Se ha producido un error Inesperado")}})):$("#lstFraccionamiento"+r).prop("disabled",!0)}function defineDuracionEnTexto(o){var e="New";2==o&&(e="Edit"),$("#spanFrecuencia"+e).html("");var a=parseFloat($("#txtCantidad"+e).val()),r=$("#lstUnidad"+e).val(),i=$("#lstFraccionamiento"+e).val(),t="";""!=a&&0<a&&""!=r&&(1<a?(t=a,t+="MES"==r?" MESES":"VEZ"==r?" VECES":" "+r+"S"):(t=a,t+=" "+r),""!=i&&(t+="SEMANA"!=i?" AL "+i:" A LA "+i)),$("#spanFrecuencia"+e).html(t)}function validaFormularioExcepcion(o){var e=!0,a="";$(".msjs-alert").hide();var r="New";2==o&&(r="Edit"),limpiarMensajesErrorPorValidacionExcepcion(o);var i=null,t=$("#txtExcepcion"+r),n=$("#divExcepcion"+r),c=$("#helpErrorExcepcion"+r),s=$("#txtExcepcion"+r).val(),l=$("#lstTipoExcepcion"+r),d=$("#divTipoExcepcion"+r),p=$("#helpErrorTipoExcepcion"+r),h=$("#lstTipoExcepcion"+r).val(),u=$("#txtCodigo"+r),v=$("#divCodigo"+r),m=$("#helpErrorCodigo"+r),x=$("#txtCodigo"+r).val(),E=$("#txtColor"+r),f=$("#divColor"+r),g=$("#helpErrorColor"+r),C=$("#txtColor"+r).val(),S=$("#chkDescuento"+r),b=$("#divDescuento"+r),w=$("#helpErrorDescuento"+r),j="0";$("#chkDescuento"+r).bootstrapSwitch("state")&&(j="1");var k=$("#chkCompensatoria"+r),N=$("#divCompensatoria"+r),D=$("#helpErrorCompensatoria"+r),T="0";$("#chkCompensatoria"+r).bootstrapSwitch("state")&&(T="1");$("#chkHorario"+r),$("#divHorario"+r),$("#helpErrorHorario"+r);$("#chkHorario"+r).bootstrapSwitch("state");$("#chkRefrigerio"+r),$("#divRefrigerio"+r),$("#helpErrorRefrigerio"+r);$("#chkRefrigerio"+r).bootstrapSwitch("state");$("#chkBoleta"+r),$("#divBoleta"+r),$("#helpErrorBoleta"+r);$("#chkBoleta"+r).bootstrapSwitch("state");var F=$("#lstGenero"+r),y=$("#divGenero"+r),R=$("#helpErrorGenero"+r),M=$("#lstGenero"+r).val(),O=$("#txtCantidad"+r),U=$("#divCantidad"+r),A=$("#helpErrorCantidad"+r),P=$("#txtCantidad"+r).val(),I=$("#lstUnidad"+r),G=$("#divUnidad"+r),_=$("#helpErrorUnidad"+r),H=$("#lstUnidad"+r).val(),B=($("#lstFraccionamiento"+r),$("#divFraccionamiento"+r)),q=$("#helpErrorFraccionamiento"+r),J=$("#lstFraccionamiento"+r).val();$("#txtObservacion"+r),$("#divObservacion"+r),$("#helpErrorObservacion"+r),$("#txtObservacion"+r).val();if(""==s){e=!1;a="Debe introducir el nombre de la excepci&oacute;n.";n.addClass("has-error"),c.html(a),null==i&&(i=t)}if(""==h||0==h){e=!1;a="Debe seleccionar el tipo de excepci&oacute;n necesariamente.";d.addClass("has-error"),p.html(a),null==i&&(i=l)}if(""==x){e=!1;a="Debe registrar el c&oacute;digo a usarse para la excepci&oacute;n necesariamente.";v.addClass("has-error"),m.html(a),null==i&&(i=u)}if(""==C||"#FFFFFF"==C.toUpperCase){e=!1;a="Debe seleccionar el color para representar a la excepci&oacute;n necesariamente.";f.addClass("has-error"),g.html(a),null==i&&(i=E)}if(""==j||null==j){e=!1;a="Debe seleccionar si en la excepci&oacute;n se aplica descuento o no.";b.addClass("has-error"),w.html(a),null==i&&(i=S)}if(""==T||null==T){e=!1;a="Debe seleccionar si en la excepci&oacute;n se aplica compensatoria o no.";N.addClass("has-error"),D.html(a),null==i&&(i=k)}if(M<0||""==M){e=!1;a="Debe seleccionar un g&eacute;nero o si es indistinto necesariamente.";y.addClass("has-error"),R.html(a),null==i&&(i=F)}if(""!=H||""!=J){if(""==P){e=!1;a="Debido a que seleccion&oacute; un valor para la Unidad y/o Fraccionamiento debe introducir la cantidad necesariamente.";U.addClass("has-error"),A.html(a),null==i&&(i=O)}}else if(""!=P){e=!1;a="Debido a que registr&oacute; un valor para la cantidad debe seleccionar la Unidad y/o Fraccionamiento necesariamente.";G.addClass("has-error"),_.html(a),B.addClass("has-error"),q.html(a),null==i&&(i=I)}return null!=i&&i.focus(),e}function limpiarMensajesErrorPorValidacionExcepcion(o){var e="New";2==o&&(e="Edit");e="New";2==o&&(e="Edit"),$("#divExcepcion"+e).removeClass("has-error"),$("#helpErrorExcepcion"+e).html(""),$("#divTipoExcepcion"+e).removeClass("has-error"),$("#helpErrorTipoExcepcion"+e).html(""),$("#divCodigo"+e).removeClass("has-error"),$("#helpErrorCodigo"+e).html(""),$("#divColor"+e).removeClass("has-error"),$("#helpErrorColor"+e).html(""),$("#divDescuento"+e).removeClass("has-error"),$("#helpErrorDescuento"+e).html(""),$("#divCompensatoria"+e).removeClass("has-error"),$("#helpErrorCompensatoria"+e).html(""),$("#divGenero"+e).removeClass("has-error"),$("#helpErrorGenero"+e).html(""),$("#divCantidad"+e).removeClass("has-error"),$("#helpErrorCantidad"+e).html(""),$("#divUnidad"+e).removeClass("has-error"),$("#helpErrorUnidad"+e).html(""),$("#divFraccionamiento"+e).removeClass("has-error"),$("#helpErrorFraccionamiento"+e).html(""),$("#divHorario"+e).removeClass("has-error"),$("#helpErrorHorario"+e).html(""),$("#divRefrigerio"+e).removeClass("has-error"),$("#helpErrorRefrigerio"+e).html(""),$("#divBoleta"+e).removeClass("has-error"),$("#helpErrorBoleta"+e).html("")}function guardaExcepcion(o){var a=!1,e=0,r="New";2==o&&(e=$("#hdnIdExcepcionEdit").val(),r="Edit");var i=$("#txtExcepcion"+r).val(),t=$("#lstTipoExcepcion"+r).val(),n=$("#txtCodigo"+r).val(),c=$("#txtColor"+r).val(),s=0;$("#chkDescuento"+r).bootstrapSwitch("state")&&(s=1);var l=0;$("#chkCompensatoria"+r).bootstrapSwitch("state")&&(l=1);var d=0;$("#chkHorario"+r).bootstrapSwitch("state")&&(d=1);var p=0;$("#chkRefrigerio"+r).bootstrapSwitch("state")&&(p=1);var h=0;$("#chkLugar"+r).bootstrapSwitch("state")&&(h=1);var u=0;$("#chkBoleta"+r).bootstrapSwitch("state")&&(u=1);var v=0;$("#chkDisgregado"+r).bootstrapSwitch("state")&&(v=1);var m=$("#lstGenero"+r).val(),x=$("#txtCantidad"+r).val(),E=$("#lstUnidad"+r).val(),f=$("#lstFraccionamiento"+r).val(),g=$("#txtArticuloRip"+r).val(),C=$("#txtIncisoRip"+r).val(),S=$("#txtObservacion"+r).val();return""!=i&&$.ajax({url:"/excepciones/save/",type:"POST",datatype:"json",async:!1,cache:!1,data:{id:e,excepcion:i,tipoexcepcion_id:t,codigo:n,color:c,descuento:s,compensatoria:l,genero_id:m,cantidad:x,unidad:E,fraccionamiento:f,redondeo:v,horario:d,refrigerio:p,lugar:h,articulo_rip:g,inciso_rip:C,boleta:u,observacion:S},success:function(o){var e=jQuery.parseJSON(o);$(".msjes").hide(),1==e.result?(a=!0,$("#divMsjePorSuccess").html(""),$("#divMsjePorSuccess").append(e.msj),$("#divMsjeNotificacionSuccess").jqxNotification("open"),$("#divGridExcepciones").jqxGrid("updatebounddata")):0==e.result?($("#divMsjePorWarning").html(""),$("#divMsjePorWarning").append(e.msj),$("#divMsjeNotificacionWarning").jqxNotification("open")):($("#divMsjePorError").html(""),$("#divMsjePorError").append(e.msj),$("#divMsjeNotificacionError").jqxNotification("open"))},error:function(){$("#divMsjePorError").html(""),$("#divMsjePorError").append("Se ha producido un error Inesperado"),$("#divMsjeNotificacionError").jqxNotification("open")}}),a}function inicializarCamposParaNuevoRegistroExcepcion(){$("#hdnIdExcepcionEdit").val(0),$("#txtExcepcionNew").val(""),$("#txtCodigoNew").val(""),$("#txtColorNew").val(""),$("#txtCantidadNew").val(""),$("#txtArticuloRipNew").val(""),$("#txtIncisoRipNew").val(""),$("#txtObservacionNew").val("")}function inicializarDatosDuracion(o,e,a,r){var i="New";2==o&&(i="Edit"),$("#txtCantidad"+i).val(e),cargarTiposUnidades(o,a);var t=0;if(2==o&&0<e&&null!=e){if(""!=a){var n=$.inArray(a,["VEZ","MINUTO","MEDIA HORA","HORA","MEDIO DIA","DIA","SEMANA","MES","SEMESTRE","AÑO"]);t=n+1}cargarTiposFraccionamientos(o,t,r),defineDuracionEnTexto(o)}else cargarTiposFraccionamientos(o,t,r),defineDuracionEnTexto(o);$("#lstUnidad"+i).off(),$("#lstUnidad"+i).on("change",function(){t=$("#lstUnidad"+i+" option:selected").data("id-unidad"),cargarTiposFraccionamientos(o,t,r),defineDuracionEnTexto(o)}),$("#txtCantidad"+i+",#lstUnidad"+i+",#lstFraccionamiento"+i).on("change",function(){defineDuracionEnTexto(o)})}function inicializarDatosRespaldoRip(o,e){var a="New";2==o&&(a="Edit"),$("#txtArticuloRip"+a).html(""),$("#txtIncisoRip"+a).html(""),0<e&&$.ajax({url:"/excepciones/getrespaldorip",type:"POST",datatype:"json",cache:!1,data:{id:e},success:function(o){var e=jQuery.parseJSON(o);""==e.articulo&&""==e.inciso||($("#txtArticuloRip"+a).val(e.articulo),$("#txtIncisoRip"+a).val(e.inciso))}})}