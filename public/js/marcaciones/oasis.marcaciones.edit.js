function definirGrillaParaSeleccionarCargoAcefaloParaEditar(a,e){prepareSimulator("grid");var r=new $.jqx.dataAdapter({datatype:"json",datafields:[{name:"seleccionable",type:"string"},{name:"codigo",type:"string"},{name:"id_condicion",type:"string"},{name:"condicion",type:"string"},{name:"id_cargo",type:"string"},{name:"gerencia_administrativa",type:"string"},{name:"departamento_administrativo",type:"string"},{name:"nivelsalarial",type:"string"},{name:"cargo",type:"string"},{name:"sueldo",type:"numeric"},{name:"asistente",type:"integer"},{name:"jefe",type:"integer"},{name:"id_resolucion_ministerial",type:"integer"},{name:"resolucion_ministerial",type:"string"},{name:"nivelsalarial_resolucion_id",type:"integer"},{name:"nivelsalarial_resolucion",type:"string"}],url:"/relaborales/listcargos",cache:!1});$("#divGrillaParaSeleccionarCargo").jqxGrid({width:"100%",height:"100%",source:r,sortable:!0,altRows:!0,groupable:!0,columnsresize:!0,pageable:!0,pagerMode:"advanced",showfilterrow:!0,filterable:!0,showtoolbar:!0,autorowheight:!0,rendertoolbar:function(a){var e=$("<div></div>");a.append(e),e.append("<button id='selectrowbutton'  class='btn btn-sm btn-primary' type='button' ><i class='fa fa-check-square fa-2x text-info' title='Seleccionar Cargo'> Seleccionar Cargo</i></button>"),$("#selectrowbutton").jqxButton(),$("#selectrowbutton").off(),$("#selectrowbutton").on("click",function(){var a=$("#divGrillaParaSeleccionarCargo").jqxGrid("getselectedrowindex");if(0<=a){var e=$("#divGrillaParaSeleccionarCargo").jqxGrid("getrowdata",a);if(null!=e)agregarCargoSeleccionadoEnGrillaParaEditar(e.id_cargo,e.codigo,e.id_finpartida,e.finpartida,e.id_resolucion_ministerial,e.resolucion_ministerial,e.id_condicion,e.condicion,e.id_organigrama,e.gerencia_administrativa,e.departamento_administrativo,0,e.nivelsalarial,e.cargo,e.sueldo);else{var r="Debe seleccionar un cargo necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(r),$("#divMsjeNotificacionError").jqxNotification("open")}}else{var r="Debe seleccionar un cargo necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(r),$("#divMsjeNotificacionError").jqxNotification("open")}})},columns:[{text:"Nro.",sortable:!1,filterable:!1,editable:!1,groupable:!1,draggable:!1,resizable:!1,columntype:"number",width:50,cellsalign:"center",align:"center",cellsrenderer:rownumberrenderer},{text:"&Iacute;tem/C&oacute;digo",filtertype:"input",datafield:"codigo",cellsalign:"center",align:"center",width:100},{text:"Cargo",columntype:"textbox",filtertype:"input",datafield:"cargo",align:"center",width:200},{text:"Nivel Salarial",filtertype:"checkedlist",datafield:"nivelsalarial",align:"center",width:200},{text:"Haber",filtertype:"checkedlist",datafield:"sueldo",align:"center",cellsalign:"center",width:70},{text:"Gerencia",filtertype:"checkedlist",datafield:"gerencia_administrativa",align:"center",width:200},{text:"Departamento",filtertype:"checkedlist",datafield:"departamento_administrativo",align:"center",width:200},{text:"Condici&oacute;n",filtertype:"checkedlist",datafield:"condicion",align:"center",width:100},{text:"Resoluci&oacute;n Organigrama",filtertype:"checkedlist",datafield:"resolucion_ministerial",align:"center",width:200},{text:"Resoluci&oacute;n Escala",filtertype:"checkedlist",datafield:"nivelsalarial_resolucion",align:"center",width:200}]})}var rownumberrenderer=function(a,e,r,i,t,o){return"<div align='center'>"+(a+1)+"</div>"};function cargarUbicacionesParaEditar(r){""==r&&(r=0),$("#lstUbicacionesEditar").html(""),$.ajax({url:"/relaborales/listubicaciones",type:"POST",datatype:"json",cache:!1,async:!1,success:function(a){var e=jQuery.parseJSON(a);$.each(e,function(a,e){r==e.id?$selected="selected":$selected="",$("#lstUbicacionesEditar").append("<option value="+e.id+" "+$selected+">"+e.ubicacion+"</option>")})}})}function cargarDepartamentosParaEditar(a){$("#departamentoEditar").jqxComboBox({enableBrowserBoundsDetection:!0,autoDropDownHeight:!0,promptText:"Seleccione un departamento o ciudad",source:[{value:0,label:"La Paz"},{value:1,label:"Cochabamba"},{value:2,label:"Sucre"},{value:3,label:"Oruro"},{value:4,label:"Potos√≠"},{value:5,label:"Santa Cruz"},{value:6,label:"Tarija"},{value:7,label:"Trinidad"},{value:8,label:"Cobija"}],height:22,width:"100%"})}function cargarAreasAdministrativasParaEditar(a,r){$("#divAreasEditar").hide(),$("#lstAreasEditar").html("");var i=!1;return 0<a&&$.ajax({url:"/relaborales/listareas",type:"POST",datatype:"json",async:!1,data:{id_padre:a},success:function(a){var e=jQuery.parseJSON(a);0<e.length&&($("#divAreasEditar").show(),$("#lstAreasEditar").append("<option value='0'>Seleccionar..</option>"),$.each(e,function(a,e){i=!0,r==e.id_area?selected="selected":selected="",$("#lstAreasEditar").append("<option value="+e.id_area+" "+selected+">"+e.unidad_administrativa+"</option>")}))}}),i}function cargarProcesosParaEditar(a,r){$.ajax({url:"/relaborales/listprocesos",type:"POST",datatype:"json",data:{id_condicion:a},success:function(a){var e=jQuery.parseJSON(a);$("#lstProcesosEditar").html(""),$.each(e,function(a,e){r==e.id?$selected="selected":$selected="",$("#lstProcesosEditar").append("<option value="+e.id+" "+$selected+">"+e.codigo_proceso+"</option>")})}})}function cargaCategoriasParaEditar(a){$("#categoriaEditar").jqxComboBox({enableBrowserBoundsDetection:!0,autoDropDownHeight:!0,promptText:"Seleccione una categoria",source:[{value:1,label:"ADMINISTRATIVO"},{value:2,label:"TECNICO"},{value:3,label:"JURIDICO"}],height:22,width:"100%"})}function agregarCargoSeleccionadoEnGrillaParaEditar(a,e,r,i,t,o,d,l,n,s,c,h,u,E,p,v,m){$("#tr_cargo_seleccionado_editar").html("");var g="<td class='text-center'><a class='btn btn-danger btnDescartarCargoSeleccionadoEditar' title='Descartar cargo seleccionado.' data-toggle='tooltip' data-original-title='Descartar' id='btn_editar_"+a+"' alt='Descartar cargo para el contrato'>";g+="<i class='fa fa-times'></i></a></td>";var b="<td class='text-center'>"+e+"</td><td class='text-center'>"+o+"</td><td class='text-center'>"+m+"</td><td class='text-center'>"+l+"</td><td>"+s+"</td><td>"+c+"</td><td>"+u+"</td><td>"+E+"</td><td class='text-center'>"+p+"</td>";$("#tr_cargo_seleccionado_editar").append(g+b),$("#hdnIdCargoSeleccionadoEditar").val(a),$("#hdnIdOrganigramaSeleccionadoEditar").val(n),$("#hdnIdCondicionEditableSeleccionada").val(d),$("#popupGrillaCargo").modal("hide"),$("#divProcesosEditar").show();cargarAreasAdministrativasParaEditar(n,h);2==(d=parseInt(d))||3==d||7==d?($("#divNumContratosEditar").show(),$("#divFechasFinEditar").show(),$("#FechaFinEditar").jqxDateTimeInput({enableBrowserBoundsDetection:!0,height:24,formatString:"dd-MM-yyyy"}),$("#txtNumContratoEditar").focus()):$("#lstUbicacionesEditar").focus(),$(".btnDescartarCargoSeleccionadoEditar").click(function(){$("#tr_cargo_seleccionado_editar").html(""),$("#hdnIdCargoSeleccionadoEditar").val(0),$("#hdnIdOrganigramaSeleccionadoEditar").val(0),$("#hdnIdCondicionNuevaSeleccionadaEditar").val(0),$("#hdnIdRelaboral").val(0),$("#divProcesosEditar").hide(),$("#divNumContratosEditar").hide(),$("#divFechasFinEditar").hide(),$(".msjs-alert").hide(),$(".div-edit-relab").removeClass("has-error"),$("#helpErrorUbicacionesEditar").html(""),$("#helpErrorProcesosEditar").html(""),$("#helpErrorCategoriasEditar").html(""),$("#divUbicacionesEditar").removeClass("has-error"),$("#divProcesosEditar").removeClass("has-error"),$("#divCategoriasEditar").removeClass("has-error")})}function deshabilitarCamposParaEditarRegistroDeRelacionLaboral(){$("#tr_cargo_seleccionado_editar").html(""),$("#hdnIdPersonaSeleccionadaEditar").val(0),$("#NombreParaEditarRegistro").html("")}function validaFormularioPorEditarRegistro(){var a=!0,e="";$(".msjs-alert").hide(),limpiarMensajesErrorPorValidacionEditarRegistro();var r=$("#hdnIdCondicionEditableSeleccionada").val();r=parseInt(r);var i=$("#lstUbicacionesEditar").val(),t=$("#lstProcesosEditar").val(),o=($("#lstCategoriasEditar").val(),$("#FechaIniEditar").jqxDateTimeInput("getText")),d=$("#FechaIncorEditar").jqxDateTimeInput("getText"),l=null;2!=r&&3!=r&&7!=r||(l=$("#FechaFinEditar").jqxDateTimeInput("getText"));var n=$("#hdnIdCargoSeleccionadoEditar").val(),s=$("#hdnIdRelaboralEditar").val(),c="";0!=s&&null!=s||($("#divMsjeError").show(),$("#divMsjeError").addClass("alert alert-danger alert-dismissable"),c+="Se requiere seleccionar un registro de relaci&oacute;n laboral inicialmente.",a=!1),0!=n&&null!=n||($("#divMsjeError").show(),$("#divMsjeError").addClass("alert alert-danger alert-dismissable"),""!=c&&(c+="<br>"),c+="Debe seleccionar el cargo necesariamente.",a=!1),""!=c&&$("#aMsjeError").html(c),r=parseInt(r);var h=null;null!=o&&""!=o||(a=!1,e="Debe introducir la fecha de inicio.",$("#divFechasIniEditar").addClass("has-error"),$("#helpErrorFechasIniEditar").html(e),null==h&&(h=$("#FechaIni"))),null!=d&&""!=d||(a=!1,e="Debe introducir la fecha de incorporaci&oacute;n.",$("#divFechasIncorEditar").addClass("has-error"),$("#helpErrorFechasIncorEditar").html(e),null==h&&(h=$("#FechaIncorEditar")));return procesaTextoAFecha(d,"-")<procesaTextoAFecha(o,"-")&&(a=!1,e="La fecha de incorporaci&oacute;n debe ser igual o superior a la fecha de inicio.",$("#divFechasIniEditar").addClass("has-error"),$("#divFechasIncorEditar").addClass("has-error"),$("#helpErrorFechasIniEditar").html(e),$("#helpErrorFechasIncorEditar").html(e),null==h&&(h=$("#FechaIniEditar"))),2!=r&&3!=r&&7!=r||(""!=l&&null!=l||(a=!1,e="Debe introducir la fecha de finalizaci&oacute;n del contrato.",$("#divFechasFinEditar").show(),$("#divFechasFinEditar").addClass("has-error"),$("#helpErrorFechasFinEditar").html(e),null==h&&(h=$("#FechaFinEditar"))),procesaTextoAFecha(l,"-")<procesaTextoAFecha(o,"-")&&(a=!1,e="La fecha de inicio no puede ser superior a la fecha de finalizaci&oacute;n.",$("#divFechasIniEditar").show(),$("#divFechasIniEditar").addClass("has-error"),$("#helpErrorFechasIniEditar").html(e),$("#divFechasFinEditar").show(),$("#divFechasFinEditar").addClass("has-error"),$("#helpErrorFechasFinEditar").html(e),null==h&&(h=$("#FechaFinEditar"))),procesaTextoAFecha(l,"-")<procesaTextoAFecha(d,"-")&&(a=!1,e="La fecha de incorporaci&oacute;n no puede ser superior a la fecha de finalizaci&oacute;n.",$("#divFechasIncorEditar").show(),$("#divFechasIncorEditar").addClass("has-error"),$("#helpErrorFechasIncorEditar").html(e),$("#divFechasFinEditar").show(),$("#divFechasFinEditar").addClass("has-error"),$("#helpErrorFechasFinEditar").html(e),null==h&&(h=$("#FechaFinEditar")))),2!=r&&3!=r&&7!=r||(null!=$("#txtNumContratoEditar").val()&&""!=$("#txtNumContratoEditar").val()||(a=!1,e="Debe introducir en n&uacute;mero de contrato necesariamente.",$("#divNumContratosEditar").addClass("has-error"),$("#helpErrorNumContratosEditar").html(e),null==h&&(h=$("#txtNumContratoEditar"))),null!=l&&""!=l||(a=!1,e="Debe introducir la fecha de finalizaci&oacute;n del contrato.",$("#divFechasFinEditar").addClass("has-error"),$("#helpErrorFechasFinEditar").html(e),null==h&&(h=$("#FechaFinEditar")))),""!=i&&null!=i||(a=!1,e="Debe seleccionar la ubicaci&oacute;n de trabajo necesariamente.",$("#divUbicacionesEditar").addClass("has-error"),$("#helpErrorUbicacionesEditar").html(e),null==h&&(h=$("#lstUbicacionesEditar"))),0!=t&&""!=t&&null!=t||(a=!1,e="Debe seleccionar el proceso correspondiente necesariamente.",$("#divProcesosEditar").addClass("has-error"),$("#helpErrorProcesosEditar").html(e),null==h&&(h=$("#lstProcesosEditar"))),null!=h&&h.focus(),a}function limpiarMensajesErrorPorValidacionEditarRegistro(){$("#helpErrorUbicacionesEditar").html(""),$("#helpErrorProcesosEditar").html(""),$("#helpErrorCategoriasEditar").html(""),$("#helpErrorNumContratosEditar").html(""),$("#helpErrorItemsEditar").html(""),$("#helpErrorFechasIniEditar").html(""),$("#helpErrorFechasIncorEditar").html(""),$("#helpErrorFechasFinEditar").html(""),$("#divUbicacionesEditar").removeClass("has-error"),$("#divProcesosEditar").removeClass("has-error"),$("#divCategoriasEditar").removeClass("has-error"),$("#divFechasIniEditar").removeClass("has-error"),$("#divFechasIncorEditar").removeClass("has-error"),$("#divFechasFinEditar").removeClass("has-error"),$("#divNumContratosEditar").removeClass("has-error"),$("#divItemsEditar").removeClass("has-error"),$("#tr_cargo_seleccionado_editar").html("")}function guardarRegistroEditado(){var a=!0,e=$("#hdnIdRelaboralEditar").val(),r=0;null!=$("#lstAreasEditar").val()&&(r=$("#lstAreasEditar").val());var i=$("#hdnIdPersonaSeleccionadaEditar").val(),t=$("#hdnIdCargoSeleccionadoEditar").val(),o=$("#lstUbicacionesEditar").val(),d=$("#lstProcesosEditar").val(),l=$("#hdnIdCondicionEditableSeleccionada").val(),n="",s=null;if(2==l||3==l||7==l){n=$("#txtNumContratoEditar").val();s=$("#FechaFinEditar").jqxDateTimeInput("getText")}var c=$("#FechaIniEditar").jqxDateTimeInput("getText"),h=$("#FechaIncorEditar").jqxDateTimeInput("getText"),u=$("#txtObservacionEditar").val();if(0<e&&0<i&&0<t)a=$.ajax({url:"/relaborales/save/",type:"POST",datatype:"json",async:!1,data:{id:e,id_persona:i,id_cargo:t,num_contrato:n,id_area:r,id_ubicacion:o,id_regional:1,id_procesocontratacion:d,fecha_inicio:c,fecha_incor:h,fecha_fin:s,observacion:u},success:function(a){var e=jQuery.parseJSON(a);$(".msjes").hide(),1==e.result?($("#divMsjeExito").show(),$("#divMsjeExito").addClass("alert alert-success alert-dismissable"),$("#aMsjeExito").html(e.msj),$("#jqxTabs").jqxTabs("enableAt",0),$("#jqxTabs").jqxTabs("disableAt",1),$("#jqxTabs").jqxTabs("disableAt",2),$("#jqxTabs").jqxTabs("disableAt",3),deshabilitarCamposParaEditarRegistroDeRelacionLaboral(),$("#jqxgrid").jqxGrid("updatebounddata")):0==e.result?($("#divMsjePeligro").show(),$("#divMsjePeligro").addClass("alert alert-warning alert-dismissable"),$("#aMsjePeligro").html(e.msj)):($("#divMsjeError").show(),$("#divMsjeError").addClass("alert alert-danger alert-dismissable"),$("#aMsjeError").html(e.msj))},error:function(){alert("Se ha producido un error Inesperado")}});else a=!1;return a}