function obtenerArrExcepcionesEnCalendarioPorRango(o,a,r,i,e){var n=obtenerListadoFechasEnCalendario(o.id_relaboral,a,r,i,e),g=[];return $.each(n,function(o,a){var r=a.fecha.split("-"),i=a.hora_ini.split(":"),e=a.hora_fin.split(":"),n=r[0],c=r[1]-1,t=r[2],s=i[0],_=i[1],l=(i[2],a.fecha.split("-")),d=l[0],h=l[1]-1,p=l[2],f=e[0],b=e[1],u=(e[2],"(e) "+a.excepcion);1==a.horario&&(u+="  ["+a.hora_ini+" a "+a.hora_fin+"]"),g.push({id:0,className:"excepciones",title:u,start:new Date(n,c,t,s,_),end:new Date(d,h,p,f,b),allDay:!0,color:a.color,textColor:"#000",editable:!1,borderColor:"#000",horas_laborales:0,dias_laborales:0,hora_entrada:a.hora_ini,hora_salida:a.hora_fin})}),g}function obtenerListadoFechasEnCalendario(o,a,r,i,e){var n=[];return $.ajax({url:"/controlexcepciones/listporrelaboralyrango",type:"POST",datatype:"json",cache:!1,async:!1,data:{id_relaboral:o,fecha_ini:i,fecha_fin:e},success:function(o){var a=jQuery.parseJSON(o);0<a.length&&$.each(a,function(o,a){n.push({fecha:a.fecha,dia:a.dia,dia_nombre:a.dia_nombre,dia_nombre_abr_ing:a.dia_nombre_abr_ing,id_controlexcepcion:a.id_controlexcepcion,id_relaboral:a.id_relaboral,fecha_ini:a.fecha_ini,hora_ini:a.hora_ini,fecha_fin:a.fecha_fin,hora_fin:a.hora_fin,justificacion:a.justificacion,controlexcepcion_observacion:a.controlexcepcion_observacion,controlexcepcion_estado:a.controlexcepcion_estado,controlexcepcion_estado_descripcion:a.controlexcepcion_estado_descripcion,excepcion_id:a.excepcion_id,excepcion:a.excepcion,tipoexcepcion_id:a.tipoexcepcion_id,tipo_excepcion:a.tipo_excepcion,codigo:a.codigo,color:a.color,compensatoria:a.compensatoria,compensatoria_descripcion:a.compensatoria_descripcion,genero_id:a.genero_id,genero:a.genero,cantidad:a.cantidad,unidad:a.unidad,fraccionamiento:a.fraccionamiento,frecuencia_descripcion:a.frecuencia_descripcion,redondeo:a.redondeo,redondeo_descripcion:a.redondeo_descripcion,horario:a.horario,horario_descripcion:a.horario_descripcion})})}}),n}function cargarModalHorario(o){return 0<o&&($.ajax({url:"/horarioslaborales/getone",type:"POST",datatype:"json",async:!1,cache:!1,data:{id:o},success:function(o){var a=jQuery.parseJSON(o);0<a.length&&$.each(a,function(o,a){$("#txtNombreHorario").val(a.nombre),$("#txtNombreAlternativoHorario").val(a.nombre_alternativo),$("#txtColorHorario").val(a.color),$("#txtColorHorario").css({"background-color":a.color,color:a.color}),$("#txtHoraEntHorario").val(a.hora_entrada),$("#txtHoraSalHorario").val(a.hora_salida),$("#txtHoraInicioRangoEnt").val(a.hora_inicio_rango_ent),$("#txtHoraFinalizacionRangoEnt").val(a.hora_final_rango_ent),$("#txtHoraInicioRangoSal").val(a.hora_inicio_rango_sal),$("#txtHoraFinalizacionRangoSal").val(a.hora_final_rango_sal),1===a.agrupador?$("#chkPermitirCruce").prop("checked",!0):$("#chkPermitirCruce").prop("checked",!1),$("#txtObservacion").val(a.observacion);var r=a.hora_entrada,i=a.hora_salida;""==r&&(r="00:00:00"),""==i&&(i="00:00:00"),$("#txtHorasLaborales").val(a.horas_laborales)})}}),!0)}function obtenerDatosHorario(o){var r=[];return 0<o&&$.ajax({url:"/horarioslaborales/getone",type:"POST",datatype:"json",async:!1,cache:!1,data:{id:o},success:function(o){var a=jQuery.parseJSON(o);0<a.length&&$.each(a,function(o,a){r.push({nombre:a.nombre,nombre_alternativo:a.nombre_alternativo,color:a.color,hora_entrada:a.hora_entrada,hora_salida:a.hora_salida,hora_inicio_rango_ent:a.hora_inicio_rango_ent,hora_final_rango_ent:a.hora_final_rango_ent,hora_inicio_rango_sal:a.hora_inicio_rango_sal,observacion:a.observacion,horas_laborales:a.horas_laborales,dias_laborales:a.dias_laborales})})}}),r}function obtenerFeriadosRangoFechas(o,a,r,i,e){var n=[];return 0<r&&""!=i&&""!=e&&$.ajax({url:"/feriados/listrange",type:"POST",datatype:"json",async:!1,cache:!1,data:{dia:o,mes:a,gestion:r,fecha_ini:i,fecha_fin:e},success:function(o){var a=jQuery.parseJSON(o);0<a.length&&$.each(a,function(o,a){n.push({id:a.id,feriado:a.feriado,descripcion:a.descripcion,cantidad_dias:a.cantidad_dias,repetitivo:a.repetitivo,dia:a.dia,mes:a.mes,gestion:a.gestion,fecha_ini:a.fecha_ini,fecha_fin:a.fecha_fin,observacion:a.observacion})})}}),n}