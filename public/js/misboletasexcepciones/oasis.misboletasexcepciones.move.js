function cargarGrillaMovilidad(x){var i={datatype:"json",datafields:[{name:"nro_row",type:"integer"},{name:"id_relaboral",type:"integer"},{name:"id_relaboralmovilidad",type:"integer"},{name:"id_gerencia_administrativa",type:"integer"},{name:"gerencia_administrativa",type:"string"},{name:"id_departamento_administrativo",type:"integer"},{name:"departamento_administrativo",type:"string"},{name:"id_organigrama",type:"integer"},{name:"unidad_administrativa",type:"string"},{name:"organigrama_sigla",type:"string"},{name:"organigrama_orden",type:"string"},{name:"id_area",type:"integer"},{name:"area",type:"string"},{name:"id_ubicacion",type:"integer"},{name:"ubicacion",type:"string"},{name:"numero",type:"integer"},{name:"cargo",type:"string"},{name:"evento_id",type:"integer"},{name:"evento",type:"string"},{name:"motivo",type:"string"},{name:"id_pais",type:"integer"},{name:"pais",type:"string"},{name:"id_departamento",type:"integer"},{name:"departamento",type:"string"},{name:"lugar",type:"string"},{name:"fecha_ini",type:"date"},{name:"hora_ini",type:"time"},{name:"fecha_fin",type:"date"},{name:"hora_fin",type:"time"},{name:"id_memorandum",type:"integer"},{name:"id_tipomemorandum",type:"integer"},{name:"tipo_memorandum",type:"string"},{name:"memorandum_correlativo",type:"string"},{name:"memorandum_gestion",type:"integer"},{name:"memorandum",type:"string"},{name:"fecha_mem",type:"date"},{name:"observacion",type:"string"},{name:"estado",type:"integer"},{name:"estado_descripcion",type:"string"}],url:"/relaborales/listhistorialmovilidad?id="+x,id:"id_relaboralmovilidad",cache:!1},a=new $.jqx.dataAdapter(i);!function(){prepareSimulator("grid");$("#jqxgridmovilidad").jqxGrid({theme:"oasis",width:"100%",height:"100%",source:a,sortable:!0,altRows:!0,groupable:!0,columnsresize:!0,pageable:!0,pagerMode:"advanced",showfilterrow:!0,filterable:!0,showtoolbar:!0,autorowheight:!0,rendertoolbar:function(i){var a=$("<div></div>");i.append(a),a.append("<button id='addrowbuttonmove' class='btn btn-sm btn-primary' type='button'><i class='fa fa-plus-square fa-2x text-info' title='Nuevo Registro.'/></i></button>"),a.append("<button id='updaterowbuttonmove'  class='btn btn-sm btn-primary' type='button' ><i class='fa fa-pencil-square fa-2x text-info' title='Modificar registro.'/></button>"),a.append("<button id='deleterowbuttonmove' class='btn btn-sm btn-primary' type='button'><i class='fa fa-minus-square fa-2x text-info' title='Dar de baja al registro.'/></i></button>"),$("#addrowbuttonmove").jqxButton(),$("#updaterowbuttonmove").jqxButton(),$("#deleterowbuttonmove").jqxButton(),$("#addrowbuttonmove").on("click",function(){$("#lstTipoMemorandum").off(),$("#hdnIdRelaboralPorMovilidad").val(x),$("#hdnIdRelaboralMovilidadModificar").val(0),$("#hdnIdRelaboralMovilidadBaja").val(0),$("#hdnFechaMemMovilidadBaja").val(""),$("#hdnFechaIniMovilidadBaja").val(""),$("#hdnIdMemorandumMovilidadModificar").val(0),$("#chkAi").attr("checked",!1),$("#txtCorrelativoMemorandum").val(""),$("#txtCargoMovilidad").val(""),$("#lstUbicaciones").val(""),$("#txtMotivoMovilidad").val(""),$("#txtLugarMovilidad").val(""),$("#txtObservacionMovilidad").val(""),$("#txtFechaMem").val(""),$("#txtFechaIniMovilidad").val(""),$("#txtFechaFinMovilidad").val(""),$("#hdnIdOrganigramaPorSeleccionCargoSuperior").val(0),$("#divTiposMemorandums").show(),$("#divCorrelativosMemorandums").show(),$("#divFechasMemorandums").show(),$("#divCargosMovilidad").show(),$("#divMotivosMovilidad").show(),$("#divPaisesMovilidad").show(),$("#divCiudadesMovilidad").show(),$("#divLugaresMovilidad").show(),$("#divGerenciasAdministrativasMovilidad").show(),$("#divDepartamentosAdministrativosMovilidad").show(),$("#divAreasAdministrativasMovilidad").show(),$("#divUbicacionesMovilidad").show(),$("#divFechasIniMovilidad").show(),$("#divHorasIniMovilidad").show(),limpiarMensajesErrorPorValidacionMovilidad(),$("#divTitleRegistroMovilidad").html(""),$("#divTitleRegistroMovilidad").append("Nuevo Registro de Movilidad de Personal"),$("#spanNotaDos").show(),cargarTiposMemorandumsParaMovilidad(0),cargarGestionesMemorandumsParaMovilidad(0),cargarUnidadesOrganizacionalesParaMovilidad(0,0,0),cargarUbicacionesParaMovilidad(0),cargarCargosParaMovilidad(""),$("#lstTipoMemorandum").change(function(){var i=$("#lstTipoMemorandum").val();if(0!=i){var a=$("#lstTipoMemorandum").val(),e=a.split("-"),d=e[0],o=e[1],r=(e[2],e[3]),t=e[4],s=e[5],n=e[6],l=e[7],v=e[8],c=e[9];1<=o?($("#divFechasFinMovilidad").show(),$("#divHorasFinMovilidad").show(),1==o&&($("#asteriscoFechaFin").html(""),$("#asteriscoFechaFin").append("*"))):($("#divFechasFinMovilidad").hide(),$("#divHorasFinMovilidad").hide(),$("#asteriscoFechaFin").html("")),1<=n?$("#divMotivosMovilidad").show():$("#divMotivosMovilidad").hide(),1<=l?($("#divPaisesMovilidad").show(),cargarPaisesCiudadesParaMovilidad(0,0)):$("#divPaisesMovilidad").hide(),1<=v?$("#divCiudadesMovilidad").show():$("#divCiudadesMovilidad").hide(),1<=c?$("#divLugaresMovilidad").show():$("#divLugaresMovilidad").hide(),1<=r?($("#divCargosMovilidad").show(),2==d?($("#divChkAi").show(),obtieneCargoInmediatoSuperior(x)):($("#txtCargoMovilidad").val(""),$("#divChkAi").hide())):$("#divCargosMovilidad").hide(),1<=t?($("#divGerenciasAdministrativasMovilidad").show(),$("#divDepartamentosAdministrativosMovilidad").show(),$("#divAreasAdministrativasMovilidad").show()):($("#divGerenciasAdministrativasMovilidad").hide(),$("#divDepartamentosAdministrativosMovilidad").hide(),$("#divAreasAdministrativasMovilidad").hide()),1<=s?$("#divUbicacionesMovilidad").show():$("#divUbicacionesMovilidad").hide()}else $("#divCargosMovilidad").hide(),$("#divChkAi").hide(),$("#divMotivosMovilidad").hide(),$("#divPaisesMovilidad").hide(),$("#divCiudadesMovilidad").hide(),$("#divLugaresMovilidad").hide(),$("#divGerenciasAdministrativasMovilidad").hide(),$("#divDepartamentosAdministrativosMovilidad").hide(),$("#divAreasAdministrativasMovilidad").hide(),$("#divUbicacionesMovilidad").hide(),$("#divFechasFinMovilidad").hide(),$("#divHorasFinMovilidad").hide();$("#txtCorrelativoMemorandum").focus()}),$("#lstUbicaciones").change(function(){$("#txtCargoMemorandum").focus()}),$("#txtFechaMem").jqxDateTimeInput({enableBrowserBoundsDetection:!1,disabled:!1,height:24,formatString:"dd-MM-yyyy"});var i=fechaHoy();$("#txtFechaMem").jqxDateTimeInput("setMaxDate",i),$("#txtFechaMem").jqxDateTimeInput("setMinDate",new Date(2014,3,1)),$("#txtFechaIniMovilidad").jqxDateTimeInput({disabled:!1,enableBrowserBoundsDetection:!1,height:24,formatString:"dd-MM-yyyy"}),$("#txtFechaFinMovilidad").jqxDateTimeInput({enableBrowserBoundsDetection:!1,height:24,formatString:"dd-MM-yyyy"}),$("#divCargosMovilidad").hide(),$("#divChkAi").hide(),$("#divMotivosMovilidad").hide(),$("#divPaisesMovilidad").hide(),$("#divCiudadesMovilidad").hide(),$("#divLugaresMovilidad").hide(),$("#divGerenciasAdministrativasMovilidad").hide(),$("#divDepartamentosAdministrativosMovilidad").hide(),$("#divAreasAdministrativasMovilidad").hide(),$("#divUbicacionesMovilidad").hide(),$("#divFechasFinMovilidad").hide(),$("#divHorasFinMovilidad").hide(),$("#txtHoraIniMovilidad").val(""),$("#txtHoraFinMovilidad").val(""),$("#txtObservacionMovilidad").jqxInput({width:300,height:35,placeHolder:"Introduzca sus observaciones."}),$("#popupWindowNuevaMovilidad").jqxWindow("open")}),$("#updaterowbuttonmove").on("click",function(){$("#lstTipoMemorandum").off(),$("#hdnIdRelaboralPorMovilidad").val(x),$("#hdnIdRelaboralMovilidadBaja").val(0),$("#hdnFechaMemMovilidadBaja").val(""),$("#hdnFechaIniMovilidadBaja").val(""),limpiarMensajesErrorPorValidacionMovilidad();var i=$("#jqxgridmovilidad").jqxGrid("getselectedrowindex");if(0<=i){var a=$("#jqxgridmovilidad").jqxGrid("getrowdata",i);if(null!=a){var e=a.id_relaboralmovilidad;if($("#hdnIdRelaboralMovilidadModificar").val(e),$("#hdnIdMemorandumMovilidadModificar").val(a.id_memorandum),$("#divTitleRegistroMovilidad").html(""),$("#divTitleRegistroMovilidad").append("Modificaci&oacute;n Registro de Movilidad de Personal"),$("#spanNotaDos").show(),$("#divTiposMemorandums").show(),$("#divCorrelativosMemorandums").show(),$("#divFechasMemorandums").show(),$("#divCargosMovilidad").show(),$("#divMotivosMovilidad").show(),$("#divPaisesMovilidad").show(),$("#divCiudadesMovilidad").show(),$("#divLugaresMovilidad").show(),$("#divGerenciasAdministrativasMovilidad").show(),$("#divDepartamentosAdministrativosMovilidad").show(),$("#divAreasAdministrativasMovilidad").show(),$("#divUbicacionesMovilidad").show(),$("#divFechasIniMovilidad").show(),$("#divHorasIniMovilidad").show(),1<=a.estado){cargarGestionesMemorandumsParaMovilidad(a.memorandum_gestion),$("#txtCorrelativoMemorandum").val(a.memorandum_correlativo),$("#txtCorrelativoMemorandum").focus(),$("#txtFechaMem").jqxDateTimeInput({value:a.fecha_mem,disabled:!1,enableBrowserBoundsDetection:!1,height:24,formatString:"dd-MM-yyyy"});var d=fechaHoy();$("#txtFechaMem").jqxDateTimeInput("setMaxDate",d),$("#txtFechaMem").jqxDateTimeInput("setMinDate",new Date(2014,3,1)),$("#txtMotivoMovilidad").val(a.motivo),cargarCargosParaMovilidad(""),2==a.id_tipomemorandum&&$("#divChkAi").show(),$("#txtCargoMovilidad").val(a.cargo);var o=a.cargo;if(null!=o&&""!=o){var r=o.search("a.i.");0<r&&$("#chkAi").prop("checked",!0)}cargarUnidadesOrganizacionalesParaMovilidad(a.id_gerencia_administrativa,a.id_departamento_administrativo,a.id_area),cargarUbicacionesParaMovilidad(a.id_ubicacion),cargarPaisesCiudadesParaMovilidad(a.id_pais,a.id_departamento),$("#txtFechaIniMovilidad").jqxDateTimeInput({value:a.fecha_ini,disabled:!1,enableBrowserBoundsDetection:!1,height:24,formatString:"dd-MM-yyyy"}),""!=a.hora_ini?$("#txtHoraIniMovilidad").val(a.hora_ini):$("#txtHoraIniMovilidad").val(""),""!=a.hora_fin?$("#txtHoraFinMovilidad").val(a.hora_fin):$("#txtHoraFinMovilidad").val(""),null!=a.fecha_fin&&""!=a.fecha_fin?$("#txtFechaFinMovilidad").jqxDateTimeInput({value:a.fecha_fin,enableBrowserBoundsDetection:!1,height:24,formatString:"dd-MM-yyyy"}):($("#txtFechaFinMovilidad").jqxDateTimeInput({enableBrowserBoundsDetection:!1,height:24,formatString:"dd-MM-yyyy"}),$("#txtFechaFinMovilidad").val("")),$("#txtObservacionMovilidad").jqxInput({value:a.observacion,width:300,height:35,placeHolder:"Introduzca sus observaciones"}),cargarTiposMemorandumsParaMovilidad(a.id_tipomemorandum);var t=$("#lstTipoMemorandum").val();if("0"!=t){var s=$("#lstTipoMemorandum").val(),n=s.split("-"),t=n[0],l=n[1],v=(n[2],n[3]),c=n[4],m=n[5],h=n[6],M=n[7],u=n[8],p=n[9];1<=l?($("#divFechasFinMovilidad").show(),$("#divHorasFinMovilidad").show(),1==l?($("#asteriscoFechaFin").html(""),$("#asteriscoFechaFin").append("*")):$("#asteriscoFechaFin").html("")):($("#divFechasFinMovilidad").hide(),$("#divHorasFinMovilidad").hide()),1<=h?$("#divMotivosMovilidad").show():$("#divMotivosMovilidad").hide(),1<=M?$("#divPaisesMovilidad").show():$("#divPaisesMovilidad").hide(),1<=u?$("#divCiudadesMovilidad").show():$("#divCiudadesMovilidad").hide(),1<=p?($("#divLugaresMovilidad").show(),$("#txtLugarMovilidad").val(a.lugar)):$("#divLugaresMovilidad").hide(),1<=v?($("#divCargosMovilidad").show(),2==t?$("#divChkAi").show():($("#txtCargoMovilidad").val(""),$("#divChkAi").hide())):$("#divCargosMovilidad").hide(),1<=c?($("#divGerenciasAdministrativasMovilidad").show(),$("#divDepartamentosAdministrativosMovilidad").show(),$("#divAreasAdministrativasMovilidad").show()):($("#divGerenciasAdministrativasMovilidad").hide(),$("#divDepartamentosAdministrativosMovilidad").hide(),$("#divAreasAdministrativasMovilidad").hide()),1<=m?$("#divUbicacionesMovilidad").show():$("#divUbicacionesMovilidad").hide()}$("#lstTipoMemorandum").focus(),$("#lstTipoMemorandum").change(function(){$("#txtCorrelativoMemorandum").focus();var i=$("#lstTipoMemorandum").val();if("0"!=i){var a=$("#lstTipoMemorandum").val(),e=a.split("-"),i=e[0],d=e[1],o=(e[2],e[3]),r=e[4],t=e[5],s=e[6],n=e[7],l=e[8],v=e[9];1<=d?($("#divFechasFinMovilidad").show(),$("#divHorasFinMovilidad").show(),1==d?($("#asteriscoFechaFin").html(""),$("#asteriscoFechaFin").append("*")):$("#asteriscoFechaFin").html("")):($("#divFechasFinMovilidad").hide(),$("#divHorasFinMovilidad").hide()),1<=s?$("#divMotivosMovilidad").show():$("#divMotivosMovilidad").hide(),1<=n?$("#divPaisesMovilidad").show():$("#divPaisesMovilidad").hide(),1<=l?$("#divCiudadesMovilidad").show():$("#divCiudadesMovilidad").hide(),1<=v?$("#divLugaresMovilidad").show():$("#divLugaresMovilidad").hide(),1<=o?($("#divCargosMovilidad").show(),2==i?($("#divChkAi").show(),obtieneCargoInmediatoSuperior(x)):($("#txtCargoMovilidad").val(""),$("#divChkAi").hide())):$("#divCargosMovilidad").hide(),1<=r?($("#divGerenciasAdministrativasMovilidad").show(),$("#divDepartamentosAdministrativosMovilidad").show(),$("#divAreasAdministrativasMovilidad").show()):($("#divGerenciasAdministrativasMovilidad").hide(),$("#divDepartamentosAdministrativosMovilidad").hide(),$("#divAreasAdministrativasMovilidad").hide()),1<=t?$("#divUbicacionesMovilidad").show():$("#divUbicacionesMovilidad").hide()}}),$("#lstUbicaciones").change(function(){$("#txtCargoMemorandum").focus()}),$("#popupWindowNuevaMovilidad").jqxWindow("open")}else{var g="Debe seleccionar un registro con estado ACTIVO para posibilitar la modificaci&oacute;n del registro de movilidad.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(g),$("#divMsjeNotificacionError").jqxNotification("open")}}}else{var g="Debe seleccionar un registro necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(g),$("#divMsjeNotificacionError").jqxNotification("open")}}),$("#deleterowbuttonmove").on("click",function(){$("#hdnIdRelaboralPorMovilidad").val(x),$("#hdnIdMemorandumMovilidadModificar").val(0),limpiarMensajesErrorPorValidacionMovilidad();var i=$("#jqxgridmovilidad").jqxGrid("getselectedrowindex");if(0<=i){var a=$("#jqxgridmovilidad").jqxGrid("getrowdata",i);if(null!=a){var e=a.id_relaboralmovilidad;if($("#divTitleRegistroMovilidad").html(""),$("#divTitleRegistroMovilidad").append("Baja Registro de Movilidad de Personal"),$("#spanNotaDos").hide(),1<=a.estado)$("#hdnIdRelaboralMovilidadBaja").val(e),$("#txtFechaMem").jqxDateTimeInput({disabled:!0,value:a.fecha_mem,enableBrowserBoundsDetection:!1,height:24,formatString:"dd-MM-yyyy"}),$("#txtFechaIniMovilidad").jqxDateTimeInput({disabled:!0,value:a.fecha_ini,enableBrowserBoundsDetection:!1,height:24,formatString:"dd-MM-yyyy"}),""!=a.hora_ini?$("#txtHoraIniMovilidad").val(a.hora_ini):$("#txtHoraIniMovilidad").val(""),$("#txtHoraIniMovilidad").prop("disabled",!0),$("#divTiposMemorandums").hide(),$("#divCorrelativosMemorandums").hide(),$("#divFechasMemorandums").hide(),$("#divCargosMovilidad").hide(),$("#divMotivosMovilidad").hide(),$("#divPaisesMovilidad").hide(),$("#divCiudadesMovilidad").hide(),$("#divLugaresMovilidad").hide(),$("#divGerenciasAdministrativasMovilidad").hide(),$("#divDepartamentosAdministrativosMovilidad").hide(),$("#divAreasAdministrativasMovilidad").hide(),$("#divUbicacionesMovilidad").hide(),$("#divFechasMemorandums").show(),$("#divFechasIniMovilidad").show(),$("#divHorasIniMovilidad").show(),$("#divFechasFinMovilidad").show(),$("#divHorasFinMovilidad").show(),$("#asteriscoFechaFin").html(""),$("#asteriscoFechaFin").append("*"),null!=a.fecha_fin&&""!=a.fecha_fin?$("#txtFechaFinMovilidad").jqxDateTimeInput({value:a.fecha_fin,enableBrowserBoundsDetection:!1,height:24,formatString:"dd-MM-yyyy"}):($("#txtFechaFinMovilidad").jqxDateTimeInput({enableBrowserBoundsDetection:!1,height:24,formatString:"dd-MM-yyyy"}),$("#txtFechaFinMovilidad").val("")),""!=a.hora_fin?$("#txtHoraFinMovilidad").val(a.hora_fin):$("#txtHoraFinMovilidad").val(""),$("#txtObservacionMovilidad").jqxInput({value:a.observacion,width:300,height:35,placeHolder:"Introduzca sus observaciones"}),$("#popupWindowNuevaMovilidad").jqxWindow("open"),$("#txtFechaFinMovilidad").focus();else{$("#divMsjePorError").html(""),$("#divMsjePorError").append("Debe seleccionar un registro con estado ACTIVO para posibilitar la modificaci&oacute;n del registro de movilidad"),$("#divMsjeNotificacionError").jqxNotification("open")}}}else $("#divMsjePorError").html(""),$("#divMsjePorError").append("Debe seleccionar un registro necesariamente."),$("#divMsjeNotificacionError").jqxNotification("open")})},columns:[{text:"Nro.",datafield:"numero",sortable:!1,filterable:!1,editable:!1,groupable:!1,draggable:!1,resizable:!1,width:40,cellsalign:"center",align:"center"},{text:"Memorandum",columntype:"dropdownlist",datafield:"memorandum",width:100,align:"center"},{text:"Tipo",filtertype:"checkedlist",datafield:"tipo_memorandum",width:130,align:"center"},{text:"Estado",filtertype:"checkedlist",datafield:"estado_descripcion",width:100,cellsalign:"center",align:"center",hidden:!1,cellclassname:cellclass},{text:"Gerencia",filtertype:"checkedlist",datafield:"gerencia_administrativa",width:130,align:"center"},{text:"Departamento",filtertype:"checkedlist",datafield:"departamento_administrativo",width:130,align:"center"},{text:"Area",filtertype:"checkedlist",datafield:"area",width:130,align:"center"},{text:"Ubicacion",filtertype:"checkedlist",datafield:"ubicacion",width:100,cellsalign:"center",align:"center"},{text:"Cargo",columntype:"textbox",datafield:"cargo",width:130,cellsalign:"center",align:"center"},{text:"Motivo",columntype:"textbox",datafield:"motivo",width:130,cellsalign:"center",align:"center"},{text:"Lugar",columntype:"textbox",datafield:"lugar",width:130,cellsalign:"center",align:"center"},{text:"Fecha Inicio",datafield:"fecha_ini",filtertype:"range",width:90,cellsalign:"center",cellsformat:"dd-MM-yyyy",align:"center"},{text:"Hora Inicio",filtertype:"checkedlist",datafield:"hora_ini",width:90,cellsalign:"center",cellsformat:"t",align:"center"},{text:"Fecha Fin",datafield:"fecha_fin",filtertype:"range",width:90,cellsalign:"center",cellsformat:"dd-MM-yyyy",align:"center"},{text:"Hora Fin",filtertype:"checkedlist",datafield:"hora_fin",width:90,cellsalign:"center",cellsformat:"t",align:"center"},{text:"Observaciones",columntype:"textbox",datafield:"observacion",width:130,cellsalign:"center",align:"center"}]})}(),$("#jqxgridmovilidad").on("cellendedit",function(i){var a=i.args;$("#cellendeditevent").text("Event Type: cellendedit, Column: "+a.datafield+", Row: "+(1+a.rowindex)+", Value: "+a.value)})}function cargarTiposMemorandumsParaMovilidad(e){var d=0;$.ajax({url:"/relaborales/listtiposmemorandumsmovilidad",type:"POST",datatype:"json",async:!1,cache:!1,success:function(i){var a=jQuery.parseJSON(i);$("#lstTipoMemorandum").html(""),$("#lstTipoMemorandum").append("<option value='0'>Seleccionar...</option>"),0<a.length?($.each(a,function(i,a){e==a.id?$selected="selected":$selected="",$("#lstTipoMemorandum").append("<option value="+a.id_agrupado+" "+$selected+">"+a.tipo_memorandum+"</option>"),d=1}),0==d&&$("#lstTipoMemorandum").prop("disabled","disabled")):$("#lstTipoMemorandum").prop("disabled","disabled")}})}function cargarGestionesMemorandumsParaMovilidad(e){$.ajax({url:"/relaborales/listgestionesmemorandums",type:"POST",datatype:"json",async:!1,cache:!1,success:function(i){var a=jQuery.parseJSON(i);$("#lstGestionMemorandum").html(""),$("#lstGestionMemorandum").append("<option value='0'>Seleccionar...</option>"),0<a.length?$.each(a,function(i,a){e==a.gestion?$selected="selected":$selected="",$("#lstGestionMemorandum").append("<option value="+a.gestion+" "+$selected+">"+a.gestion+"</option>")}):$("#lstGestionMemorandum").prop("disabled","disabled")}})}function cargarUnidadesOrganizacionalesParaMovilidad(i,a,e){var d=new $.jqx.dataAdapter({dataType:"json",async:!1,dataFields:[{name:"unidad_administrativa"},{name:"id"}],url:"/relaborales/listgerencias/"}),o={dataType:"json",async:!1,dataFields:[{name:"padre_id"},{name:"id"},{name:"unidad_administrativa"}],url:"/relaborales/listdepartamentosadministrativos/"},r=new $.jqx.dataAdapter(o),t={dataType:"json",async:!1,dataFields:[{name:"padre_id"},{name:"id"},{name:"unidad_administrativa"}],url:"/relaborales/listareasadministrativas/"},s=new $.jqx.dataAdapter(t);$("#lstGerenciasAdministrativasMovilidad").jqxComboBox({source:d,width:300,height:25,promptText:"Seleccione una gerencia.",displayMember:"unidad_administrativa",valueMember:"id"}),$("#lstDepartamentosAdministrativosMovilidad").jqxComboBox({width:300,height:25,disabled:!0,promptText:"Seleccione Departamento Administrativo.",displayMember:"unidad_administrativa",valueMember:"id"}),$("#lstAreasAdministrativasMovilidad").jqxComboBox({width:300,height:25,disabled:!0,promptText:"Seleccione un Area Administrativa.",displayMember:"unidad_administrativa",valueMember:"id"}),0<i&&($("#lstGerenciasAdministrativasMovilidad").jqxComboBox("selectItem",i),$("#lstDepartamentosAdministrativosMovilidad").jqxComboBox({disabled:!1,selectedIndex:-1}),o.data={padre_id:i},r=new $.jqx.dataAdapter(o),$("#lstDepartamentosAdministrativosMovilidad").jqxComboBox({source:r}),0<a&&($("#lstDepartamentosAdministrativosMovilidad").jqxComboBox("selectItem",a),$("#lstAreasAdministrativasMovilidad").jqxComboBox({disabled:!1,selectedIndex:-1}),t.data={padre_id:a},s=new $.jqx.dataAdapter(t),$("#lstAreasAdministrativasMovilidad").jqxComboBox({source:s}),0<e&&$("#lstAreasAdministrativasMovilidad").jqxComboBox("selectItem",e))),$("#lstGerenciasAdministrativasMovilidad").bind("select",function(i){if(i.args){$("#lstDepartamentosAdministrativosMovilidad").jqxComboBox({disabled:!1,selectedIndex:-1});var a=i.args.item.value;o.data={padre_id:a},r=new $.jqx.dataAdapter(o),$("#lstDepartamentosAdministrativosMovilidad").jqxComboBox({source:r}),$("#lstAreasAdministrativasMovilidad").jqxComboBox({disabled:!1,selectedIndex:-1});a=i.args.item.value;t.data={padre_id:a},s=new $.jqx.dataAdapter(t),$("#lstAreasAdministrativasMovilidad").jqxComboBox({source:s})}}),$("#lstDepartamentosAdministrativosMovilidad").bind("select",function(i){if(i.args){$("#lstAreasAdministrativasMovilidad").jqxComboBox({disabled:!1,selectedIndex:-1});var a=i.args.item.value;t.data={padre_id:a},s=new $.jqx.dataAdapter(t),$("#lstAreasAdministrativasMovilidad").jqxComboBox({source:s})}})}function cargarPaisesCiudadesParaMovilidad(i,a){var e=new $.jqx.dataAdapter({dataType:"json",method:"post",async:!1,dataFields:[{name:"pais"},{name:"id"}],url:"/relaborales/listpaises/"});$("#lstPaisesMovilidad").jqxComboBox({source:e,width:300,height:25,promptText:"Seleccione un país.",displayMember:"pais",valueMember:"id"});var d={dataType:"json",method:"post",async:!1,dataFields:[{name:"pais_id"},{name:"id"},{name:"departamento"}],url:"/relaborales/listdepartamentos/"},o=new $.jqx.dataAdapter(d);$("#lstCiudadesMovilidad").jqxComboBox({width:300,height:25,disabled:!0,promptText:"Seleccione la ciudad.",displayMember:"departamento",valueMember:"id"}),0<i&&($("#lstPaisesMovilidad").jqxComboBox("selectItem",i),$("#lstCiudadesMovilidad").jqxComboBox({disabled:!1,selectedIndex:-1}),d.data={pais_id:i},o=new $.jqx.dataAdapter(d),$("#lstCiudadesMovilidad").jqxComboBox({source:o}),0<a&&$("#lstCiudadesMovilidad").jqxComboBox("selectItem",a)),$("#lstPaisesMovilidad").bind("select",function(i){if(i.args){$("#lstCiudadesMovilidad").jqxComboBox({disabled:!1,selectedIndex:-1});var a=i.args.item.value;d.data={pais_id:a},o=new $.jqx.dataAdapter(d),$("#lstCiudadesMovilidad").jqxComboBox({source:o})}})}function cargarUbicacionesParaMovilidad(i){var a=new $.jqx.dataAdapter({dataType:"json",async:!1,dataFields:[{name:"ubicacion"},{name:"id"}],url:"/relaborales/listubicaciones/"});$("#lstUbicacionesMovilidad").jqxComboBox({source:a,width:300,height:25,promptText:"Seleccione una ubicacion.",displayMember:"ubicacion",valueMember:"id"}),0<i&&$("#lstUbicacionesMovilidad").jqxComboBox("selectItem",i)}function cargarCargosParaMovilidad(i){}function validaFormularioPorRegistroMovilidad(){var i=!0,a="",e=$("#hdnIdRelaboralPorMovilidad").val(),d=($("#hdnIdRelaboralMovilidadModificar").val(),0),o=0,r=0,t=0;$(".msjs-alert").hide(),limpiarMensajesErrorPorValidacionMovilidad();var s=$("#lstTipoMemorandum").val(),n=$("#txtCorrelativoMemorandum").val(),l=$("#lstGestionMemorandum").val(),v=$("#txtFechaMem").jqxDateTimeInput("getText"),c=$("#lstGerenciasAdministrativasMovilidad").val(),m=$("#lstDepartamentosAdministrativosMovilidad").val(),h=(r=$("#lstAreasAdministrativasMovilidad").val(),o=$("#lstUbicacionesMovilidad").val(),$("#txtCargoMovilidad").val());"object"==jQuery.type(h)&&(h=String(h.label));var M=$("#txtMotivoMovilidad").val(),u=$("#lstPaisesMovilidad").val(),p=$("#lstDepartamentosMovilidad").val(),g=$("#txtLugarMovilidad").val(),x=$("#txtFechaIniMovilidad").jqxDateTimeInput("getText"),b=$("#txtHoraIniMovilidad").val(),f=$("#txtFechaFinMovilidad").jqxDateTimeInput("getText"),j=$("#txtHoraFinMovilidad").val();u=parseInt(u),p=parseInt(p),isNaN(u)&&(u=0),isNaN(p)&&(p=0),c=parseInt(c),m=parseInt(m),r=parseInt(r),o=parseInt(o),null!=c&&null!=c&&(1,isNaN(c)||(d=c),isNaN(m)||(d=m));var F=null;if(e<=0){i=!1;a="Existe un error en la especificación del registro de relación laboral. Comuniquese con el Administrador del Sistema.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(a),$("#divMsjeNotificacionError").jqxNotification("open")}if(0==s){i=!1;a="Debe introducir el tipo de Memor&aacute;ndum necesariamente.";$("#divTiposMemorandums").addClass("has-error"),$("#helpErrorTiposMemorandums").html(a),null==F&&(F=$("#lstTipoMemorandum"))}else{var y=$("#lstTipoMemorandum").val().split("-"),w=y[1],C=(y[2],y[3]),A=y[4],I=(y[5],y[6]),_=(y[7],y[8],y[9]);if(1==w&&(t=1),1==w&&""==f){i=!1;a="Debe introducir la fecha de finalizaci&oacute;n de aplicaci&oacute;n de la movilidad de personal necesariamente.";$("#divFechasFinMovilidad").show(),$("#divFechasFinMovilidad").addClass("has-error"),$("#helpErrorFechasFinMovilidad").html(a),null==F&&(F=$("#txtFechaFinMovilidad"))}if(""!=b&&""==x){i=!1;a="Si desea registrar una hora de inicio debe especificar la fecha de inicio necesariamente.";$("#divHorasIniMovilidad").show(),$("#divHorasIniMovilidad").addClass("has-error"),$("#helpErrorHorasIniMovilidad").html(a),null==F&&(F=$("#txtHoraIniMovilidad"))}if(""!=j&&""==f){i=!1;a="Si desea registrar una hora de finalizaci&oacute;n debe especificar la fecha de finalizaci&oacute;n necesariamente.";$("#divHorasFinMovilidad").show(),$("#divHorasFinMovilidad").addClass("has-error"),$("#helpErrorHorasFinMovilidad").html(a),null==F&&(F=$("#txtHoraFinMovilidad"))}if(1==C&&""==h){i=!1;a="Debe introducir la asignaci&oacute;n del cargo necesariamente.";$("#divCargosMovilidad").addClass("has-error"),$("#helpErrorCargosMovilidad").html(a),null==F&&(F=$("#txtCargoMovilidad"))}if(1==A&&0==d){i=!1;a="Debe seleccionar una Gerencia y/o Departamento para el registro requerido.";$("#divGerenciasAdministrativasMovilidad").addClass("has-error"),$("#helpErrorGerenciasAdministrativasMovilidad").html(a),null==F&&(F=$("#lstGerenciasAdministrativasMovilidad"))}if(1==I&&""==M){i=!1;a="Debe registrar un motivo para la designaci&oacute;n.";$("#divMotivosMovilidad").addClass("has-error"),$("#helpErrorMotivosMovilidad").html(a),null==F&&(F=$("#txtMotivoMovilidad"))}if(1==_&&""==g){a="Debe registrar un lugar para la designaci&oacute;n.";$("#divLugarMovilidad").addClass("has-error"),$("#helpErrorLugarMovilidad").html(a),null==F&&(F=$("#txtLugarMovilidad"))}}if(""==n||0==l){i=!1;a="";$("#divCorrelativosMemorandums").addClass("has-error"),""==n&&(a="Debe introducir el correlativo del Memor&aacute;ndum necesariamente.",null==F&&(F=$("#txtCorrelativoMemorandum"))),0==l&&(""!=a&&(a+="<br>"),a+="Debe seleccionar la gesti&oacute;n del memor&aacute;ndum necesariamente.",null==F&&(F=$("#lstGestionMemorandum"))),$("#helpErrorCorrelativosMemorandums").html(a)}if(""==v){i=!1;a="Debe introducir la fecha de emisi&oacute;n del memor&aacute;ndum necesariamente.";$("#divFechasMemorandums").addClass("has-error"),$("#helpErrorFechasMemorandums").html(a),null==F&&(F=$("#txtFechaMem"))}if(""==x){i=!1;a="Debe introducir la fecha de inicio de aplicaci&oacute;n de la movilidad de personal necesariamente.";$("#divFechasIniMovilidad").addClass("has-error"),$("#helpErrorFechasIniMovilidad").html(a),null==F&&(F=$("#txtFechaIniMovilidad"))}return procesaTextoAFecha(x,"-")<procesaTextoAFecha(v,"-")&&(i=!1,a="La fecha de inicio debe ser igual o superior a la fecha del memor&aacute;ndum.",$("#divFechasIniMovilidad").addClass("has-error"),$("#divFechasMemorandums").addClass("has-error"),$("#helpErrorFechasIniMovilidad").html(a),$("#helpErrorFechasMemorandums").html(a),null==F&&(F=$("#txtFechaIniMovilidad"))),1==t&&procesaTextoAFecha(f,"-")<procesaTextoAFecha(x,"-")&&(i=!1,a="La fecha de finalizaci&oacute;n debe ser igual o superior a la fecha de inicio.",$("#divFechasIniMovilidad").addClass("has-error"),$("#divFechasFinMovilidad").addClass("has-error"),$("#helpErrorFechasIniMovilidad").html(a),$("#helpErrorFechasFinMovilidad").html(a),null==F&&(F=$("#txtFechaIniMovilidad"))),null!=F&&F.focus(),i}function validaFormularioPorBajaRegistroMovilidad(){var i=!0,a="",e=$("#hdnIdRelaboralPorMovilidad").val();$("#hdnIdRelaboralMovilidadBaja").val();$(".msjs-alert").hide(),limpiarMensajesErrorPorValidacionMovilidad();var d=$("#txtFechaMem").val(),o=$("#txtFechaIniMovilidad").val(),r=$("#txtFechaFinMovilidad").jqxDateTimeInput("getText"),t=null;if(e<=0){i=!1;a="Existe un error en la especificación del registro de relación laboral. Comuniquese con el Administrador del Sistema.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(a),$("#divMsjeNotificacionError").jqxNotification("open")}if(""==r){i=!1;a="Debe introducir la fecha de finalizaci&oacute;n de aplicaci&oacute;n de la movilidad de personal necesariamente.";$("#divFechasFinMovilidad").show(),$("#divFechasFinMovilidad").addClass("has-error"),$("#helpErrorFechasFinMovilidad").html(a),null==t&&(t=$("#txtFechaFinMovilidad"))}else procesaTextoAFecha(r,"-")<procesaTextoAFecha(d,"-")&&(i=!1,a="La fecha de inicio debe ser igual o superior a la fecha del memor&aacute;ndum.",$("#divFechasFinMovilidad").addClass("has-error"),$("#helpErrorFechasFinMovilidad").html(a),null==t&&(t=$("#txtFechaFinMovilidad"))),procesaTextoAFecha(r,"-")<procesaTextoAFecha(o,"-")&&(i=!1,a="La fecha de finalizaci&oacute;n debe ser igual o superior a la fecha de inicio.",$("#divFechasFinMovilidad").addClass("has-error"),$("#helpErrorFechasFinMovilidad").html(a),null==t&&(t=$("#txtFechaFinMovilidad")));return null!=t&&t.focus(),i}function limpiarMensajesErrorPorValidacionMovilidad(){$("#divTiposMemorandums").removeClass("has-error"),$("#divFechasMemorandums").removeClass("has-error"),$("#divCorrelativosMemorandums").removeClass("has-error"),$("#divGerenciasAdministrativasMovilidad").removeClass("has-error"),$("#divDepartamentosAdministrativosMovilidad").removeClass("has-error"),$("#divAreasAdministrativasMovilidad").removeClass("has-error"),$("#divUbicacionesMovilidad").removeClass("has-error"),$("#divLugaresMovilidad").removeClass("has-error"),$("#divCargosMovilidad").removeClass("has-error"),$("#divFechasIniMovilidad").removeClass("has-error"),$("#divFechasFinMovilidad").removeClass("has-error"),$("#helpErrorTiposMemorandums").html(""),$("#helpErrorCorrelativosMemorandums").html(""),$("#helpErrorFechasMemorandums").html(""),$("#helpErrorGerenciasAdministrativasMovilidad").html(""),$("#helpErrorDepartamentosAdministrativosMovilidad").html(""),$("#helpErrorAreasAdministrativasMovilidad").html(""),$("#helpErrorUbicacionesMovilidad").html(""),$("#helpErrorLugaresMovilidad").html(""),$("#helpErrorCargosMovilidad").html(""),$("#helpErrorFechasIniMovilidad").html(""),$("#helpErrorFechasFinMovilidad").html("")}function guardarRegistroMovilidad(){var e=!1,i=$("#hdnIdRelaboralPorMovilidad").val(),a=$("#hdnIdRelaboralMovilidadModificar").val(),d=0,o=0,r=0,t=0,s=0;$("#chkAi").is(":checked")&&(s=1);var n=$("#lstTipoMemorandum").val().split("-"),l=n[0],v=n[1],c=(n[2],n[3],n[4],n[5],$("#txtCorrelativoMemorandum").val()),m=$("#lstGestionMemorandum").val(),h=$("#txtFechaMem").jqxDateTimeInput("getText"),M=$("#lstGerenciasAdministrativasMovilidad").val(),u=$("#lstDepartamentosAdministrativosMovilidad").val(),p=(t=$("#lstAreasAdministrativasMovilidad").val(),r=$("#lstUbicacionesMovilidad").val(),$("#txtCargoMovilidad").val());if("object"==jQuery.type(p)&&(p=String(p.label)),""!=(p+="")&&1==s)p.indexOf("a.i.")<0&&(p+=" a.i.");else if(""!=p&&0==s){0<p.indexOf("a.i.")&&p.replace("a.i.","")}var g=$("#txtMotivoMovilidad").val(),x=$("#lstPaisesMovilidad").val(),b=$("#lstCiudadesMovilidad").val(),f=$("#txtLugarMovilidad").val(),j=$("#txtFechaIniMovilidad").jqxDateTimeInput("getText"),F=$("#txtHoraIniMovilidad").val(),y=$("#txtFechaFinMovilidad").jqxDateTimeInput("getText"),w=$("#txtHoraFinMovilidad").val(),C=$("#txtObservacionMovilidad").val();return x=parseInt(x),b=parseInt(b),isNaN(x)&&(x=0),isNaN(b)&&(b=0),M=parseInt(M),u=parseInt(u),t=parseInt(t),r=parseInt(r),null!=M&&null!=M&&(isNaN(M)||(o=M),isNaN(u)||(o=u)),0==o&&0<$("#hdnIdOrganigramaPorSeleccionCargoSuperior").val()&&(o=$("#hdnIdOrganigramaPorSeleccionCargoSuperior").val()),isNaN(t)&&(t=0),isNaN(r)?r=0<$("#hdnIdOrganigramaPorSeleccionCargoSuperior").val()?-1:0:(r=r,1),0<a&&(d=$("#hdnIdMemorandumMovilidadModificar").val()),0==v&&(y=""),0<i&&0<l&&""!=c&&0<m&&""!=h&&""!=j&&$.ajax({url:"/relaborales/savemovilidad/",type:"POST",datatype:"json",async:!1,cache:!1,data:{id:a,id_relaboral:i,id_da:0,id_regional:0,id_organigrama:o,id_area:t,id_ubicacion:r,cargo:p,id_evento:0,motivo:g,id_pais:x,id_departamento:b,lugar:f,id_memorandum:d,id_tipomemorandum:l,correlativo:c,gestion:m,fecha_mem:h,contenido:"",fecha_ini:j,hora_ini:F,fecha_fin:y,hora_fin:w,observacion:C},success:function(i){var a=jQuery.parseJSON(i);$(".msjes").hide(),1==a.result?(e=!0,$("#jqxgridmovilidad").jqxGrid("updatebounddata"),$("#divMsjePorSuccess").html(""),$("#divMsjePorSuccess").append(a.msj),$("#divMsjeNotificacionSuccess").jqxNotification("open"),$("#jqxgrid").jqxGrid("beginupdate")):0==a.result?($("#divMsjePorWarning").html(""),$("#divMsjePorWarning").append(a.msj),$("#divMsjeNotificacionWarning").jqxNotification("open")):($("#divMsjePorError").html(""),$("#divMsjePorError").append(a.msj),$("#divMsjeNotificacionError").jqxNotification("open"))},error:function(){$("#divMsjePorError").html(""),$("#divMsjePorError").append("Se ha producido un error Inesperado"),$("#divMsjeNotificacionError").jqxNotification("open")}}),e}function bajaRegistroMovilidad(){var e=!1,i=$("#hdnIdRelaboralPorMovilidad").val(),a=$("#hdnIdRelaboralMovilidadBaja").val(),d=$("#txtFechaFinMovilidad").jqxDateTimeInput("getText"),o=$("#txtHoraFinMovilidad").val(),r=$("#txtObservacionMovilidad").val();return 0<i&&0<a&&""!=d&&$.ajax({url:"/relaborales/downmovilidad/",type:"POST",datatype:"json",async:!1,cache:!1,data:{id:a,id_relaboral:i,fecha_fin:d,hora_fin:o,observacion:r},success:function(i){var a=jQuery.parseJSON(i);$(".msjes").hide(),1==a.result?(e=!0,$("#jqxgridmovilidad").jqxGrid("updatebounddata"),$("#divMsjePorSuccess").html(""),$("#divMsjePorSuccess").append(a.msj),$("#divMsjeNotificacionSuccess").jqxNotification("open")):0==a.result?($("#divMsjePorWarning").html(""),$("#divMsjePorWarning").append(a.msj),$("#divMsjeNotificacionWarning").jqxNotification("open")):($("#divMsjePorError").html(""),$("#divMsjePorError").append(a.msj),$("#divMsjeNotificacionError").jqxNotification("open"))},error:function(){alert("Se ha producido un error Inesperado")}}),e}function obtieneCargoInmediatoSuperior(i){if(0<i){var a=$.ajax({url:"/relaborales/getcargosuperiorrelaboral",type:"POST",datatype:"json",async:!1,cache:!1,data:{id:i},success:function(i){}}).responseText,e=jQuery.parseJSON(a);null!=e.cargo&&""!=e.cargo&&(confirm("Desea usar el cargo '"+e.cargo+"' del inmediato superior \nen la asignacion de funciones?")?($("#txtCargoMovilidad").val(e.cargo+" a.i."),$("#chkAi").prop("checked","checked"),$("#hdnIdOrganigramaPorSeleccionCargoSuperior").val(e.organigrama_id)):($("#txtCargoMovilidad").val(""),$("#chkAi").attr("checked",!1)))}}