function obtenerListaExcepcionesParaCalendario(o,a,r,e,i){var n=obtenerListadoFechasEnCalendario(o.id_relaboral,a,r,e,i),x=[];return $.each(n,function(o,a){var r=a.fecha.split("-"),e=a.hora_ini.split(":"),i=a.hora_fin.split(":"),n=r[0],c=r[1]-1,t=r[2],l=e[0],_=e[1],s=(e[2],a.fecha.split("-")),d=s[0],h=s[1]-1,p=s[2],b=i[0],f=i[1],u=(i[2],"(e) "+a.excepcion);1==a.horario&&(u+=" ["+a.hora_ini+" a "+a.hora_fin+"]"),u+="\n ESTADO: "+a.controlexcepcion_estado_descripcion,x.push({id:0,className:"excepciones",title:u,start:new Date(n,c,t,l,_),end:new Date(d,h,p,b,f),allDay:!0,color:a.color,textColor:"#000",editable:!1,borderColor:"#000",horas_laborales:0,dias_laborales:0,hora_entrada:a.hora_ini,hora_salida:a.hora_fin})}),x}function obtenerListadoFechasEnCalendario(o,a,r,e,i){var n=[];return $.ajax({url:"/controlexcepciones/listporrelaboralyrango",type:"POST",datatype:"json",cache:!1,async:!1,data:{id_relaboral:o,fecha_ini:e,fecha_fin:i},success:function(o){var a=jQuery.parseJSON(o);0<a.length&&$.each(a,function(o,a){n.push({fecha:a.fecha,dia:a.dia,dia_nombre:a.dia_nombre,dia_nombre_abr_ing:a.dia_nombre_abr_ing,id_controlexcepcion:a.id_controlexcepcion,id_relaboral:a.id_relaboral,fecha_ini:a.fecha_ini,hora_ini:a.hora_ini,fecha_fin:a.fecha_fin,hora_fin:a.hora_fin,justificacion:a.justificacion,controlexcepcion_observacion:a.controlexcepcion_observacion,controlexcepcion_estado:a.controlexcepcion_estado,controlexcepcion_estado_descripcion:a.controlexcepcion_estado_descripcion,excepcion_id:a.excepcion_id,excepcion:a.excepcion,tipoexcepcion_id:a.tipoexcepcion_id,tipo_excepcion:a.tipo_excepcion,codigo:a.codigo,color:a.color,compensatoria:a.compensatoria,compensatoria_descripcion:a.compensatoria_descripcion,genero_id:a.genero_id,genero:a.genero,cantidad:a.cantidad,unidad:a.unidad,fraccionamiento:a.fraccionamiento,frecuencia_descripcion:a.frecuencia_descripcion,redondeo:a.redondeo,redondeo_descripcion:a.redondeo_descripcion,horario:a.horario,horario_descripcion:a.horario_descripcion})})}}),n}function cargarModalHorario(o){return 0<o&&($.ajax({url:"/horarioslaborales/getone",type:"POST",datatype:"json",async:!1,cache:!1,data:{id:o},success:function(o){var a=jQuery.parseJSON(o);0<a.length&&$.each(a,function(o,a){$("#txtNombreHorario").val(a.nombre),$("#txtNombreAlternativoHorario").val(a.nombre_alternativo),$("#txtColorHorario").val(a.color),$("#txtColorHorario").css({"background-color":a.color,color:a.color}),$("#txtHoraEntHorario").val(a.hora_entrada),$("#txtHoraSalHorario").val(a.hora_salida),$("#txtHoraInicioRangoEnt").val(a.hora_inicio_rango_ent),$("#txtHoraFinalizacionRangoEnt").val(a.hora_final_rango_ent),$("#txtHoraInicioRangoSal").val(a.hora_inicio_rango_sal),$("#txtHoraFinalizacionRangoSal").val(a.hora_final_rango_sal),1===a.agrupador?$("#chkPermitirCruce").prop("checked",!0):$("#chkPermitirCruce").prop("checked",!1),$("#txtObservacion").val(a.observacion);var r=a.hora_entrada,e=a.hora_salida;""==r&&(r="00:00:00"),""==e&&(e="00:00:00"),$("#txtHorasLaborales").val(a.horas_laborales)})}}),!0)}function obtenerDatosHorario(o){var r=[];return 0<o&&$.ajax({url:"/horarioslaborales/getone",type:"POST",datatype:"json",async:!1,cache:!1,data:{id:o},success:function(o){var a=jQuery.parseJSON(o);0<a.length&&$.each(a,function(o,a){r.push({nombre:a.nombre,nombre_alternativo:a.nombre_alternativo,color:a.color,hora_entrada:a.hora_entrada,hora_salida:a.hora_salida,hora_inicio_rango_ent:a.hora_inicio_rango_ent,hora_final_rango_ent:a.hora_final_rango_ent,hora_inicio_rango_sal:a.hora_inicio_rango_sal,observacion:a.observacion,horas_laborales:a.horas_laborales,dias_laborales:a.dias_laborales})})}}),r}