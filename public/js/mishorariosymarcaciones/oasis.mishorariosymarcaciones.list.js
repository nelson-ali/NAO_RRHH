function definirGrillaParaListaControlMarcacionesDebidasYRealizadasPorIdRelaboralGestionMes(o,s,p,m){var e={datatype:"json",datafields:[{name:"nro_row",type:"integer"},{name:"id",type:"integer"},{name:"relaboral_id",type:"integer"},{name:"gestion",type:"integer"},{name:"mes",type:"integer"},{name:"mes_nombre",type:"string"},{name:"turno",type:"integer"},{name:"grupo",type:"integer"},{name:"clasemarcacion",type:"string"},{name:"clasemarcacion_descripcion",type:"string"},{name:"modalidadmarcacion_id",type:"integer"},{name:"modalidad_marcacion",type:"string"},{name:"d1",type:"time"},{name:"calendariolaboral1_id",type:"integer"},{name:"estado1",type:"integer"},{name:"estado1_descripcion",type:"string"},{name:"d2",type:"string"},{name:"calendariolaboral2_id",type:"integer"},{name:"estado2",type:"integer"},{name:"estado2_descripcion",type:"string"},{name:"d3",type:"time"},{name:"calendariolaboral3_id",type:"integer"},{name:"estado3",type:"integer"},{name:"estado3_descripcion",type:"string"},{name:"d4",type:"time"},{name:"calendariolaboral4_id",type:"integer"},{name:"estado4",type:"integer"},{name:"estado4_descripcion",type:"string"},{name:"d5",type:"time"},{name:"calendariolaboral5_id",type:"integer"},{name:"estado5",type:"integer"},{name:"estado5_descripcion",type:"string"},{name:"d6",type:"time"},{name:"calendariolaboral6_id",type:"integer"},{name:"estado6",type:"integer"},{name:"estado6_descripcion",type:"string"},{name:"d7",type:"time"},{name:"calendariolaboral7_id",type:"integer"},{name:"estado7",type:"integer"},{name:"estado7_descripcion",type:"string"},{name:"d8",type:"time"},{name:"calendariolaboral8_id",type:"integer"},{name:"estado8",type:"integer"},{name:"estado8_descripcion",type:"string"},{name:"d9",type:"time"},{name:"calendariolaboral9_id",type:"integer"},{name:"estado9",type:"integer"},{name:"estado9_descripcion",type:"string"},{name:"d10",type:"time"},{name:"calendariolaboral10_id",type:"integer"},{name:"estado10",type:"integer"},{name:"estado10_descripcion",type:"string"},{name:"d11",type:"time"},{name:"calendariolaboral11_id",type:"integer"},{name:"estado11",type:"integer"},{name:"estado11_descripcion",type:"string"},{name:"d12",type:"time"},{name:"calendariolaboral12_id",type:"integer"},{name:"estado12",type:"integer"},{name:"estado12_descripcion",type:"string"},{name:"d13",type:"time"},{name:"calendariolaboral13_id",type:"integer"},{name:"estado13",type:"integer"},{name:"estado13_descripcion",type:"string"},{name:"d14",type:"time"},{name:"calendariolaboral14_id",type:"integer"},{name:"estado14",type:"integer"},{name:"estado14_descripcion",type:"string"},{name:"d15",type:"time"},{name:"calendariolaboral15_id",type:"integer"},{name:"estado15",type:"integer"},{name:"estado15_descripcion",type:"string"},{name:"d16",type:"time"},{name:"calendariolaboral16_id",type:"integer"},{name:"estado16",type:"integer"},{name:"estado16_descripcion",type:"string"},{name:"d17",type:"time"},{name:"calendariolaboral17_id",type:"integer"},{name:"estado17",type:"integer"},{name:"estado17_descripcion",type:"string"},{name:"d18",type:"time"},{name:"calendariolaboral18_id",type:"integer"},{name:"estado18",type:"integer"},{name:"estado18_descripcion",type:"string"},{name:"d19",type:"time"},{name:"calendariolaboral19_id",type:"integer"},{name:"estado19",type:"integer"},{name:"estado19_descripcion",type:"string"},{name:"d20",type:"time"},{name:"calendariolaboral20_id",type:"integer"},{name:"estado20",type:"integer"},{name:"estado20_descripcion",type:"string"},{name:"d21",type:"time"},{name:"calendariolaboral21_id",type:"integer"},{name:"estado21",type:"integer"},{name:"estado21_descripcion",type:"string"},{name:"d22",type:"time"},{name:"calendariolaboral22_id",type:"integer"},{name:"estado22",type:"integer"},{name:"estado22_descripcion",type:"string"},{name:"d23",type:"time"},{name:"calendariolaboral23_id",type:"integer"},{name:"estado23",type:"integer"},{name:"estado23_descripcion",type:"string"},{name:"d24",type:"time"},{name:"calendariolaboral24_id",type:"integer"},{name:"estado24",type:"integer"},{name:"estado25_descripcion",type:"string"},{name:"d25",type:"time"},{name:"calendariolaboral25_id",type:"integer"},{name:"estado25",type:"integer"},{name:"estado25_descripcion",type:"string"},{name:"d26",type:"time"},{name:"calendariolaboral26_id",type:"integer"},{name:"estado26",type:"integer"},{name:"estado26_descripcion",type:"string"},{name:"d27",type:"time"},{name:"calendariolaboral1_id",type:"integer"},{name:"estado27",type:"integer"},{name:"estado27_descripcion",type:"string"},{name:"d28",type:"time"},{name:"calendariolaboral28_id",type:"integer"},{name:"estado28",type:"integer"},{name:"estado28_descripcion",type:"string"},{name:"d29",type:"time"},{name:"calendariolaboral29_id",type:"integer"},{name:"estado29",type:"integer"},{name:"estado29_descripcion",type:"string"},{name:"d30",type:"time"},{name:"calendariolaboral30_id",type:"integer"},{name:"estado30",type:"integer"},{name:"estado30_descripcion",type:"string"},{name:"d31",type:"time"},{name:"calendariolaboral31_id",type:"integer"},{name:"estado31",type:"integer"},{name:"estado31_descripcion",type:"string"},{name:"ultimo_dia",type:"integer"},{name:"atrasos",type:"numeric"},{name:"faltas",type:"numeric"},{name:"abandono",type:"numeric"},{name:"omision",type:"numeric"},{name:"lsgh",type:"numeric"},{name:"compensacion",type:"numeric"},{name:"observacion",type:"string"},{name:"estado",type:"numeric"},{name:"estado_descripcion",type:"string"},{name:"agrupador",type:"numeric"}],url:"/horariosymarcaciones/listporrelaboralgestionmes?id="+o,cache:!1},a=new $.jqx.dataAdapter(e);!function(){var e=prepareSimulator("grid");$("#divGridControlMarcaciones").jqxGrid({theme:e,width:"100%",height:"100%",source:a,sortable:!0,altRows:!0,groupable:!0,columnsresize:!0,pageable:!0,pagerMode:"advanced",showfilterrow:!0,filterable:!0,showtoolbar:!0,autorowheight:!0,rendertoolbar:function(e){var a=$("<div></div>");e.append(a),a.append("<button title='Generar matriz de marcaciones debidas en un mes para la persona.' id='marcaciondebidarowbutton' class='btn btn-sm btn-primary' type='button'><i class='fa fa-flag-o fa-2x text-info' title='Generar matriz de marcaciones debidas en el mes para la persona.'/></i></button>"),a.append("<button title='Generar matriz de marcaciones realizadas en un mes para la persona.' id='marcacionrealizadarowbutton' class='btn btn-sm btn-primary' type='button'><i class='fa fa-flag fa-2x text-info' title='Generar matriz de marcaciones realizadas en el mes para la persona.'/></i></button>"),a.append("<button title='Ver calendario de turnos y permisos de manera global para la persona.' id='turnexceptrowbutton' class='btn btn-sm btn-primary' type='button'><i class='fa fa-calendar fa-2x text-info' title='Vista Turnos Laborales por Perfil.'/></i></button>"),$("#marcaciondebidarowbutton").jqxButton(),$("#marcacionrealizadarowbutton").jqxButton(),$("#turnexceptrowbutton").jqxButton(),$("#hdnIdControlExcepcionEdit").val(0),$("#hdnIdRelaboralNew").val(0),$("#hdnIdRelaboralEdit").val(0),$("#marcaciondebidarowbutton").off(),$("#marcaciondebidarowbutton").on("click",function(){$("#popupGeneradorMarcacionDebida").modal("show"),$("#tituloModalGeneradorMarcacion").html("Marcaci&oacute;n Prevista"),$("#divPanelHeadingModal").html("LISTADO DE MARCACIONES PREVISTAS POR MES"),cargarHorariosMarcacionesGenerados(o,"H")}),$("#marcacionrealizadarowbutton").off(),$("#marcacionrealizadarowbutton").on("click",function(){$("#popupGeneradorMarcacionDebida").modal("show"),$("#tituloModalGeneradorMarcacion").html("Marcaci&oacute;n Efectivas"),$("#divPanelHeadingModal").html("LISTADO DE MARCACIONES EFECTIVAS POR MES"),cargarHorariosMarcacionesGeneradosCruzada(o,"M","H")}),$("#turnexceptrowbutton").off(),$("#turnexceptrowbutton").on("click",function(){var e=$("#divGridControlMarcaciones").jqxGrid("getselectedrowindex");if(0<=e){var a=$("#divGridControlMarcaciones").jqxGrid("getrowdata",e);if(null!=a)if(null!=a.gestion&&null!=a.gestion){$("#divTabControlMarcaciones").jqxTabs("enableAt",0),$("#divTabControlMarcaciones").jqxTabs("enableAt",3),$("#divTabControlMarcaciones").jqxTabs({selectedItem:3});$("#spanPrefijoCalendarioLaboral").html(""),$("#spanSufijoCalendarioLaboral").html(" Vrs. Calendario de Excepciones (Individual)");var t=a.mes-1,i=a.gestion,n=obtenerTodosHorariosRegistradosEnCalendarioRelaboralParaVerAsignaciones(o,0,2,!1,"","",0);$("#calendar").html("");var r=iniciarCalendarioLaboralPorRelaboralTurnosYExcepcionesParaVerAsignacionesPorPersona(dataRecordRelaboral,o,5,0,2,n,i,t,1);switch(sumarTotalHorasPorSemana(r),$("#tabFichaPersonalTurnAndExcept").jqxTabs({theme:"oasis",width:"100%",height:"100%",position:"top"}),$("#tabFichaPersonalTurnAndExcept").jqxTabs({theme:"oasis",width:"100%",height:"100%",position:"top"}),$("#tabFichaPersonalTurnAndExcept").jqxTabs({selectedItem:0}),$(".ddNombresTurnAndExcept").html(dataRecordRelaboral.nombres+"&nbsp;"),$(".ddCIAndNumComplementoExpdTurnAndExcept").html(dataRecordRelaboral.ci+dataRecordRelaboral.num_complemento+" "+dataRecordRelaboral.expd+"&nbsp;"),$("#ddCargoTurnAndExcept").html(dataRecordRelaboral.cargo+"&nbsp;"),$("#ddProcesoTurnAndExcept").html(dataRecordRelaboral.proceso_codigo+"&nbsp;"),$("#ddFinanciamientoTurnAndExcept").html(dataRecordRelaboral.condicion+" (Partida "+dataRecordRelaboral.partida+")"),$("#ddGerenciaTurnAndExcept").html(dataRecordRelaboral.gerencia_administrativa+"&nbsp;"),""!=dataRecordRelaboral.departamento_administrativo&&null!=dataRecordRelaboral.departamento_administrativo?($("#ddDepartamentoTurnAndExcept").show(),$("#dtDepartamentoTurnAndExcept").show(),$("#ddDepartamentoTurnAndExcept").html(dataRecordRelaboral.departamento_administrativo+"&nbsp;")):($("#dtDepartamentoTurnAndExcept").hide(),$("#ddDepartamentoTurnAndExcept").hide()),$("#ddUbicacionTurnAndExcept").html(dataRecordRelaboral.ubicacion+"&nbsp;"),dataRecordRelaboral.tiene_item){case 1:$("#dtItemTurnAndExcept").show(),$("#ddItemTurnAndExcept").show(),$("#ddItemTurnAndExcept").html(dataRecordRelaboral.item+"&nbsp;");break;case 0:$("#dtItemTurnAndExcept").hide(),$("#ddItemTurnAndExcept").hide()}if($("#ddNivelSalarialTurnAndExcept").html(dataRecordRelaboral.nivelsalarial+"&nbsp;"),$("#ddHaberTurnAndExcept").html(dataRecordRelaboral.sueldo+"&nbsp;"),$("#ddFechaIngTurnAndExcept").html(fechaConvertirAFormato(dataRecordRelaboral.fecha_ing,"-")+"&nbsp;"),null!=dataRecordRelaboral.fecha_incor){var d=fechaConvertirAFormato(dataRecordRelaboral.fecha_incor,"-");$("#dtFechaIncorTurnAndExcept").show(),$("#ddFechaIncorTurnAndExcept").show(),$("#ddFechaIncorTurnAndExcept").html(d+"&nbsp;")}else $("#dtFechaIncorTurnAndExcept").hide(),$("#ddFechaIncorTurnAndExcept").hide();switch($("#ddFechaIniTurnAndExcept").html(fechaConvertirAFormato(dataRecordRelaboral.fecha_ini,"-")+"&nbsp;"),dataRecordRelaboral.tiene_item){case 1:$("#dtFechaFinTurnAndExcept").hide(),$("#ddFechaFinTurnAndExcept").hide();break;case 0:$("#dtFechaFinTurnAndExcept").show(),$("#ddFechaFinTurnAndExcept").show(),$("#ddFechaFinTurnAndExcept").html(fechaConvertirAFormato(dataRecordRelaboral.fecha_fin,"-")+"&nbsp;")}$("#ddEstadoDescripcionTurnAndExcept").html(dataRecordRelaboral.estado_descripcion+"&nbsp;"),0==dataRecordRelaboral.estado?($("#dtFechaBajaTurnAndExcept").show(),$("#ddFechaBajaTurnAndExcept").show(),$("#ddFechaBajaTurnAndExcept").html(fechaConvertirAFormato(dataRecordRelaboral.fecha_baja,"-")+"&nbsp;"),$("#dtMotivoBajaTurnAndExcept").show(),$("#ddMotivoBajaTurnAndExcept").show(),$("#ddMotivoBajaTurnAndExcept").html(fechaConvertirAFormato(dataRecordRelaboral.motivo_baja,"-")+"&nbsp;")):($("#dtFechaBajaTurnAndExcept").hide(),$("#ddFechaBajaTurnAndExcept").hide(),$("#dtMotivoBajaTurnAndExcept").hide(),$("#ddMotivoBajaTurnAndExcept").hide()),$("#tabFichaPersonalTurnAndExcept").jqxTabs({selectedItem:0}),$("#ddNombresTurnAndExcept").html(p);var l=obtenerRutaFoto(m,"");$("#imgFotoPerfilTurnAndExceptRelaboral").attr("src",l),$("#imgFotoPerfilContactoPerTurnAndExcept").attr("src",l),$("#imgFotoPerfilContactoInstTurnAndExcept").attr("src",l),$("#imgFotoPerfilTurnAndExcept").attr("src",l),cargarPersonasContactosGestionIdeas(2,s),$("#hdnIdRelaboralVistaTurnAndExcept").val(o),$("#hdnSwPrimeraVistaHistorialTurnAndExcept").val(0)}else{var c="Para acceder a la vista del calendario con las marcaciones y excepciones debidas debe seleccionar un registro necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(c),$("#divMsjeNotificacionError").jqxNotification("open")}}else{var c="Para acceder a la vista del calendario con las marcaciones y excepciones debidas debe seleccionar un registro necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(c),$("#divMsjeNotificacionError").jqxNotification("open")}})},columns:[{text:"Nro.",filterable:!1,columntype:"number",width:40,cellsalign:"center",align:"center",cellsrenderer:rownumberrenderer},{text:"Estado",filtertype:"checkedlist",datafield:"estado_descripcion",width:100,cellsalign:"center",align:"center",hidden:!1,cellclassname:cellclass},{text:"Gesti&oacute;n",filtertype:"checkedlist",datafield:"gestion",width:60,cellsalign:"center",align:"center",hidden:!1},{text:"Mes",filtertype:"checkedlist",datafield:"mes_nombre",width:100,cellsalign:"center",align:"center",hidden:!1},{text:"Turno",filtertype:"checkedlist",datafield:"turno",width:50,align:"center",cellsalign:"center",hidden:!1},{text:"Modalidad",filtertype:"checkedlist",datafield:"modalidad_marcacion",width:100,cellsalign:"center",align:"center",hidden:!1,cellsrenderer:cellsrenderer},{text:"D&iacute;a 1",datafield:"d1",width:100,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 2",datafield:"d2",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 3",datafield:"d3",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 4",datafield:"d4",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 5",datafield:"d5",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 6",datafield:"d6",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 7",datafield:"d7",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 8",datafield:"d8",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 9",datafield:"d9",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 10",datafield:"d10",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 11",datafield:"d11",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 12",datafield:"d12",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 13",datafield:"d13",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 14",datafield:"d14",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 15",datafield:"d15",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 16",datafield:"d16",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 17",datafield:"d17",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 18",datafield:"d18",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 19",datafield:"d19",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 20",datafield:"d20",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 21",datafield:"d21",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 22",datafield:"d22",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 23",datafield:"d23",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 24",datafield:"d24",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 25",datafield:"d25",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 26",datafield:"d26",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 27",datafield:"d27",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 28",datafield:"d28",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 29",datafield:"d29",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 30",datafield:"d30",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"D&iacute;a 31",datafield:"d31",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"&Uacute;ltimo D&iacute;a Procesado",datafield:"ultimo_dia",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"Atrasos",filtertype:"checkedlist",datafield:"atrasos",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"Faltas",filtertype:"checkedlist",datafield:"faltas",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"Abandono",filtertype:"checkedlist",datafield:"abandono",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"Sin Marcar",filtertype:"checkedlist",datafield:"omision",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"LSGH",filtertype:"checkedlist",datafield:"lsgh",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"Marc. Previstas",filtertype:"checkedlist",datafield:"agrupador",width:70,cellsalign:"center",align:"center",hidden:!1},{text:"Observaci&oacute;n",filtertype:"checkedlist",datafield:"observacion",width:100,align:"center",hidden:!1}]});$("#divListBoxMarcaciones").jqxListBox({source:[{label:"Estado",value:"estado_descripcion",checked:!0},{label:"Gesti&oacute;n",value:"gestion",checked:!0},{label:"Mes",value:"mes_nombre",checked:!0},{label:"Turno",value:"turno",checked:!0},{label:"Modalidad",value:"modalidad_marcacion",checked:!0},{label:"D&iacute;a 1",value:"d1",checked:!0},{label:"D&iacute;a 2",value:"d2",checked:!0},{label:"D&iacute;a 3",value:"d3",checked:!0},{label:"D&iacute;a 4",value:"d4",checked:!0},{label:"D&iacute;a 5",value:"d5",checked:!0},{label:"D&iacute;a 6",value:"d6",checked:!0},{label:"D&iacute;a 7",value:"d7",checked:!0},{label:"D&iacute;a 8",value:"d8",checked:!0},{label:"D&iacute;a 9",value:"d9",checked:!0},{label:"D&iacute;a 10",value:"d10",checked:!0},{label:"D&iacute;a 11",value:"d11",checked:!0},{label:"D&iacute;a 12",value:"d12",checked:!0},{label:"D&iacute;a 13",value:"d13",checked:!0},{label:"D&iacute;a 14",value:"d14",checked:!0},{label:"D&iacute;a 15",value:"d15",checked:!0},{label:"D&iacute;a 16",value:"d16",checked:!0},{label:"D&iacute;a 17",value:"d17",checked:!0},{label:"D&iacute;a 18",value:"d18",checked:!0},{label:"D&iacute;a 19",value:"d19",checked:!0},{label:"D&iacute;a 20",value:"d20",checked:!0},{label:"D&iacute;a 21",value:"d21",checked:!0},{label:"D&iacute;a 22",value:"d22",checked:!0},{label:"D&iacute;a 23",value:"d23",checked:!0},{label:"D&iacute;a 24",value:"d24",checked:!0},{label:"D&iacute;a 25",value:"d25",checked:!0},{label:"D&iacute;a 26",value:"d26",checked:!0},{label:"D&iacute;a 27",value:"d27",checked:!0},{label:"D&iacute;a 28",value:"d28",checked:!0},{label:"D&iacute;a 29",value:"d29",checked:!0},{label:"D&iacute;a 30",value:"d30",checked:!0},{label:"D&iacute;a 31",value:"d31",checked:!0},{label:"&Uacute;ltimo D&iacute;a",value:"ultimo_dia",checked:!0},{label:"Atrasos",value:"atrasos",checked:!0},{label:"Faltas",value:"faltas",checked:!0},{label:"Abandono",value:"abandono",checked:!0},{label:"Omisi&oacute;n",value:"omision",checked:!0},{label:"LSGH",value:"lsgh",checked:!0},{label:"Marc. Previstas",value:"agrupador",checked:!0},{label:"Observaci&oacute;n",value:"observacion",checked:!0}],width:"100%",height:430,checkboxes:!0}),$("#divListBoxMarcaciones").on("checkChange",function(e){$("#divGridControlMarcaciones").jqxGrid("beginupdate"),e.args.checked?$("#divGridControlMarcaciones").jqxGrid("showcolumn",e.args.value):$("#divGridControlMarcaciones").jqxGrid("hidecolumn",e.args.value),$("#divGridControlMarcaciones").jqxGrid("endupdate")})}()}var rownumberrenderer=function(e,a,t,i,n,r){return"<div align='center'>"+(e+1)+"</div>"},cellsrenderer=function(e,a,t,i){var n=$(i);return n.css({"background-color":t}),n[0].outerHTML};function cargarHorariosMarcacionesGenerados(o,s){var n=s;$("#tbodyHorariosYMarcacionesGenerados").html("");var r="";$.ajax({url:"/horariosymarcaciones/listdescriptivomarcaciones/",type:"POST",datatype:"json",async:!1,data:{id:o,gestion:0,mes:0,clasemarcacion:s},success:function(e){var a=jQuery.parseJSON(e),t=1,i="";if(0<a.length){$.each(a,function(e,a){switch(i="",null!=a.grupo&&""!=a.grupo&&(i=a.grupo),r+="<tr>",r+="<td style='text-align: center'>"+t+"</td>",r+="<td style='text-align: center'>"+a.perfil_laboral+"</td>",r+="<td style='text-align: center'>"+i+"</td>",r+="<td style='text-align: center'>"+a.gestion+"</td>",r+="<td style='text-align: center'>"+a.mes_nombre+"</td>",r+="<td style='text-align: center'>"+a.rango_fecha_ini+" al "+a.rango_fecha_fin+"</td>",a.estado){case-2:r+="<td style='text-align: center'><a title='Esto significa que no se ha asignado ning&uacute;n equipo biom&eacute;trico a la persona en este perfil. Actualice la asignaci&oacute;n del perfil.' href='javascript:void(0)' class='label label-warning'>"+a.estado_descripcion+"</a></td>",r+="<td style='text-align: center'>",r+="&nbsp;",r+="</td>";break;case-1:r+="<td style='text-align: center'><a title='Esto significa que no se ha asignado ning&uacute;n calendario al perfil en este mes' href='javascript:void(0)' class='label label-warning'>"+a.estado_descripcion+"</a></td>",r+="<td style='text-align: center'>",r+="&nbsp;",r+="</td>";break;case 1:r+="<td style='text-align: center'><a title='Esto significa que todas o parte de las fechas en este mes contin&uacute;an pendientes de ser considerados en las planillas finales.' href='javascript:void(0)' class='label label-success'>"+a.estado_descripcion+"</a></td>",r+="<td style='text-align: center'>",r+="<a id='btnVolverAGenerar."+n+"."+a.rango_fecha_ini+"."+a.rango_fecha_fin+"' title='Volver a generar.' data-original-title='Volver a Generar' href='javascript:void(0)' data-toggle='tooltip' title='' class='btn btn-default btnVolverAGenerar'><i class='fa fa-gears'></i></a>",0==a.estado_global&&(r+="<a id='btnEliminarRegistro."+n+"."+a.rango_fecha_ini+"."+a.rango_fecha_fin+"' title='Eliminar Registro' data-original-title='Eliminar registro' href='javascript:void(0)' data-toggle='tooltip' title='' class='btn btn-danger btnEliminarRegistro'><i class='fa fa-times'></i></a>"),r+="</td>";break;case 2:case 3:case 4:r+="<td style='text-align: center'><a title='Esto significa que todos las fechas para este mes ya han sido consideradas dentro de una planilla. Por lo tanto, no se pueden modificar.' href='javascript:void(0)' class='label label-info'>"+a.estado_descripcion+"</a></td>",r+="<td style='text-align: center'>",r+="&nbsp;",r+="</td>";break;default:r+="<td style='text-align: center'><a title='Esto significa que a&uacute;n no se ha generado el registro de marcaciones para este mes.' href='javascript:void(0)' class='label label-primary'>"+a.estado_descripcion+"</a></td>",r+="<td style='text-align: center'>",r+="<a id='btnGenerarNuevo."+n+"."+a.rango_fecha_ini+"."+a.rango_fecha_fin+"' title='Generar Nuevo Registro.' data-original-title='Generar Nuevo Registro' href='javascript:void(0)' data-toggle='tooltip' title='' class='btn btn-default btnGenerarNuevo'><i class='fa fa-cog'></i> Generar</a>",r+="</td>"}r+="</tr>",t++});var c="";switch(s){case"H":c="PREVISTA";break;case"M":c="EFECTIVA";break;case"R":c="RETRASO";break;case"A":c="ABANDONO"}$("#tbodyHorariosYMarcacionesGenerados").append(r),$(".btnGenerarNuevo").off(),$(".btnGenerarNuevo").on("click",function(){var e=this.id.split("."),a="",t="",i=0,n=0;if(0<e.length){a=e[2],t=e[3];var r=a.split("-");if(i=parseInt(r[2]),n=parseInt(r[1]),0<i&&0<n){if(confirm("¿Desea realmente generar la marcación '"+c+"' para la gestión y mes seleccionados?"))var d=generarMarcacion(0,o,i,n,a,t,s);d&&cargarHorariosMarcacionesGenerados(o,s)}else alert("Existe un error en el listado de marcaci&oacute;n '"+c+"', consulte con el administrador.")}}),$(".btnVolverAGenerar").off(),$(".btnVolverAGenerar").on("click",function(){var e=this.id.split("."),a="",t="",i=0,n=0;if(0<e.length){a=e[2],t=e[3];var r=a.split("-");if(i=parseInt(r[2]),n=parseInt(r[1]),0<i&&0<n){if(confirm("¿Desea realmente volver a generar la marcación '"+c+"' para la gestión y mes seleccionados?"))var d=generarMarcacion(1,o,i,n,a,t,s);d&&cargarHorariosMarcacionesGenerados(o,s)}else{var l="Existe un error en el listado de marcaci&oacute;n '"+c+"', consulte con el administrador.";$("#divMsjeError").show(),$("#divMsjeError").addClass("alert alert-danger alert-dismissable"),$("#aMsjeError").html(l),setTimeout(function(){$("#divMsjeError").hide()},5e3)}}}),$(".btnEliminarRegistro").off(),$(".btnEliminarRegistro").on("click",function(){var e=this.id.split("."),a="",t="",i=0,n=0;if(0<e.length){a=e[2],t=e[3];var r=a.split("-");if(i=parseInt(r[2]),n=parseInt(r[1]),0<i&&0<n){if(confirm("¿Desea realmente dar de baja la marcación '"+c+"' para la gestión y mes seleccionados? Esto implica que se darán de baja tambi&eacute;n los registros de marcación EFECTIVA y de SANCIÓN."))var d=eliminarMarcacion(o,i,n,a,t,s);d&&cargarHorariosMarcacionesGenerados(o,s)}else{var l="Existe un error en el listado de marcaci&oacute;n '"+c+"', consulte con el administrador.";$("#divMsjeError").show(),$("#divMsjeError").addClass("alert alert-danger alert-dismissable"),$("#aMsjeError").html(l),setTimeout(function(){$("#divMsjeError").hide()},5e3)}}})}},error:function(){alert("Se ha producido un error Inesperado")}})}function cargarHorariosMarcacionesGeneradosCruzada(o,s,p){var n=s;$("#tbodyHorariosYMarcacionesGenerados").html("");var r="";$.ajax({url:"/horariosymarcaciones/listdescriptivomarcacionescruzada/",type:"POST",datatype:"json",async:!1,data:{id:o,gestion:0,mes:0,clasemarcacionA:s,clasemarcacionB:p},success:function(e){var a=jQuery.parseJSON(e),t=1,i="";if(0<a.length){$.each(a,function(e,a){switch(i="",null!=a.grupo&&""!=a.grupo&&(i=a.grupo),r+="<tr>",r+="<td style='text-align: center'>"+t+"</td>",r+="<td style='text-align: center'>"+a.perfil_laboral+"</td>",r+="<td style='text-align: center'>"+i+"</td>",r+="<td style='text-align: center'>"+a.gestion+"</td>",r+="<td style='text-align: center'>"+a.mes_nombre+"</td>",r+="<td style='text-align: center'>"+a.rango_fecha_ini+" al "+a.rango_fecha_fin+"</td>",a.cruzada_estado){case-2:r+="<td style='text-align: center'><a title='Esto significa que no existe registro de marcaci&oacute;n previa, por lo que no se puede efectuar la generaci&oacute;n del registro de marcaci&oacute;n efectiva.' href='javascript:void(0)' class='label label-warning'>"+a.cruzada_estado_descripcion+"</a></td>",r+="<td style='text-align: center'>",r+="&nbsp;",r+="</td>";break;case-1:r+="<td style='text-align: center'><a title='Esto significa que no existe descargas de marcaciones para este mes para esta persona.' href='javascript:void(0)' class='label label-info'>"+a.cruzada_estado_descripcion+"</a></td>",r+="<td style='text-align: center'>",r+="&nbsp;",r+="</td>";break;case 1:r+="<td style='text-align: center'><a title='Esto significa que todas o parte de las fechas en este mes contin&uacute;an pendientes de ser considerados en las planillas finales.' href='javascript:void(0)' class='label label-success'>"+a.cruzada_estado_descripcion+"</a></td>",r+="<td style='text-align: center'>",r+="<a id='btnVolverAGenerar."+n+"."+a.rango_fecha_ini+"."+a.rango_fecha_fin+"' title='Volver a generar.' data-original-title='Volver a Generar' href='javascript:void(0)' data-toggle='tooltip' title='' class='btn btn-default btnVolverAGenerar'><i class='fa fa-gears'></i></a>",0<a.cruzada_estado&&(r+="<a id='btnEliminarRegistro."+n+"."+a.rango_fecha_ini+"."+a.rango_fecha_fin+"' title='Eliminar Registro' data-original-title='Eliminar registro' href='javascript:void(0)' data-toggle='tooltip' title='' class='btn btn-danger btnEliminarRegistro'><i class='fa fa-times'></i></a>"),r+="</td>";break;case 10:r+="<td style='text-align: center'><a title='Esto significa que "+a.cruzada_estado_global+" d&iacute;a(s) de este mes tienen planillas Elaboradas o Aprobadas o Planilladas.' href='javascript:void(0)' class='label label-info'>"+a.cruzada_estado_descripcion+"</a></td>",r+="<td style='text-align: center'>",r+="<a id='btnVolverAGenerar."+n+"."+a.rango_fecha_ini+"."+a.rango_fecha_fin+"' title='Volver a generar.' data-original-title='Volver a Generar' href='javascript:void(0)' data-toggle='tooltip' title='' class='btn btn-default btnVolverAGenerar'><i class='fa fa-gears'></i> Volver a Generar</a>",r+="</td>";break;default:r+="<td style='text-align: center'><a title='Esto significa que a&uacute;n no se ha generado el registro de marcaciones para este mes.' href='javascript:void(0)' class='label label-primary'>"+a.cruzada_estado_descripcion+"</a></td>",r+="<td style='text-align: center'>",r+="<a id='btnGenerarNuevo."+n+"."+a.rango_fecha_ini+"."+a.rango_fecha_fin+"' title='Generar Nuevo Registro.' data-original-title='Generar Nuevo Registro' href='javascript:void(0)' data-toggle='tooltip' title='' class='btn btn-default btnGenerarNuevo'><i class='fa fa-cog'></i> Generar</a>",r+="</td>"}r+="</tr>",t++});var c="";switch(s){case"H":c="PREVISTA";break;case"M":c="EFECTIVA";break;case"R":c="RETRASO";break;case"A":c="ABANDONO"}$("#tbodyHorariosYMarcacionesGenerados").append(r),$(".btnGenerarNuevo").off(),$(".btnGenerarNuevo").on("click",function(){var e=this.id.split("."),a="",t="",i=0,n=0;if(0<e.length){a=e[2],t=e[3];var r=a.split("-");if(i=parseInt(r[2]),n=parseInt(r[1]),0<i&&0<n){if(confirm("¿Desea realmente generar la marcación '"+c+"' para la gestión y mes seleccionados?"))var d=generarMarcacion(0,o,i,n,a,t,s);d&&cargarHorariosMarcacionesGeneradosCruzada(o,s,p)}else alert("Existe un error en el listado de marcaci&oacute;n '"+c+"', consulte con el administrador.")}}),$(".btnVolverAGenerar").off(),$(".btnVolverAGenerar").on("click",function(){var e=this.id.split("."),a="",t="",i=0,n=0;if(0<e.length){a=e[2],t=e[3];var r=a.split("-");if(i=parseInt(r[2]),n=parseInt(r[1]),0<i&&0<n){if(confirm("¿Desea realmente volver a generar la marcación '"+c+"' para la gestión y mes seleccionados?"))var d=generarMarcacion(1,o,i,n,a,t,s);d&&cargarHorariosMarcacionesGeneradosCruzada(o,s,p)}else{var l="Existe un error en el listado de marcaci&oacute;n '"+c+"', consulte con el administrador.";$("#divMsjeError").show(),$("#divMsjeError").addClass("alert alert-danger alert-dismissable"),$("#aMsjeError").html(l),setTimeout(function(){$("#divMsjeError").hide()},5e3)}}}),$(".btnEliminarRegistro").off(),$(".btnEliminarRegistro").on("click",function(){var e=this.id.split("."),a="",t="",i=0,n=0;if(0<e.length){a=e[2],t=e[3];var r=a.split("-");if(i=parseInt(r[2]),n=parseInt(r[1]),0<i&&0<n){if(confirm("¿Desea realmente dar de baja la marcación '"+c+"' para la gestión y mes seleccionados? Esto implica que se darán de baja todos los registros de marcación PREVISTA, EFECTIVA y de SANCIÓN."))var d=eliminarMarcacion(o,i,n,a,t,s);d&&cargarHorariosMarcacionesGeneradosCruzada(o,s,p)}else{var l="Existe un error en el listado de marcaci&oacute;n '"+c+"', consulte con el administrador.";$("#divMsjeError").show(),$("#divMsjeError").addClass("alert alert-danger alert-dismissable"),$("#aMsjeError").html(l),setTimeout(function(){$("#divMsjeError").hide()},5e3)}}})}},error:function(){alert("Se ha producido un error Inesperado")}})}function generarMarcacion(e,a,t,i,n,r,d){var l="";switch(d){case"H":l="generarmarcacionprevista";break;case"M":l="generarmarcacionefectiva"}return""!=l&&$.ajax({url:"/horariosymarcaciones/"+l+"/",type:"POST",datatype:"html",async:!1,cache:!1,data:{opcion:e,id_relaboral:a,gestion:t,mes:i,fecha_ini:n,fecha_fin:r,clasemarcacion:d},success:function(e){var a=jQuery.parseJSON(e);$(".msjs-alert").hide();var t=!1;return 1==a.result?(t=!0,$("#divMsjeExito").show(),$("#divMsjeExito").addClass("alert alert-success alert-dismissable"),$("#aMsjeExito").html(a.msj),setTimeout(function(){$("#divMsjeExito").hide()},3e3)):0==a.result?(t=!1,$("#divMsjePeligro").show(),$("#divMsjePeligro").addClass("alert alert-warning alert-dismissable"),$("#aMsjePeligro").html(a.msj),setTimeout(function(){$("#divMsjePeligro").hide()},3e3)):(t=!1,$("#divMsjeError").show(),$("#divMsjeError").addClass("alert alert-danger alert-dismissable"),$("#aMsjeError").html(a.msj),setTimeout(function(){$("#divMsjeError").hide()},3e3)),t},error:function(){return!1}})}function eliminarMarcacion(e,a,t,i,n,r){return $.ajax({url:"/horariosymarcaciones/eliminar/",type:"POST",datatype:"html",async:!1,cache:!1,data:{id_relaboral:e,gestion:a,mes:t,fecha_ini:i,fecha_fin:n,clasemarcacion:r},success:function(e){var a=jQuery.parseJSON(e);$(".msjs-alert").hide();var t=!1;return 1==a.result?(t=!0,$("#divMsjeExito").show(),$("#divMsjeExito").addClass("alert alert-success alert-dismissable"),$("#aMsjeExito").html(a.msj),setTimeout(function(){$("#divMsjeExito").hide()},3e3)):0==a.result?(t=!1,$("#divMsjePeligro").show(),$("#divMsjePeligro").addClass("alert alert-warning alert-dismissable"),$("#aMsjePeligro").html(a.msj),setTimeout(function(){$("#divMsjePeligro").hide()},3e3)):(t=!1,$("#divMsjeError").show(),$("#divMsjeError").addClass("alert alert-danger alert-dismissable"),$("#aMsjeError").html(a.msj),setTimeout(function(){$("#divMsjeError").hide()},3e3)),t},error:function(){return!1}})}