function cargarGrillaTurnosPorPerfilLaboral(_,w,y,f,A){var a,e={datatype:"json",datafields:[{name:"nro_row",type:"integer"},{name:"id_perfillaboral",type:"integer"},{name:"perfil_laboral",type:"string"},{name:"grupo",type:"string"},{name:"gestion",type:"integer"},{name:"numero_mes",type:"integer"},{name:"mes",type:"string"},{name:"fecha_ini",type:"date"},{name:"fecha_fin",type:"date"},{name:"tipo_horario",type:"integer"},{name:"tipo_horario_descripcion",type:"string"},{name:"estado",type:"integer"},{name:"estado_descripcion",type:"string"},{name:"id_tolerancia",type:"integer"},{name:"tipo_tolerancia",type:"string"},{name:"id_jornada_laboral",type:"integer"},{name:"jornada_laboral",type:"string"}],url:"/perfileslaborales/listhistorialturnos?id="+_,cache:!1},r=new $.jqx.dataAdapter(e);a=prepareSimulator("grid"),$("#jqxgridturnos").jqxGrid({theme:a,width:"100%",height:"100%",source:r,sortable:!0,altRows:!0,groupable:!1,columnsresize:!0,pageable:!0,pagerMode:"advanced",showfilterrow:!0,filterable:!0,showtoolbar:!0,autorowheight:!0,enablebrowserselection:!0,rendertoolbar:function(a){var e=$("<div></div>");a.append(e),e.append("<button id='addrowbuttonturn' class='btn btn-sm btn-primary' type='button' title='Nuevo Calendario'><i class='fa fa-plus-square fa-2x text-primary' title='Nuevo Registro.'/></i></button>"),e.append("<button id='updaterowbuttonturn' class='btn btn-sm btn-primary' type='button' title='Modificar Calendario'><i class='fa fa-pencil-square fa-2x text-info' title='Modificar registro.'/></button>"),e.append("<button id='approverowbuttonturn' class='btn btn-sm btn-primary' type='button' title='Aprobar Calendario'><i class='fa fa-check-square fa-2x text-success' title='Aprobar registro'></i></button>"),e.append("<button id='viewrowbuttonturn' class='btn btn-sm btn-primary' type='button' title='Vista Calendario'><i class='fa fa-calendar fa-2x text-purple' title='Vista Calendarios Laborales por Perfil.'/></i></button>"),e.append("<button id='quotasrowbuttonturn' class='btn btn-sm btn-primary' type='button' title='Asignar cupos'><i class='fa fa-tasks fa-2x text-danger' title='Asignar Cupos'></i></button>"),e.append("<button title='Refrescar Grilla' id='refreshturnrowbutton' class='btn btn-sm btn-primary' type='button'><i class='fa fa-repeat fa-2x text-default' title='Refrescar grilla.'/></i></button>"),e.append("<button title='Desagrupar.' id='cleargroupsturnrowbutton' class='btn btn-sm btn-primary' type='button'><i class='fa fa-chain-broken fa-2x text-default' title='Desagrupar.'/></i></button>"),e.append("<button title='Desfiltrar.' id='clearfiltersturnrowbutton' class='btn btn-sm btn-primary' type='button'><i class='gi gi-sorting fa-2x text-default' title='Desfiltrar.'/></i></button>"),$("#addrowbuttonturn").jqxButton(),$("#updaterowbuttonturn").jqxButton(),$("#approverowbuttonturn").jqxButton(),$("#viewrowbuttonturn").jqxButton(),$("#quotasrowbuttonturn").jqxButton(),$("#refreshturnrowbutton").jqxButton(),$("#cleargroupsturnrowbutton").jqxButton(),$("#clearfiltersturnrowbutton").jqxButton(),$("#refreshturnrowbutton").off(),$("#refreshturnrowbutton").on("click",function(){$("#jqxgridturnos").jqxGrid("updatebounddata")}),$("#cleargroupsturnrowbutton").off(),$("#cleargroupsturnrowbutton").on("click",function(){$("#jqxgridturnos").jqxGrid("cleargroups")}),$("#clearfiltersturnrowbutton").off(),$("#clearfiltersturnrowbutton").on("click",function(){$("#jqxgridturnos").jqxGrid("clearfilters")}),$("#addrowbuttonturn").off(),$("#addrowbuttonturn").on("click",function(){$("#divProgressBar").hide(),$("#divSectorHorariosDisponibles").show(),$("#divSectorCalendario").removeClass("col-md-12"),$("#divSectorCalendario").addClass("col-md-6"),$("#ddPerfilLaboralCalendario").text(w),""!=y&&null!=y?$("#ddGrupoCalendario").text(y):$("#ddGrupoCalendario").html("&nbsp;"),$("#ddTipoHorarioCalendario").text(A),$("#dtRangoFechasCalendario").hide(),$("#ddRangoFechasCalendario").hide(),$("#spanPrefijoCalendarioLaboral").html("Nuevo "),$("#calendar").html("");var a=new Date,n=a.getDate(),t=a.getMonth(),l=a.getFullYear(),d=[];$("#hdnIdPerfilLaboralParaCalendario").val(_),$("#hdnTipoHorarioParaCalendario").val(f);var c=obtenerFechaDeInicioProximo(_);if(0<c.length)n=c[0].dia,t=c[0].mes-1,l=c[0].gestion;else{var e=new Date,r=e.getMonth()+1,o=e.getFullYear();c.push({dia:1,mes:r,gestion:o}),t=r-(n=1),l=o}var b=[],p=[];function u(a,e,r,o,i,s,n,t){cargarHorariosDisponibles(obtenerHorariosDisponiblesRango(e,o,i));var l=iniciarCalendarioLaboral(a,e,r,o,i,s);$("#calendar").fullCalendar("addEventSource",n),$("#calendar").fullCalendar("addEventSource",t),sumarTotalHorasPorSemana(l),cargarJornadasLaborales(a,0),$("#divLstTolerancias").hide(),$("#divDatosTolerancia").hide(),$("#divGrupoBotonesAprobacion").hide(),$("#divGrupoBotonesElaboracion").show(),$("#lstJornadasLaborales").off(),$("#lstJornadasLaborales").on("change",function(){sumarTotalHorasPorSemana(l)}),$("#divEstadoCalendario").html(""),$("#btnImprimirCalendario").hide(),$("#divArrastre").show(),$("#hdnIdPerfilLaboralParaCuposCalendario").val(0),$("#hdnTipoHorarioParaCuposCalendario").val(0),$("#hdnFechaIniParaCuposCalendario").val(0),$("#hdnFechaFinParaCuposCalendario").val(0)}$("#hdnFechaIniParaCalendario").val(c[0].dia+"-"+c[0].mes+"-"+c[0].gestion),3==f?($("#popupGestionMesTurno").modal("show"),cargarGestionesDisponiblesParaGenerarTurno(_,l),cargarMesesDisponiblesParaGenerarTurno(_,$("#lstGestionTurno").val(),0),$("#lstGestionTurno").off(),$("#lstGestionTurno").on("change",function(){cargarMesesDisponiblesParaGenerarTurno(_,$("#lstGestionTurno").val(),0)}),$("#btnAplicarGestionMesTurno").off(),$("#btnAplicarGestionMesTurno").on("click",function(){if(validarModalGestionTurno()){$("#jqxTabsPerfilesLaborales").jqxTabs("enableAt",0),$("#jqxTabsPerfilesLaborales").jqxTabs("disableAt",1),$("#jqxTabsPerfilesLaborales").jqxTabs("disableAt",2),$("#jqxTabsPerfilesLaborales").jqxTabs("enableAt",3),$("#jqxTabsPerfilesLaborales").jqxTabs("enableAt",4),$("#jqxTabsPerfilesLaborales").jqxTabs({selectedItem:4}),$("#jqxTabsPerfilesLaborales").jqxTabs("disableAt",5),$("#popupGestionMesTurno").modal("hide"),n=1,t=$("#lstMesTurno").val()-1,l=$("#lstGestionTurno").val(),c.push({dia:1,mes:$("#lstMesTurno").val(),gestion:$("#lstGestionTurno").val()}),$("#hdnFechaIniParaCalendario").val("01-"+$("#lstMesTurno").val()+"-"+$("#lstGestionTurno").val());var a=obtenerUltimoDiaMes("01-"+$("#lstMesTurno").val()+"-"+$("#lstGestionTurno").val());$("#hdnFechaFinParaCalendario").val(a);var e="01-"+$("#lstMesTurno").val()+"-"+$("#lstGestionTurno").val(),r=obtenerFechaMenosDias(e,10),o=obtenerFechaMenosDias(e,1);b=obtenerHorariosRegistradosEnCalendarioPorPerfil(_,f,!1,r,o);var i=obtenerFechaMasDias(a,1),s=obtenerFechaMasDias(a,10);p=obtenerHorariosRegistradosEnCalendarioPorPerfil(_,f,!1,i,s),u(1,f,d,l,t,n,b,p)}})):($("#jqxTabsPerfilesLaborales").jqxTabs("enableAt",0),$("#jqxTabsPerfilesLaborales").jqxTabs("disableAt",1),$("#jqxTabsPerfilesLaborales").jqxTabs("disableAt",2),$("#jqxTabsPerfilesLaborales").jqxTabs("enableAt",3),$("#jqxTabsPerfilesLaborales").jqxTabs("enableAt",4),$("#jqxTabsPerfilesLaborales").jqxTabs({selectedItem:4}),$("#jqxTabsPerfilesLaborales").jqxTabs("disableAt",5),$("#hdnFechaFinParaCalendario").val("00-00-0000"),u(1,f,d,l,t,n,b,p)),$("#btnConcluirElaboracion").hide()}),$("#updaterowbuttonturn").off(),$("#updaterowbuttonturn").on("click",function(){$("#divProgressBar").hide(),$("#divSectorHorariosDisponibles").show(),$("#divSectorCalendario").removeClass("col-md-12"),$("#divSectorCalendario").addClass("col-md-6"),$("#divSectorEstado").removeClass("col-md-12"),$("#divSectorEstado").addClass("col-md-6");var a=$("#jqxgridturnos").jqxGrid("getselectedrowindex");if(0<=a){var e=$("#jqxgridturnos").jqxGrid("getrowdata",a);if(null!=e)if(1==e.estado){$("#jqxTabsPerfilesLaborales").jqxTabs("enableAt",0),$("#jqxTabsPerfilesLaborales").jqxTabs("disableAt",1),$("#jqxTabsPerfilesLaborales").jqxTabs("disableAt",2),$("#jqxTabsPerfilesLaborales").jqxTabs("enableAt",3),$("#jqxTabsPerfilesLaborales").jqxTabs("enableAt",4),$("#jqxTabsPerfilesLaborales").jqxTabs({selectedItem:4}),$("#jqxTabsPerfilesLaborales").jqxTabs("disableAt",5),$("#btnConcluirElaboracion").show(),$("#ddPerfilLaboralCalendario").text(w),""!=y&&null!=y?$("#ddGrupoCalendario").text(y):$("#ddGrupoCalendario").html("&nbsp;"),$("#ddTipoHorarioCalendario").text(A),$("#dtRangoFechasCalendario").hide(),$("#ddRangoFechasCalendario").hide(),$("#spanPrefijoCalendarioLaboral").html("Modificaci&oacute;n "),$("#calendar").html("");var r=new Date,o=r.getDate(),i=r.getMonth(),s=r.getFullYear(),n=fechaConvertirAFormato(new Date,"-"),t=e.fecha_ini,l=(o=t.getDate(),i=t.getMonth(),o+"-"+(i+=1)+"-"+(s=t.getFullYear())),d=o,c=i-1,b=s;if(1==e.tipo_horario||2==e.tipo_horario){var p=fechaConvertirAFormato(e.fecha_fin,"-");if(procesaTextoAFecha(l,"-")<procesaTextoAFecha(n,"-")&&procesaTextoAFecha(p,"-")>procesaTextoAFecha(n,"-")){var u=n.split("-");d=u[0],c=u[1]-1,b=u[2]}}p=fechaConvertirAFormato(e.fecha_fin,"-");var f=e.tipo_horario;$("#hdnTipoHorarioParaCalendario").val(f),$("#hdnIdPerfilLaboralParaCalendario").val(_);var h=[],v=[];if(3===f){var m=l.split("-"),g="01-"+m[1]+"-"+m[2];$("#hdnFechaIniParaCalendario").val(g);var x=obtenerUltimoDiaMes(g);$("#hdnFechaFinParaCalendario").val(x);var j=obtenerFechaMenosDias(g,10),C=obtenerFechaMenosDias(g,1);h=obtenerHorariosRegistradosEnCalendarioPorPerfil(_,f,!1,j,C);var T=obtenerFechaMasDias(x,1),P=obtenerFechaMasDias(x,10);v=obtenerHorariosRegistradosEnCalendarioPorPerfil(_,f,!1,T,P)}else $("#hdnFechaIniParaCalendario").val("00-00-0000"),$("#hdnFechaFinParaCalendario").val("00-00-0000");var q=obtenerHorariosRegistradosEnCalendarioPorPerfil(e.id_perfillaboral,f,!0,l,p);cargarHorariosDisponibles(obtenerHorariosDisponiblesRango(f,b,c));var M=iniciarCalendarioLaboral(2,f,q,b,c,d);$("#calendar").fullCalendar("addEventSource",h),$("#calendar").fullCalendar("addEventSource",v),cargarJornadasLaborales(2,e.id_jornada_laboral),cargarTolerancias(2,e.id_tolerancia),sumarTotalHorasPorSemana(M,"inicio-modificacion"),$("#lstJornadasLaborales").off(),$("#lstJornadasLaborales").on("change",function(){sumarTotalHorasPorSemana(M)}),$("#divEstadoCalendario").html("");var F="Estado: ";switch(e.estado){case 0:F+="<span class='label label-primary'><i class='fa fa-thumbs-o-down'></i> "+e.estado_descripcion+"</span>";break;case 1:F+="<span class='label label-primary'><i class='fa fa-cogs'></i> "+e.estado_descripcion+"</span>";break;case 2:F+="<span class='label label-primary'><i class='hi hi-thumbs-up'></i> "+e.estado_descripcion+"</span>";break;case 3:F+="<span class='label label-success'><i class='gi gi-ok_2'></i> "+e.estado_descripcion+"</span>";break;case 4:F+="<span class='label label-primary'><i class='fa fa-lock'></i> "+e.estado_descripcion+"</span>"}0<=e.estado&&$("#divEstadoCalendario").html(F),$("#divLstTolerancias").hide(),$("#divDatosTolerancia").hide(),$("#divGrupoBotonesAprobacion").hide(),$("#divGrupoBotonesElaboracion").show()}else{var L="Debe seleccionar un registro en estado EN ELABORACI&Oacute;N para posibilitar la modificaci&oacute;n de los registros correspondientes.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(L),$("#divMsjeNotificacionError").jqxNotification("open")}}else{L="Debe seleccionar un registro necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(L),$("#divMsjeNotificacionError").jqxNotification("open")}$("#btnImprimirCalendario").hide(),$("#divArrastre").show(),$("#hdnIdPerfilLaboralParaCuposCalendario").val(0),$("#hdnTipoHorarioParaCuposCalendario").val(0),$("#hdnFechaIniParaCuposCalendario").val(0),$("#hdnFechaFinParaCuposCalendario").val(0)}),$("#approverowbuttonturn").off(),$("#approverowbuttonturn").on("click",function(){$("#divProgressBar").hide(),$("#divSectorHorariosDisponibles").show(),$("#divSectorCalendario").removeClass("col-md-12"),$("#divSectorCalendario").addClass("col-md-6"),$("#divSectorEstado").removeClass("col-md-12"),$("#divSectorEstado").addClass("col-md-6");var a=$("#jqxgridturnos").jqxGrid("getselectedrowindex");if(0<=a){var e=$("#jqxgridturnos").jqxGrid("getrowdata",a);if(null!=e){if(2==e.estado){$("#jqxTabsPerfilesLaborales").jqxTabs("enableAt",0),$("#jqxTabsPerfilesLaborales").jqxTabs("disableAt",1),$("#jqxTabsPerfilesLaborales").jqxTabs("disableAt",2),$("#jqxTabsPerfilesLaborales").jqxTabs("enableAt",3),$("#jqxTabsPerfilesLaborales").jqxTabs("enableAt",4),$("#jqxTabsPerfilesLaborales").jqxTabs({selectedItem:4}),$("#jqxTabsPerfilesLaborales").jqxTabs("disableAt",5),$("#ddPerfilLaboralCalendario").text(w),""!=y&&null!=y?$("#ddGrupoCalendario").text(y):$("#ddGrupoCalendario").html("&nbsp;"),$("#ddTipoHorarioCalendario").text(A),$("#dtRangoFechasCalendario").hide(),$("#ddRangoFechasCalendario").hide(),$("#spanPrefijoCalendarioLaboral").html("Aprobaci&oacute;n "),$("#calendar").html("");var r=new Date,o=r.getDate(),i=r.getMonth(),s=r.getFullYear(),n=fechaConvertirAFormato(new Date,"-"),t=e.fecha_ini,l=(o=t.getDate(),i=t.getMonth(),o+"-"+(i+=1)+"-"+(s=t.getFullYear())),d=o,c=i-1,b=s;if(1==e.tipo_horario||2==e.tipo_horario){var p=n.split("-");d=p[0],c=p[1]-1,b=p[2]}var u=fechaConvertirAFormato(e.fecha_fin,"-"),f=e.tipo_horario;$("#hdnTipoHorarioParaCalendario").val(f),$("#hdnIdPerfilLaboralParaCalendario").val(_);var h=[],v=[];if(3==f){var m=l.split("-"),g="01-"+m[1]+"-"+m[2];$("#hdnFechaIniParaCalendario").val(g);var x=obtenerUltimoDiaMes(g);$("#hdnFechaFinParaCalendario").val(x);var j=obtenerFechaMenosDias(g,10),C=obtenerFechaMenosDias(g,1);h=obtenerHorariosRegistradosEnCalendarioPorPerfil(_,f,!1,j,C);var T=obtenerFechaMasDias(x,1),P=obtenerFechaMasDias(x,10);v=obtenerHorariosRegistradosEnCalendarioPorPerfil(_,f,!1,T,P)}else $("#hdnFechaIniParaCalendario").val("00-00-0000"),$("#hdnFechaFinParaCalendario").val("00-00-0000");var q=obtenerHorariosRegistradosEnCalendarioPorPerfil(e.id_perfillaboral,f,!0,l,u);cargarHorariosDisponibles(obtenerHorariosDisponiblesRango(f,b,c));var M=iniciarCalendarioLaboral(3,f,q,b,c,d);$("#calendar").fullCalendar("addEventSource",h),$("#calendar").fullCalendar("addEventSource",v),cargarJornadasLaborales(3,e.id_jornada_laboral),cargarTolerancias(3,e.id_tolerancia),sumarTotalHorasPorSemana(M,"inicio-modificacion"),$("#lstJornadasLaborales").off(),$("#lstJornadasLaborales").on("change",function(){sumarTotalHorasPorSemana(M)}),$("#divEstadoCalendario").html("");var F="Estado: ";switch(e.estado){case 0:F+="<span class='label label-primary'><i class='fa fa-thumbs-o-down'></i> "+e.estado_descripcion+"</span>";break;case 1:F+="<span class='label label-primary'><i class='fa fa-cogs'></i> "+e.estado_descripcion+"</span>";break;case 2:F+="<span class='label label-primary'><i class='hi hi-thumbs-up'></i> "+e.estado_descripcion+"</span>";break;case 3:F+="<span class='label label-success'><i class='gi gi-ok_2'></i> "+e.estado_descripcion+"</span>";break;case 4:F+="<span class='label label-primary'><i class='fa fa-lock'></i> "+e.estado_descripcion+"</span>"}0<=e.estado&&$("#divEstadoCalendario").html(F)}else{var L="Debe seleccionar un registro en estado ELABORADO para posibilitar la APROBACI&Oacute;N de los registros correspondientes.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(L),$("#divMsjeNotificacionError").jqxNotification("open")}$("#divLstTolerancias").show(),$("#divDatosTolerancia").show(),$("#divGrupoBotonesAprobacion").show(),$("#divGrupoBotonesElaboracion").hide()}}else{L="Debe seleccionar un registro necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(L),$("#divMsjeNotificacionError").jqxNotification("open")}$("#btnImprimirCalendario").hide(),$("#divArrastre").show(),$("#hdnIdPerfilLaboralParaCuposCalendario").val(0),$("#hdnTipoHorarioParaCuposCalendario").val(0),$("#hdnFechaIniParaCuposCalendario").val(0),$("#hdnFechaFinParaCuposCalendario").val(0)}),$("#viewrowbuttonturn").off(),$("#viewrowbuttonturn").on("click",function(){$("#divProgressBar").hide(),$("#divSectorHorariosDisponibles").hide(),$("#divSectorCalendario").removeClass("col-md-6"),$("#divSectorCalendario").addClass("col-md-12"),$("#divSectorEstado").removeClass("col-md-6"),$("#divSectorEstado").addClass("col-md-12");var a=$("#jqxgridturnos").jqxGrid("getselectedrowindex");if(0<=a){var e=$("#jqxgridturnos").jqxGrid("getrowdata",a);if(null!=e){if(1<=e.estado){$("#jqxTabsPerfilesLaborales").jqxTabs("enableAt",0),$("#jqxTabsPerfilesLaborales").jqxTabs("disableAt",1),$("#jqxTabsPerfilesLaborales").jqxTabs("disableAt",2),$("#jqxTabsPerfilesLaborales").jqxTabs("enableAt",3),$("#jqxTabsPerfilesLaborales").jqxTabs("enableAt",4),$("#jqxTabsPerfilesLaborales").jqxTabs({selectedItem:4}),$("#jqxTabsPerfilesLaborales").jqxTabs("disableAt",5),$("#ddPerfilLaboralCalendario").text(w),""!=y&&null!=y?$("#ddGrupoCalendario").text(y):$("#ddGrupoCalendario").html("&nbsp;"),$("#ddTipoHorarioCalendario").text(A);var r=fechaConvertirAFormato(e.fecha_ini,"-"),o=fechaConvertirAFormato(e.fecha_fin,"-");$("#dtRangoFechasCalendario").show(),$("#ddRangoFechasCalendario").show(),$("#ddRangoFechasCalendario").text(r+" AL "+o),$("#spanPrefijoCalendarioLaboral").html("Vista "),$("#calendar").html("");var i=new Date,s=i.getDate(),n=i.getMonth(),t=i.getFullYear(),l=fechaConvertirAFormato(new Date,"-"),d=e.fecha_ini,c=(s=d.getDate(),n=d.getMonth(),s+"-"+(n+=1)+"-"+(t=d.getFullYear())),b=s,p=n-1,u=t;if(1==e.tipo_horario||2==e.tipo_horario){var f=l.split("-");b=f[0],p=f[1]-1,u=f[2]}var h=fechaConvertirAFormato(e.fecha_fin,"-"),v=e.tipo_horario;$("#hdnTipoHorarioParaCalendario").val(v),$("#hdnIdPerfilLaboralParaCalendario").val(_);var m=[],g=[];if(3==v){var x=c.split("-");r="01-"+x[1]+"-"+x[2];$("#hdnFechaIniParaCalendario").val(r);o=obtenerUltimoDiaMes(r);$("#hdnFechaFinParaCalendario").val(o);var j=obtenerFechaMenosDias(r,10),C=obtenerFechaMenosDias(r,1);m=obtenerHorariosRegistradosEnCalendarioPorPerfil(_,v,!1,j,C);var T=obtenerFechaMasDias(o,1),P=obtenerFechaMasDias(o,10);g=obtenerHorariosRegistradosEnCalendarioPorPerfil(_,v,!1,T,P)}else $("#hdnFechaIniParaCalendario").val("00-00-0000"),$("#hdnFechaFinParaCalendario").val("00-00-0000");var q=obtenerHorariosRegistradosEnCalendarioPorPerfil(e.id_perfillaboral,v,!1,c,h);cargarHorariosDisponibles(obtenerHorariosDisponiblesRango(v,u,p));var M=iniciarCalendarioLaboral(5,v,q,u,p,b);$("#calendar").fullCalendar("addEventSource",m),$("#calendar").fullCalendar("addEventSource",g),cargarJornadasLaborales(5,e.id_jornada_laboral),cargarTolerancias(5,e.id_tolerancia),sumarTotalHorasPorSemana(M),$("#lstJornadasLaborales").off(),$("#lstJornadasLaborales").on("change",function(){sumarTotalHorasPorSemana(M)}),$("#divEstadoCalendario").html("");var F="Estado: ";switch(e.estado){case 0:F+="<span class='label label-primary'><i class='fa fa-thumbs-o-down'></i> "+e.estado_descripcion+"</span>";break;case 1:F+="<span class='label label-primary'><i class='fa fa-cogs'></i> "+e.estado_descripcion+"</span>";break;case 2:F+="<span class='label label-primary'><i class='hi hi-thumbs-up'></i> "+e.estado_descripcion+"</span>";break;case 3:F+="<span class='label label-success'><i class='gi gi-ok_2'></i> "+e.estado_descripcion+"</span>";break;case 4:F+="<span class='label label-primary'><i class='fa fa-lock'></i> "+e.estado_descripcion+"</span>"}0<=e.estado&&$("#divEstadoCalendario").html(F)}else{var L="Debe seleccionar un registro en estado ELABORADO para posibilitar la APROBACI&Oacute;N de los registros correspondientes.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(L),$("#divMsjeNotificacionError").jqxNotification("open")}$("#divLstTolerancias").show(),$("#divDatosTolerancia").show(),$("#divGrupoBotonesAprobacion").hide(),$("#divGrupoBotonesElaboracion").hide()}}else{L="Debe seleccionar un registro necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(L),$("#divMsjeNotificacionError").jqxNotification("open")}$("#btnImprimirCalendario").show(),$("#divArrastre").hide(),$("#hdnIdPerfilLaboralParaCuposCalendario").val(0),$("#hdnTipoHorarioParaCuposCalendario").val(0),$("#hdnFechaIniParaCuposCalendario").val(0),$("#hdnFechaFinParaCuposCalendario").val(0)}),$("#quotasrowbuttonturn").off(),$("#quotasrowbuttonturn").on("click",function(){$("#divProgressBar").hide();var a=$("#jqxgridturnos").jqxGrid("getselectedrowindex");if(0<=a){$("#spanPrefijoCalendarioLaboral").html("Cupos por ");var e=$("#jqxgridturnos").jqxGrid("getrowdata",a);if(null!=e)if(3==e.estado){$("#jqxTabsPerfilesLaborales").jqxTabs("enableAt",0),$("#jqxTabsPerfilesLaborales").jqxTabs("disableAt",1),$("#jqxTabsPerfilesLaborales").jqxTabs("disableAt",2),$("#jqxTabsPerfilesLaborales").jqxTabs("enableAt",3),$("#jqxTabsPerfilesLaborales").jqxTabs("disableAt",4),$("#jqxTabsPerfilesLaborales").jqxTabs("enableAt",5),$("#jqxTabsPerfilesLaborales").jqxTabs({selectedItem:5}),$("#spanPrefijoCuposCalendarioLaboral").html("Cupos por "),$("#ddPerfilLaboralCupos").text(w),""!=y&&null!=y?$("#ddGrupoCupos").text(y):$("#ddGrupoCupos").html("&nbsp;"),$("#ddTipoHorarioCupos").text(A);var r=fechaConvertirAFormato(e.fecha_ini,"-"),o=fechaConvertirAFormato(e.fecha_fin,"-");$("#ddRangoFechas").text(r+" AL "+o),$("#calendar").html(""),cargarCupos(0,_,r,o),$("#hdnIdPerfilLaboralParaCuposCalendario").val(e.id_perfillaboral),$("#hdnTipoHorarioParaCuposCalendario").val(e.tipo_horario),$("#hdnFechaIniParaCuposCalendario").val(e.fecha_ini),$("#hdnFechaFinParaCuposCalendario").val(e.fecha_fin)}else $("#divMsjePorError").html(""),$("#divMsjePorError").append("Debe seleccionar un registro en estado APROBADO para posibilitar la asignaci&oacute;n de cupos correspondientes."),$("#divMsjeNotificacionError").jqxNotification("open")}})},columns:[{text:"Nro.",sortable:!1,filterable:!1,editable:!1,groupable:!1,draggable:!1,resizable:!1,columntype:"number",width:50,cellsalign:"center",align:"center",cellsrenderer:rownumberrenderer},{text:"Fecha Inicio",datafield:"fecha_ini",filtertype:"range",width:90,cellsalign:"center",cellsformat:"dd-MM-yyyy",align:"center"},{text:"Fecha Fin",datafield:"fecha_fin",filtertype:"range",width:90,cellsalign:"center",cellsformat:"dd-MM-yyyy",align:"center"},{text:"Estado",columntype:"checkedlist",datafield:"estado_descripcion",width:130,cellsalign:"center",align:"center"},{text:"Jornada Laboral",filtertype:"checkedlist",datafield:"jornada_laboral",width:150,cellsalign:"center",align:"center"},{text:"Tipo Tolerancia",filtertype:"checkedlist",datafield:"tipo_tolerancia",width:400,cellsalign:"center",align:"center"}]})}function validaFormularioPorRegistroCalendarioLaboral(){return!0}function limpiarMensajesErrorPorValidacionCalendarioLaboral(){}function guardarRegistroCalendarioLaboral(){var r=!1,a=$("#hdnIdRelaboralPorMovilidad").val(),e=$("#hdnIdRelaboralMovilidadModificar").val(),o=0,i=0,s=0,n=0,t=0;$("#chkAi").is(":checked")&&(t=1);var l=$("#lstTipoMemorandum").val().split("-"),d=l[0],c=l[1],b=(l[2],l[3],l[4],l[5],$("#txtCorrelativoMemorandum").val()),p=$("#lstGestionMemorandum").val(),u=$("#txtFechaMem").jqxDateTimeInput("getText"),f=$("#lstGerenciasAdministrativasMovilidad").val(),h=$("#lstDepartamentosAdministrativosMovilidad").val(),v=(n=$("#lstAreasAdministrativasMovilidad").val(),s=$("#lstUbicacionesMovilidad").val(),$("#txtCargoMovilidad").val());"object"==jQuery.type(v)&&(v=String(v.label)),""!=(v+="")&&1==t?v.indexOf("a.i.")<0&&(v+=" a.i."):""!=v&&0==t&&0<v.indexOf("a.i.")&&v.replace("a.i.","");var m=$("#txtMotivoMovilidad").val(),g=$("#lstPaisesMovilidad").val(),x=$("#lstCiudadesMovilidad").val(),j=$("#txtLugarMovilidad").val(),C=$("#txtFechaIniMovilidad").jqxDateTimeInput("getText"),T=$("#txtHoraIniMovilidad").val(),P=$("#txtFechaFinMovilidad").jqxDateTimeInput("getText"),q=$("#txtHoraFinMovilidad").val(),M=$("#txtObservacionMovilidad").val();return g=parseInt(g),x=parseInt(x),isNaN(g)&&(g=0),isNaN(x)&&(x=0),f=parseInt(f),h=parseInt(h),n=parseInt(n),s=parseInt(s),null!=f&&null!=f&&(isNaN(f)||(i=f),isNaN(h)||(i=h)),0==i&&0<$("#hdnIdOrganigramaPorSeleccionCargoSuperior").val()&&(i=$("#hdnIdOrganigramaPorSeleccionCargoSuperior").val()),isNaN(n)&&(n=0),isNaN(s)?s=0<$("#hdnIdOrganigramaPorSeleccionCargoSuperior").val()?-1:0:s=s,0<e&&(o=$("#hdnIdMemorandumMovilidadModificar").val()),0==c&&(P=""),0<a&&0<d&&""!=b&&0<p&&""!=u&&""!=C&&$.ajax({url:"/relaborales/savemovilidad/",type:"POST",datatype:"json",async:!1,cache:!1,data:{id:e,id_relaboral:a,id_da:0,id_regional:0,id_organigrama:i,id_area:n,id_ubicacion:s,cargo:v,id_evento:0,motivo:m,id_pais:g,id_departamento:x,lugar:j,id_memorandum:o,id_tipomemorandum:d,correlativo:b,gestion:p,fecha_mem:u,contenido:"",fecha_ini:C,hora_ini:T,fecha_fin:P,hora_fin:q,observacion:M},success:function(a){var e=jQuery.parseJSON(a);$(".msjes").hide(),1==e.result?(r=!0,$("#jqxgridmovilidad").jqxGrid("updatebounddata"),$("#divMsjePorSuccess").html(""),$("#divMsjePorSuccess").append(e.msj),$("#divMsjeNotificacionSuccess").jqxNotification("open"),$("#jqxgrid").jqxGrid("beginupdate")):0==e.result?($("#divMsjePorWarning").html(""),$("#divMsjePorWarning").append(e.msj),$("#divMsjeNotificacionWarning").jqxNotification("open")):($("#divMsjePorError").html(""),$("#divMsjePorError").append(e.msj),$("#divMsjeNotificacionError").jqxNotification("open"))},error:function(){$("#divMsjePorError").html(""),$("#divMsjePorError").append("Se ha producido un error Inesperado"),$("#divMsjeNotificacionError").jqxNotification("open")}}),r}function obtenerFechaDeInicioProximo(a){var r=[];return $.ajax({url:"/perfileslaborales/getfechainiproximo/",type:"POST",datatype:"json",async:!1,cache:!1,data:{id:a},success:function(a){var e=jQuery.parseJSON(a);0<e.length&&$.each(e,function(a,e){r.push({dia:e.dia,mes:e.mes,gestion:e.gestion})})}}),r}function obtenerUltimoDiaMes(a){return $.ajax({url:"/perfileslaborales/getultimafechames/",type:"POST",datatype:"json",async:!1,cache:!1,data:{fecha:a},success:function(a){}}).responseText}function obtenerFechaMenosDias(a,e){var r=a;return 0<e&&(r=$.ajax({url:"/perfileslaborales/getfechamenosdias/",type:"POST",datatype:"json",async:!1,cache:!1,data:{fecha:a,dias:e},success:function(a){}}).responseText),r}function obtenerFechaMasDias(a,e){var r=a;return 0<e&&(r=$.ajax({url:"/perfileslaborales/getfechamasdias/",type:"POST",datatype:"json",async:!1,cache:!1,data:{fecha:a,dias:e},success:function(a){}}).responseText),r}function cargarGestionesDisponiblesParaGenerarTurno(a,r){var o="";$("#lstGestionTurno").html(""),$("#lstGestionTurno").append("<option value=''>Seleccionar</option>"),$("#lstGestionTurno").prop("disabled",!1),$.ajax({url:"/perfileslaborales/getgestiones/",type:"POST",datatype:"json",async:!1,cache:!1,data:{id_perfillaboral:a},success:function(a){var e=jQuery.parseJSON(a);0<e.length&&$.each(e,function(a,e){o+="<option value='"+e+"' "+(r==e?"selected":"")+">"+e+"</option>"})}}),""!=o?$("#lstGestionTurno").append(o):$("#lstGestionTurno").prop("disabled",!0)}function cargarMesesDisponiblesParaGenerarTurno(a,e,r){$("#lstMesTurno").html(""),$("#lstMesTurno").append("<option value=''>Seleccionar</option>"),$("#lstMesTurno").prop("disabled",!1);var o="",i="";0<a&&0<e?($.ajax({url:"/perfileslaborales/getmeses/",type:"POST",datatype:"json",async:!1,cache:!1,data:{id_perfillaboral:a,gestion:e},success:function(a){var e=jQuery.parseJSON(a);0<e.length&&$.each(e,function(a,e){i=r==e.mes?"selected":"",o+="<option value='"+e.mes+"' "+i+">"+e.mes_nombre+"</option>"})}}),""!=o?$("#lstMesTurno").append(o):$("#lstMesTurno").prop("disabled",!0)):$("#lstMesTurno").prop("disabled",!0)}function validarModalGestionTurno(){var a=!0,e="";return $("#lstGestionTurno").removeClass("has-error"),$("#helpErrorGestionTurno").html(""),$("#lstMesTurno").removeClass("has-error"),$("#helpErrorMesTurno").html(""),null!=$("#lstGestionTurno").val()&&""!=$("#lstGestionTurno").val()&&0!=$("#lstGestionTurno").val()||(a=!1,e="Debe seleccionar necesariamente la gesti&oacute;n para la generaci&oacute; del turno laboral.",$("#lstGestionTurno").addClass("has-error"),$("#helpErrorGestionTurno").html(e)),null!=$("#lstMesTurno").val()&&""!=$("#lstMesTurno").val()&&0!=$("#lstMesTurno").val()||(a=!1,e="Debe seleccionar necesariamente el mes para la generaci&oacute; del turno laboral.",$("#lstMesTurno").addClass("has-error"),$("#helpErrorMesTurno").html(e)),a}