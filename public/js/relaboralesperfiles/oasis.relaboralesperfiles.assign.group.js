function cargarGrillaAsignacionesGrupales(o,s,c,e,l){var a,i={datatype:"json",datafields:[{name:"nro_row",type:"integer"},{name:"id",type:"integer"},{name:"padre_id",type:"integer"},{name:"id_ubicacion",type:"integer"},{name:"ubicacion",type:"string"},{name:"id_estacion",type:"integer"},{name:"estacion",type:"string"},{name:"color",type:"string"},{name:"id_perfillaboral",type:"integer"},{name:"perfil_laboral",type:"string"},{name:"fecha_ini",type:"date"},{name:"fecha_fin",type:"date"},{name:"estado",type:"integer"},{name:"estado_descripcion",type:"string"},{name:"tipo_horario",type:"integer"},{name:"tipo_horario_descripcion",type:"string"},{name:"cantidad",type:"integer"}],url:"/relaboralesperfiles/listgroup?id="+o,cache:!1},t=new $.jqx.dataAdapter(i);a=prepareSimulator("grid"),$("#divGridAsignaciones").jqxGrid({theme:a,width:"100%",height:"100%",source:t,sortable:!0,altRows:!0,groupable:!1,columnsresize:!0,pageable:!0,pagerMode:"advanced",showfilterrow:!0,filterable:!0,showtoolbar:!0,autorowheight:!0,rendertoolbar:function(e){var a=$("<div></div>");e.append(a),a.append("<button id='addgrouprowbutton' class='btn btn-sm btn-primary' type='button' title='Nueva Asignaci&oacute;n Grupal'><i class='fa fa-plus-square fa-2x text-info' title='Nueva Asignaci&oacute;n Grupal.'/></i></button>"),a.append("<button id='updategrouprowbutton' class='btn btn-sm btn-primary' type='button' title='Nueva Asignaci&oacute;n Individual'><i class='fa fa-pencil-square fa-2x text-info' title='Nueva Asignaci&oacute;n Individual.'/></button>"),$("#addgrouprowbutton").jqxButton(),$("#updategrouprowbutton").jqxButton(),$("#hdnIdPerfilLaboralNueva").val(0),$("#addgrouprowbutton").off(),$("#addgrouprowbutton").on("click",function(){$("#jqxTabsAsignacionPerfiles").jqxTabs("disableAt",1),$("#jqxTabsAsignacionPerfiles").jqxTabs("enableAt",2),$("#jqxTabsAsignacionPerfiles").jqxTabs("enableAt",3),$("#jqxTabsAsignacionPerfiles").jqxTabs({selectedItem:3}),$("#jqxTabsAsignacionPerfiles").jqxTabs("disableAt",4),$("#jqxTabsAsignacionPerfiles").jqxTabs("disableAt",5),$("#ddPerfilLaboralNew").text(s),""!=c&&null!=c?$("#ddGrupoNew").text(c):$("#ddGrupoNew").html("&nbsp;"),$("#ddTipoHorarioNew").text(l),limpiarMensajesErrorPorValidacionNuevoRegistroAsignacionPerfilLaboral(1),cargarUbicacionesPrincipales(1,0),$("#txtFechaIniNew").jqxDateTimeInput({enableBrowserBoundsDetection:!0,height:24,formatString:"dd-MM-yyyy"}),$("#txtFechaFinNew").jqxDateTimeInput({enableBrowserBoundsDetection:!0,height:24,formatString:"dd-MM-yyyy"}),definirListaDualNueva(1,0,100,"",""),$("#hdnIdPerfilLaboralNew").val(o),$("#lstUbicacionesNew").off(),$("#lstUbicacionesNew").on("change",function(){cargarEstaciones(1,$(this).val(),0),definirListaDualNueva(1,0,$(this).val(),"","")})}),$("#updategrouprowbutton").off(),$("#updategrouprowbutton").on("click",function(){var e=$("#divGridAsignaciones").jqxGrid("getselectedrowindex");if(0<=e){var a=$("#divGridAsignaciones").jqxGrid("getrowdata",e);if(null!=a)if(1==a.estado){$("#jqxTabsAsignacionPerfiles").jqxTabs("disableAt",1),$("#jqxTabsAsignacionPerfiles").jqxTabs("enableAt",2),$("#jqxTabsAsignacionPerfiles").jqxTabs("disableAt",3),$("#jqxTabsAsignacionPerfiles").jqxTabs("enableAt",4),$("#jqxTabsAsignacionPerfiles").jqxTabs({selectedItem:4}),$("#jqxTabsAsignacionPerfiles").jqxTabs("disableAt",5),$("#ddPerfilLaboralEdit").text(s),""!=c&&null!=c?$("#ddGrupoEdit").text(c):$("#ddGrupoEdit").html("&nbsp;"),$("#ddTipoHorarioEdit").text(l),limpiarMensajesErrorPorValidacionNuevoRegistroAsignacionPerfilLaboral(2),cargarUbicacionesPrincipales(2,a.id_ubicacion);var i=0;null!=a.id_estacion&&(i=a.id_estacion),cargarEstaciones(2,a.id_ubicacion,i),$("#txtFechaIniEdit").jqxDateTimeInput({value:a.fecha_ini,enableBrowserBoundsDetection:!0,height:24,formatString:"dd-MM-yyyy"}),$("#txtFechaFinEdit").jqxDateTimeInput({value:a.fecha_fin,enableBrowserBoundsDetection:!0,height:24,formatString:"dd-MM-yyyy"});var t=fechaConvertirAFormato(a.fecha_ini,"-"),n=fechaConvertirAFormato(a.fecha_fin,"-");definirListaDualNueva(2,a.id_perfillaboral,a.id,t,n),$("#hdnIdPerfilLaboralEdit").val(o),$("#lstUbicacionesEdit").off(),$("#lstUbicacionesEdit").on("change",function(){cargarEstaciones(2,$(this).val(),i),definirListaDualNueva(2,a.id_perfillaboral,$(this).val(),t,n)})}else{var r="Debe seleccionar un registro en estado ACTIVO para posibilitar la modificaci&oacute;n de los registros correspondientes.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(r),$("#divMsjeNotificacionError").jqxNotification("open")}}else{r="Debe seleccionar un registro necesariamente.";$("#divMsjePorError").html(""),$("#divMsjePorError").append(r),$("#divMsjeNotificacionError").jqxNotification("open")}$("#btnImprimirCalendario").hide(),$("#divArrastre").show(),$("#hdnIdPerfilLaboralParaCuposCalendario").val(0),$("#hdnTipoHorarioParaCuposCalendario").val(0),$("#hdnFechaIniParaCuposCalendario").val(0),$("#hdnFechaFinParaCuposCalendario").val(0)})},columns:[{text:"Nro.",sortable:!1,filterable:!1,editable:!1,groupable:!1,draggable:!1,resizable:!1,columntype:"number",width:50,cellsalign:"center",align:"center",cellsrenderer:rownumberrenderer},{text:"Estado",filtertype:"checkedlist",datafield:"estado_descripcion",width:100,cellsalign:"center",align:"center",hidden:!1,cellclassname:cellclass},{text:"Ubicaci&oacute;n",columntype:"dropdownlist",datafield:"ubicacion",width:200,cellsalign:"center",align:"center"},{text:"Estaci&oacute;n",filtertype:"checkedlist",datafield:"estacion",width:130,cellsalign:"center",align:"center"},{text:"Fecha Inicio",datafield:"fecha_ini",filtertype:"range",width:90,cellsalign:"center",cellsformat:"dd-MM-yyyy",align:"center"},{text:"Fecha Fin",datafield:"fecha_fin",filtertype:"range",width:90,cellsalign:"center",cellsformat:"dd-MM-yyyy",align:"center"},{text:"Cantidad",filtertype:"checkedlist",datafield:"cantidad",width:200,cellsalign:"center",align:"center"}]})}function validaFormularioPorRegistroCalendarioLaboral(){return!0}function obtenerFechaDeInicioProximo(e){var i=[];return $.ajax({url:"/perfileslaborales/getfechainiproximo/",type:"POST",datatype:"json",async:!1,cache:!1,data:{id:e},success:function(e){var a=jQuery.parseJSON(e);0<a.length&&$.each(a,function(e,a){i.push({dia:a.dia,mes:a.mes,gestion:a.gestion})})}}),i}function obtenerUltimoDiaMes(e){return $.ajax({url:"/perfileslaborales/getultimafechames/",type:"POST",datatype:"json",async:!1,cache:!1,data:{fecha:e},success:function(e){}}).responseText}function obtenerFechaMenosDias(e,a){var i=e;return 0<a&&(i=$.ajax({url:"/perfileslaborales/getfechamenosdias/",type:"POST",datatype:"json",async:!1,cache:!1,data:{fecha:e,dias:a},success:function(e){}}).responseText),i}function obtenerFechaMasDias(e,a){var i=e;return 0<a&&(i=$.ajax({url:"/perfileslaborales/getfechamasdias/",type:"POST",datatype:"json",async:!1,cache:!1,data:{fecha:e,dias:a},success:function(e){}}).responseText),i}function cargarUbicacionesPrincipales(e,i){var t="",n="New";2==e&&(n="Edit"),$.ajax({url:"/ubicaciones/listprincipales/",type:"POST",datatype:"json",async:!1,cache:!1,success:function(e){$("#lstUbicaciones"+n).html(""),$("#lstUbicaciones"+n).append("<option value='0' data-cant-nodos-hijos='0'>Seleccionar...</option>");var a=jQuery.parseJSON(e);0<a.length?($("#lstUbicaciones"+n).prop("disabled",!1),$.each(a,function(e,a){t=i==a.id?"selected":"",$("#lstUbicaciones"+n).append("<option value='"+a.id+"' data-cant-nodos-hijos='"+a.cant_nodos_hijos+"' "+t+">"+a.ubicacion+"</option>")})):$("#lstUbicaciones"+n).prop("disabled",!0)}})}function cargarEstaciones(e,a,i){var t="New";2==e&&(t="Edit"),$("#lstEstaciones"+t).html(""),$("#lstEstaciones"+t).append("<option value='0'>Seleccionar...</option>"),$("#lstEstaciones"+t).prop("disabled","disabled"),$("#spanAsteriscoEstaciones"+t).html("");var n="";0<a&&$.ajax({url:"/ubicaciones/listestaciones/",type:"POST",datatype:"json",async:!1,cache:!1,data:{id:a},success:function(e){var a=jQuery.parseJSON(e);0<a.length?($("#lstEstaciones"+t).prop("disabled",!1),$("#spanAsteriscoEstaciones"+t).text(" *"),$.each(a,function(e,a){n=i==a.id?"selected":"",$("#lstEstaciones"+t).append("<option value='"+a.id+"' "+n+">"+a.ubicacion+"</option>")})):$("#lstEstaciones"+t).prop("disabled","disabled")}})}