function cargarTiposDeAcumulacion(o,i){var e="";$("#lstTipoAcumulacion"+i).html(""),$.ajax({url:"/tolerancias/listtiposacumulaciones/",type:"POST",datatype:"json",async:!1,success:function(a){var r=jQuery.parseJSON(a);0<r.length&&($("#lstTipoAcumulacion"+i).append("<option value='0'>Seleccionar..</option>"),$.each(r,function(a,r){e=o==r.tipo_acumulacion?"selected":"",$("#lstTipoAcumulacion"+i).append("<option value='"+r.tipo_acumulacion+"' "+e+">"+r.tipo_acumulacion_descripcion+"</option>")}))},error:function(){alert("Se ha producido un error Inesperado")}})}function cargarOpcionesDeConsideracionEnRetraso(o,i){var e="";$("#lstConsideracionRetraso"+i).html(""),$.ajax({url:"/tolerancias/listconsideracionretraso/",type:"POST",datatype:"json",async:!1,success:function(a){var r=jQuery.parseJSON(a);0<r.length&&($("#lstConsideracionRetraso"+i).append("<option value='0'>Seleccionar..</option>"),$.each(r,function(a,r){e=o==r.consideracion_retraso?"selected":"",$("#lstConsideracionRetraso"+i).append("<option value='"+r.consideracion_retraso+"' "+e+">"+r.consideracion_retraso_descripcion+"</option>")}))},error:function(){alert("Se ha producido un error Inesperado")}})}function validaFormularioTolerancia(){var a=!0,r="";$(".msjs-alert").hide();var o="";0<$("#hdnIdToleranciaEditar").val()&&(o="Editar"),limpiarMensajesErrorPorValidacionTolerancia(o);var i=null,e=$("#txtTolerancia"+o).val(),n=$("#lstTipoAcumulacion"+o).val(),c=$("#lstConsideracionRetraso"+o).val(),t=$("#txtFechaIni"+o).val(),s=($("#txtFechaFin"+o).val(),$("#divTolerancia"+o)),l=$("#helpErrorTolerancia"+o),d=$("#txtTolerancia"+o),u=$("#divTipoAcumulacion"+o),p=$("#helpErrorTipoAcumulacion"+o),v=$("#lstTipoAcumulacion"+o),h=$("#divConsideracionRetraso"+o),m=$("#helpErrorConsideracionRetraso"+o),j=$("#lstConsideracionRetraso"+o),f=$("#divFechaIni"+o),T=$("#helpErrorFechaIni"+o),x=$("#txtFechaIni"+o);$("#divFechaFin"+o),$("#helpErrorFechaFin"+o),$("#txtFechaFin"+o);if(""==e){a=!1;r="Debe introducir los minutos de tolerancia necesariamente.";s.addClass("has-error"),l.html(r),null==i&&(i=d)}if(""==n){a=!1;r="Debe seleccionar el tipo de acumulaci&oacute;n necesariamente.";u.addClass("has-error"),p.html(r),null==i&&(i=v)}if(""==c){a=!1;r="Debe seleccionar la consideraci&oacute;n de la tolerancia dentro del retraso.";h.addClass("has-error"),m.html(r),null==i&&(i=j)}if(""==t){a=!1;r="Debe introducir la fecha de inicio de aplicaci&oacute;n de la tolerancia.";f.addClass("has-error"),T.html(r),null==i&&(i=x)}return null!=i&&i.focus(),a}function limpiarMensajesErrorPorValidacionTolerancia(a){$("#divTolerancia"+a).removeClass("has-error"),$("#helpErrorTolerancia"+a).html(""),$("#divAcumulacion"+a).removeClass("has-error"),$("#helpErrorAcumulacion"+a).html(""),$("#divConsideracionRetraso"+a).removeClass("has-error"),$("#helpErrorConsideracionRetraso"+a).html(""),$("#divFechaIni"+a).removeClass("has-error"),$("#helpErrorFechaIni"+a).html("")}function guardaTolerancia(){var o=!1,a=$("#hdnIdToleranciaEditar").val(),r="";0<a&&(r="Editar");var i=$("#txtTolerancia"+r).val(),e=$("#lstTipoAcumulacion"+r).val(),n=$("#lstConsideracionRetraso"+r).val(),c=$("#txtDescripcion"+r).val(),t=$("#txtFechaIni"+r).val(),s=$("#txtFechaFin"+r).val(),l=$("#txtObservacion"+r).val();return""!=i&&$.ajax({url:"/tolerancias/save/",type:"POST",datatype:"json",async:!1,cache:!1,data:{id:a,tolerancia:i,tipo_acumulacion:e,consideracion_retraso:n,descripcion:c,fecha_ini:t,fecha_fin:s,observacion:l},success:function(a){var r=jQuery.parseJSON(a);$(".msjes").hide(),1==r.result?(o=!0,$("#divMsjePorSuccess").html(""),$("#divMsjePorSuccess").append(r.msj),$("#divMsjeNotificacionSuccess").jqxNotification("open"),$("#jqxgridtolerancias").jqxGrid("updatebounddata")):0==r.result?($("#divMsjePorWarning").html(""),$("#divMsjePorWarning").append(r.msj),$("#divMsjeNotificacionWarning").jqxNotification("open")):($("#divMsjePorError").html(""),$("#divMsjePorError").append(r.msj),$("#divMsjeNotificacionError").jqxNotification("open"))},error:function(){$("#divMsjePorError").html(""),$("#divMsjePorError").append("Se ha producido un error Inesperado"),$("#divMsjeNotificacionError").jqxNotification("open")}}),o}function inicializarCamposParaNuevoRegistroTolerancia(){$("#hdnIdToleranciaEditar").val(0),$("#txtTolerancia").val(""),$("#txtDescripcion").val(""),$("#txtObservacion").val("")}